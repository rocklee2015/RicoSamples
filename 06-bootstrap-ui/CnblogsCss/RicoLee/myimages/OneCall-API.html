<!DOCTYPE html>
<!-- saved from url=(0063)https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-4-6 -->
<html lang="zh-cn"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="referrer" content="never">
<title>OneCall-API - rico.lee - 博客园</title>
<link type="text/css" rel="stylesheet" href="./OneCall-API_files/blog-common.css">
<link id="MainCss" type="text/css" rel="stylesheet" href="./OneCall-API_files/bundle-LessIsMore.css">
<link type="text/css" rel="stylesheet" href="./OneCall-API_files/121374.css">
<link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="./OneCall-API_files/bundle-LessIsMore-mobile.css">
<link title="RSS" type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/ricolee/rss">
<link title="RSD" type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/ricolee/rsd.xml">
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/ricolee/wlwmanifest.xml">
<script src="./OneCall-API_files/f.txt"></script><script src="./OneCall-API_files/amp4ads-host-v0.js.下载"></script><script src="./OneCall-API_files/pubads_impl_rendering_285.js.下载"></script><script async="" src="./OneCall-API_files/analytics.js.下载"></script><script src="./OneCall-API_files/jquery-2.2.0.min.js.下载"></script>
<script type="text/javascript">var currentBlogApp = 'ricolee', cb_enable_mathjax=false;var isLogined=true;</script>
<script src="./OneCall-API_files/blog-common.js.下载" type="text/javascript"></script>
<link rel="preload" href="./OneCall-API_files/f(1).txt" as="script"><script type="text/javascript" src="./OneCall-API_files/f(1).txt"></script><script src="./OneCall-API_files/pubads_impl_285.js.下载" async=""></script><link rel="prefetch" href="https://tpc.googlesyndication.com/safeframe/1-0-31/html/container.html"></head>
<body style="">
<a name="top"></a>
<!--PageBeginHtml Block Begin-->
<link href="./OneCall-API_files/cnblogs-article-nav.css" rel="stylesheet" type="text/css">

<link href="./OneCall-API_files/zoomify.min.css" rel="stylesheet" type="text/css">
<link href="./OneCall-API_files/cnblogs-markdown.css" rel="stylesheet" type="text/css">
<link href="./OneCall-API_files/cnblogs-catelog.css" rel="stylesheet" type="text/css">
<!--PageBeginHtml Block End-->

<div id="home">
<div id="header">
	<div id="blogTitle">
		
<!--done-->
<div class="title"><a id="Header1_HeaderTitle" class="headermaintitle" href="https://www.cnblogs.com/ricolee/">ricolee</a></div>
<div class="subtitle"></div>



		
	</div><!--end: blogTitle 博客的标题和副标题 -->
	<div id="navigator">
		
<ul id="navList">
<li id="nav_sitehome"></li>
<li id="nav_myhome"><a id="blog_nav_myhome" class="menu" href="https://www.cnblogs.com/ricolee/">首页</a></li>
<li id="nav_newpost"></li>
<li id="nav_contact"></li>
<li id="nav_rss">
<!----></li>
<li id="nav_admin"><a id="blog_nav_admin" class="menu" rel="nofollow" href="https://i.cnblogs.com/">管理</a></li>
</ul>

		<div class="blogStats">
			
			
			
		</div><!--end: blogStats -->
	</div><!--end: navigator 博客导航栏 -->
</div><!--end: header 头部 -->
<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		
<div id="post_detail">
<!--done-->
<div id="topics">
	<div class="post">
		<h1 class="postTitle">
			<a id="cb_post_title_url" class="postTitle2" href="https://www.cnblogs.com/ricolee/p/onecall-api.html">OneCall-API</a>
		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div style="clear:both"></div><div class="cnblogs_toc"><p style="text-align:left;margin:0;"><span style="float:left; text-indent:0;"><a id="TocTitle" href="https://www.cnblogs.com/ricolee/p/onecall-api.html#" onclick="javascript:return OnTitleShowToc(this);" title="系统根据文章中H1到H6标签自动生成文章目录">文章目录[点击展开](?)</a></span><a id="TocTitleSymbol" href="https://www.cnblogs.com/ricolee/p/onecall-api.html#" onclick="javascript:return OnTitleSymbolShowToc(this);" title="展开">[+]</a></p><ol style="display:none;margin-left:14px;padding-left:14px;line-height:160%;"><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t0">目录</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t1">接口详细</a></li><ol><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t2">接口简介</a></li><ol><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t3">1 状态代码</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t4">2 消息格式</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t5">3 通用接口地址</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t6">4 通用接口验证方式</a></li></ol><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t7">Web个人接口</a></li><ol><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t8">21 用户登录</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t9">2 用户强行登出</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t10">1 网页获取未读会话消息个数</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t11">2 获取会话的详细信息</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t12">3 打开会话及消息已读</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t13">4 移除联系人</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t14">5 会话角标批量清零</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t15">6 会话角标根据标签清零</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t16">7 会话置顶功能</a></li></ol><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t17">Web讨论组聊天</a></li><ol><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t18">1 创建讨论组</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t19">2 添加讨论组成员</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t20">3 删除讨论组成员</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t21">4 修改讨论组名称</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t22">5 我的讨论组列表</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t23">6 讨论组与工作群的区别</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t24">7 创建群组</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t25">8 添加群成员</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t26">9 删除群成员</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t27">10 修改群名或头像</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t28">11 获取群列表</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t29">12 获取群成员</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t30">13 升为群管理员</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t31">14 取消用户群管理员权限</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t32">15 消息免打扰设置</a></li></ol><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t33">消息中心</a></li><ol><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t34">1 网页版文本消息发送</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t35">2 发送文件或图片</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t36">3 获取用户会话历史聊天消息</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t37">4 定位某一历史聊天消息</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t38">5 获取我的消息</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t39">6 下载图片或附件</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t40">7 消息撤回</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t41">8 消息合并转发</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t42">9 消息轮训订阅</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t43">10 发送图文消息</a></li></ol><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t44">消息标记重点</a></li><ol><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t45">1 添加重点</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t46">2 删除重点</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t47">3 消息重点列表</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t48">4 批量添加重点</a></li></ol><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t49">普通消息订阅类型</a></li><ol><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t50">1 接收个人文本</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t51">2 接收个人语音</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t52">3 接收个人图片client</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t53">4 系统提醒消息</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t54">5 接收视频消息</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t55">6 接收图文消息</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t56">7 接收附件消息</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t57">8 消息撤回重发</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t58">9 接收实时音频视频消息</a></li></ol><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t59">指令消息订阅类型</a></li><ol><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t60">1 个人消息已读指令</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t61">2 群消息已读指令暂未实现该功能</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t62">3 消息标记重点指令</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t63">4 消息取消标记指令客户端只收不发client</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t64">5 移除会话框指令</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t65">6 打开会话指令</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t66">7 好友同步指令</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t67">8 会话更新指令</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t68">9 会话角标批量清零指令</a></li></ol><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t69">好友及分组接口</a></li><ol><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t70">1 创建分组</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t71">2 修改好友分组</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t72">3 删除好友分组</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t73">4 获取分组列表</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t74">5 获取好友列表</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t75">6 邀请好友</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t76">7 处理好友请求</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t77">8 删除好友</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t78">9 获取好友验证列表</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t79">10 添加单向好友类似收藏功能</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t80">11 移动好友分组</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t81">12 好友备注</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t82">13 搜索好友列表</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t83">14 增量好友及分组</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t84">15 精确搜索用户</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t85">16 模糊搜索好友</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t86">17 黑名单列表</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t87">18 移入黑名单</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t88">19 移出黑名单</a></li></ol><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t89">其他</a></li><ol><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t90">1 发起实时语音</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t91">2 获取账号详细信息</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t92">3 上传头像</a></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#t93">4 获取头像</a></li></ol></ol></ol></div><div style="clear:both"><br></div><div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown"><h2 id="autoid-0-0-0"><a name="t0"></a>目录</h2>
<p><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#1-">1. 接口简介</a><br></p>
<ul>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#11-">1.1 状态代码</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#12-">1.2 消息格式</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#13-">1.3 通用接口地址</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#14-">1.4 通用接口验证方式</a><br></li>
</ul>
<p><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#2">2. 网页认证</a><br></p>
<ul>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#21-">2.1 用户登录</a> <br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#22-">2.2 用户强行登出</a><br></li>
</ul>
<p><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#3">3. 会话管理</a><br></p>
<ul>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#31-">3.1 获取最近会话列表</a> <br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#32-">3.2 获取会话详情信息</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#33-">3.3 打开会话及消息已读</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#34-">3.4 移除会话</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#35-">3.5 会话角标批量清零</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#36-">3.6 会话角标根据标签清零</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#37-">3.7 会话置顶功能</a><br></li>
</ul>
<p><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#4-web">4. Web讨论组管理</a><br></p>
<ul>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#41-">4.1 创建讨论组</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#42-">4.2 添加组成员</a> <br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#43-">4.3 删除组成员</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#44-">4.4 修改组名</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#45-">4.5 我的讨论组列表</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#46-">4.6 工作群与讨论组区别</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#47-">4.7 创建群组</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#48-">4.8 添加群成员</a> <br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#49-">4.9 删除群成员</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#410-">4.10 修改群名</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#411-">4.11 我的群列表</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#412-">4.12 获取群成员</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#413-">4.13 升为群管理员</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#414-">4.14 取消用户群管理员权限</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#415-">4.15 消息免打扰设置</a><br></li>
</ul>
<p><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#5">5. 消息中心</a><br></p>
<ul>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#51-">5.1 发送文本消息</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#52-">5.2 发送图片或附件消息</a> <br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#53-">5.3 获取用户会话历史聊天消息</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#54-">5.4 定位到某条消息</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#55-">5.5 获取@我的消息</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#56-">5.6 下载图片或附件</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#57-">5.7 消息撤回</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#58-">5.8 消息合并转发</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#59-">5.9 消息轮训订阅</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#510-">5.10 发送图文消息</a><br></li>
</ul>
<p><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#6">6. 消息标记重点</a><br></p>
<ul>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#61-">6.1 添加重点</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#62-">6.2 删除重点</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#63-">6.3 消息重点列表</a><br></li>
</ul>
<p><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#7">7. 普通消息订阅</a><br></p>
<ul>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#71-">7.1 接收文本消息</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#72-">7.2 接收语音消息</a> <br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#73-">7.3 接收图片消</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#74-">7.4 接收系统提醒消息</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#75-">7.5 接收视频消息</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#76-">7.6 接收图文消息</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#77-">7.7 接收附件消息</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#78-">7.8 消息撤回重发</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#79-">7.9 接收实时语音视频消息</a><br></li>
</ul>
<p><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#8">8. 指令消息订阅</a><br></p>
<ul>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#81-">8.1 个人消息已读指令</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#82-">8.2 群消息已读指令</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#83-">8.3 消息标记重点指令</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#84-">8.4 消息取消标记指令</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#85-">8.5 移除会话框指令</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#86-">8.6 打开会话指令</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#87-">8.7 好友同步指令</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#87-">8.8 会话更新指令</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#89-">8.9 会话角标批量清零指令</a><br><br>
<a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#9-">9. 好友及分组接口</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#91-">9.1 创建分组</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#92-">9.2 修改好友分组</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#93-">9.3 删除好友分组</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#94-">9.4 获取分组列表</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#95-">9.5 获取好友列表</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#96-">9.6 邀请好友</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#97-">9.7 处理好友请求</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#98-">9.8 删除好友</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#99-">9.9 好友验证列表</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#910-">9.10 添加单向好友类似收藏功能</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#911-">9.11 移动好友分组</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#912-">9.12 修改好友备注</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#913-">9.13 搜索好友列表</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#914-">9.14 增量好友及分组</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#915-">9.15 精确搜索</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#916-">9.16 模糊搜索好友</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#917-">9.17 黑名单列表</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#918-">9.18 移入黑名单</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#919-">9.19 移出黑名单</a><br></li>
</ul>
<p><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#10-">10. 其他</a><br></p>
<ul>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#101-">10.1 发起实时语音</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#102-">10.2 获取账号详细信息</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#103-">10.3 上传头像</a><br></li>
<li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#104-">10.4 获取头像</a><br></li>
</ul>
<h2 id="autoid-1-0-0"><a name="t1"></a>接口详细</h2>
<h3 id="autoid-2-0-0"><a name="t2"></a>1. 接口简介</h3>
<h4 id="autoid-2-1-0"><a name="t3"></a>1.1 状态代码</h4>
<p>返回值中的 message 部分，需要加入具体描述，如<code>用户名/密码不正确，请重新登录</code>。</p>
<table>
<thead>
<tr class="header">
<th>状态码</th>
<th>描述</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>code,int</strong></td>
<td><strong>message,string</strong></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>2xxx</strong></td>
<td><strong>-</strong></td>
<td><strong>操作成功</strong></td>
</tr>
<tr class="even">
<td>2000</td>
<td>操作成功</td>
<td><em>通用状态</em></td>
</tr>
<tr class="odd">
<td><strong>4xxx</strong></td>
<td><strong>-</strong></td>
<td><strong>待用错误操作</strong></td>
</tr>
<tr class="even">
<td>4000</td>
<td>用户token无效请重新登录</td>
<td><em>通用状态</em></td>
</tr>
<tr class="odd">
<td>4001</td>
<td>用户不存在</td>
<td>请先同步用户</td>
</tr>
<tr class="even">
<td>4002</td>
<td>用户已存在</td>
<td>无需同步</td>
</tr>
<tr class="odd">
<td>4010</td>
<td>参数验证错误</td>
<td>调试需要</td>
</tr>
<tr class="even">
<td>4011</td>
<td>APP不存在</td>
<td>请先确认APP</td>
</tr>
<tr class="odd">
<td>4012</td>
<td>APP的key验证错误</td>
<td>APPkey重新注册</td>
</tr>
<tr class="even">
<td><strong>6xxx</strong></td>
<td><strong>-</strong></td>
<td><strong>服务器自身错误需要重新请求</strong></td>
</tr>
<tr class="odd">
<td>6000</td>
<td>超时重试</td>
<td><em>通用状态</em></td>
</tr>
<tr class="even">
<td>6101</td>
<td>更新数据失败</td>
<td></td>
</tr>
<tr class="odd">
<td>6102</td>
<td>服务器内部错误</td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="autoid-2-1-1"><a name="t4"></a>1.2 消息格式</h4>
<table>
<thead>
<tr class="header">
<th>消息类型码</th>
<th>描述</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>****</td>
<td><strong>-</strong></td>
<td><strong>常用消息类型需要存入本地消息数据库</strong></td>
</tr>
<tr class="even">
<td>Rev</td>
<td>回执</td>
<td>消息发送成功回执</td>
</tr>
<tr class="odd">
<td>Text</td>
<td>文本</td>
<td>发送文本消息</td>
</tr>
<tr class="even">
<td>Audio</td>
<td>语音</td>
<td>发送语音地址</td>
</tr>
<tr class="odd">
<td>Image</td>
<td>图片</td>
<td>发送图片地址</td>
</tr>
<tr class="even">
<td>Video</td>
<td>视频</td>
<td>发送视频地址</td>
</tr>
<tr class="odd">
<td>File</td>
<td>附件</td>
<td>发送附件地址</td>
</tr>
<tr class="even">
<td>News</td>
<td>图文</td>
<td>发送图片地址及图文消息跳转url</td>
</tr>
<tr class="odd">
<td>Event</td>
<td>事件</td>
<td>发送自定义信息-如日程会议等</td>
</tr>
<tr class="even">
<td>Alert</td>
<td>系统消息</td>
<td>服务器推过来的消息</td>
</tr>
<tr class="odd">
<td>ReSend</td>
<td>消息撤回</td>
<td>撤回重发</td>
</tr>
<tr class="even">
<td>Cmd</td>
<td>系统指令</td>
<td>系统指令 <code>{"name":"${指令}","data":"{${具体内容}}</code></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th>系统指令说明</th>
<th>描述</th>
<th>具体内容</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Read</td>
<td>已读消息</td>
<td>消息的msgId</td>
</tr>
<tr class="even">
<td>make</td>
<td>标记重点</td>
<td>消息的msgId</td>
</tr>
<tr class="odd">
<td>UnMark</td>
<td>取消标记</td>
<td>消息的msgId</td>
</tr>
<tr class="even">
<td>Remove</td>
<td>移除会话</td>
<td>会话的sessionName</td>
</tr>
<tr class="odd">
<td>Open</td>
<td>打开会话-清除未读角标</td>
<td>会话的sessionName</td>
</tr>
<tr class="even">
<td>Relation</td>
<td>好友同步指令</td>
<td>空</td>
</tr>
<tr class="odd">
<td>Modified</td>
<td>会话更新指令</td>
<td>空 可以从info里面获取sessionName tag</td>
</tr>
</tbody>
</table>
<h4 id="autoid-2-1-2"><a name="t5"></a>1.3 通用接口地址</h4>
<p><strong>URL</strong></p>
<p>http://${host}/launchr/${Orgin}/$(Action)</p>
<p><strong>Orgin</strong></p>
<table>
<thead>
<tr class="header">
<th>参数说明</th>
<th>描述</th>
<th>场景</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>chat</td>
<td>服务端授权调用</td>
<td>部分api只提供服务端授权调用 如用户同步</td>
</tr>
<tr class="even">
<td>api</td>
<td>客户端授权调用</td>
<td>部分api也提供客户端授权调用</td>
</tr>
</tbody>
</table>
<p><strong>URL子例</strong></p>
<p>http://localhost/launchr/chat/usersync</p>
<h4 id="autoid-2-1-3"><a name="t6"></a>1.4 通用接口验证方式</h4>
<p><strong>验证方式</strong></p>
<p>读取http里面的json数据进行验证</p>
<p><strong>服务端授权验证必填字段</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td>平台分配</td>
</tr>
<tr class="even">
<td>apptoken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td>平台分配的密钥</td>
</tr>
</tbody>
</table>
<p><strong>客户端授权验证必填字段</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td>平台分配</td>
</tr>
<tr class="even">
<td>userName</td>
<td>用户名</td>
<td>string</td>
<td>必填</td>
<td>导入的用户名</td>
</tr>
<tr class="odd">
<td>userToken</td>
<td>用户token</td>
<td>string</td>
<td>必填</td>
<td>通过调用登录接口返回</td>
</tr>
</tbody>
</table>
<h3 id="autoid-2-1-4"><a name="t7"></a>2 Web个人接口</h3>
<h4 id="autoid-2-2-0"><a name="t8"></a>1.2.1 用户登录</h4>
<p><strong>Action</strong> <code>login</code></p>
<p><strong>场景</strong></p>
<p>和普通的验证cookie登录方式类似，通过自己的服务端代理去调用登录接口后，成功会返回cookie信息，保存到浏览器中即可。</p>
<p>也可以不调用这个接口，调用自己的登录逻辑，把im需要的cookie信息（appName和userName 两个值写入到浏览器中），后面下载文件图片等短链接需要用到cookie认证。</p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>apptoken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td>临时密钥</td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户名</td>
<td>string</td>
<td>必填</td>
<td>用户UID</td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"122"</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>login</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#11-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"login"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"login"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">4001</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">"用户不存在，请重新导入"</span>
}</code></pre>
<h4 id="autoid-2-2-1"><a name="t9"></a>2.2 用户强行登出</h4>
<p><strong>Action</strong> <code>loginout</code></p>
<p><strong>场景</strong><br>
web端需要踢手机端下线需要这么做，对web端本身不影响,web端登出只需清空cookie即可。</p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td>临时密钥</td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户名</td>
<td>string</td>
<td>必填</td>
<td>用户UID</td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"122"</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>logout</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#11-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"loginout"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"loginout"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">4001</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-2-2"><a name="t10"></a>3.1 网页获取未读会话消息个数</h4>
<p><strong>Action</strong> <code>unreadsession</code></p>
<p><strong>场景</strong></p>
<p>登录im后，最先获取的接口之一，同步最新会话列表</p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>start</td>
<td>开始的行数</td>
<td>int</td>
<td>选填</td>
<td>默认0</td>
</tr>
<tr class="odd">
<td>end</td>
<td>结束的行数</td>
<td>int</td>
<td>选填</td>
<td>默认100</td>
</tr>
<tr class="even">
<td>msgId</td>
<td>本地最大msgId</td>
<td>long</td>
<td>选填</td>
<td>老版本填了 msgId,则start和end参数就无效</td>
</tr>
<tr class="odd">
<td>minScore</td>
<td>最小会话排序号</td>
<td>long</td>
<td>选填</td>
<td>17-03新版本才支持，默认0，</td>
</tr>
<tr class="even">
<td>maxScore</td>
<td>最大会话排序号</td>
<td>long</td>
<td>选填</td>
<td>17-03新版本才支持，默认值为当前时间戳</td>
</tr>
</tbody>
</table>
<p><strong>获取最新的会话列表</strong></p>
<p>根据最start end 来获取数量(主要是给网页调用或者首次登录)</p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>,
  <span class="hljs-attr">"start"</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">"end"</span>:<span class="hljs-number">50</span>
}</code></pre>
<p><strong>增量分页获取会话列表</strong></p>
<p>根据 start end</p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>
  <span class="hljs-string">"start"</span>:<span class="hljs-number">50</span>,
  <span class="hljs-attr">"end"</span>:<span class="hljs-number">100</span>
}</code></pre>
<p><strong>增量分页获取会话列表（17-03新版支持）</strong></p>
<p>当web端会话比较多的情况下，比如会话有80条，一次取50条，那么需要把第50条的score值1439953561209传上来,返回小于score的值</p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>,
  <span class="hljs-attr">"maxScore"</span>: <span class="hljs-number">1439953561209</span>，
  <span class="hljs-string">"end"</span>:<span class="hljs-number">50</span>，
}</code></pre>
<p><strong>Score值与MsgId的区别</strong></p>
<p>一个会话Session的Score值会大于等于MsgId,收发消息会改变MsgId的值也会改变score的值，但是指令如打开一个会话的指令（Open）只会更改掉Score值，由于没有产生消息记录，所以不会改变MsgId的值</p>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>unreadsession</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#11-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>msgId</td>
<td>消息Id</td>
<td>long</td>
<td>必要</td>
<td>最新消息Id</td>
</tr>
<tr class="odd">
<td>sessions</td>
<td>消息list</td>
<td>list&lt;msg&gt;</td>
<td>选填</td>
<td>token验证无效就不返回</td>
</tr>
<tr class="even">
<td>removesessions</td>
<td>删除的会话</td>
<td>list&lt;sessionName&gt;</td>
<td>选填</td>
<td>token验证无效或者msgId不传都不返回,目前仅限手机端使用!</td>
</tr>
</tbody>
</table>
<p><strong>sessions</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>sessionName</td>
<td>会话来源</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>count</td>
<td>未读个数</td>
<td>int</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>lastMsg</td>
<td>最后一条消息</td>
<td>string</td>
<td>必要</td>
</tr>
<tr class="even">
<td>nickName</td>
<td>昵称</td>
<td>string</td>
<td>选填</td>
<td>只有个人聊天才会有</td>
</tr>
<tr class="odd">
<td>avatar</td>
<td>头像</td>
<td>string</td>
<td>选填</td>
<td>只有个人聊天才会有</td>
</tr>
<tr class="even">
<td>modified</td>
<td>最后更新时间戳 long</td>
<td>选填</td>
<td>只有个人聊天才会有</td>
</tr>
<tr class="odd">
<td>tag</td>
<td>标签</td>
<td>string</td>
<td>选填</td>
<td>可用于区分显示</td>
</tr>
<tr class="even">
<td>muteNotification</td>
<td>免打扰标识</td>
<td>string</td>
<td>选填</td>
<td>只有群才会有 消息接受模式(0：正常状态，1：接受只显示数字，2：接受不显示数字--预留)</td>
</tr>
<tr class="odd">
<td>extension</td>
<td>用户扩展字段 string</td>
<td>选填</td>
<td>只有个人用户才会返回</td>
</tr>
<tr class="even">
<td>score</td>
<td>会话权重 long</td>
<td>选填</td>
<td>只有17-03新版后才有</td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
   <span class="hljs-attr">"sessions"</span>: [
        {
          <span class="hljs-attr">"sessionName"</span>: <span class="hljs-string">"jetslyli"</span>,
          <span class="hljs-attr">"nickName"</span>: <span class="hljs-string">"杰斯李"</span>,
          <span class="hljs-attr">"avatar"</span>: <span class="hljs-literal">null</span>
          <span class="hljs-string">"count"</span>: <span class="hljs-number">0</span>,
          <span class="hljs-attr">"modified"</span>: <span class="hljs-number">0</span>,
          <span class="hljs-attr">"lastMsg"</span>: 
          {
            <span class="hljs-attr">"from"</span>: <span class="hljs-string">"bellliu"</span>,
            <span class="hljs-attr">"to"</span>: <span class="hljs-string">"jetslyli"</span>,
            <span class="hljs-attr">"content"</span>: <span class="hljs-string">"1232222456"</span>,
            <span class="hljs-attr">"clientMsgId"</span>: <span class="hljs-number">1439803710917</span>,
            <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1439953561209</span>,
            <span class="hljs-attr">"info"</span>: <span class="hljs-string">"{\"nickName\":\"华佗\"}"</span>,
            <span class="hljs-attr">"createDate"</span>: <span class="hljs-number">1439953561209</span>,
            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Text"</span>,
            <span class="hljs-attr">"modified"</span>: <span class="hljs-number">0</span>
          },
          <span class="hljs-attr">"tag"</span>: <span class="hljs-string">"我的病人"</span>,
          <span class="hljs-attr">"extension"</span>:<span class="hljs-string">"\"position\":\"主治医生\""</span>,
          <span class="hljs-attr">"score"</span>: <span class="hljs-number">1439953561209</span>
        },

       {
         <span class="hljs-attr">"sessionName"</span>: <span class="hljs-string">"377@ChatRoom"</span>,
         <span class="hljs-attr">"count"</span>: <span class="hljs-number">0</span>,
         <span class="hljs-attr">"lastMsg"</span>: 
           {
         <span class="hljs-attr">"from"</span>: <span class="hljs-string">"Wr7qq8XOR7cQXpbW"</span>,
         <span class="hljs-attr">"to"</span>: <span class="hljs-string">"377@ChatRoom"</span>,
         <span class="hljs-attr">"content"</span>: <span class="hljs-string">"1"</span>,
         <span class="hljs-attr">"clientMsgId"</span>: <span class="hljs-number">1450247249984</span>,
         <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1450247144583</span>,
         <span class="hljs-attr">"info"</span>: <span class="hljs-string">"{\"userName\":\"Wr7qq8XOR7cQXpbW\",\"nickName\":\"Bell Liu\",\"sessionName\":\"Bell Liu,Arno                        Yao,Allen Feng ,Jeffrey Pan,july测试2,Jetsly Li\"}"</span>,
         <span class="hljs-attr">"createDate"</span>: <span class="hljs-number">1450247144583</span>,
         <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Text"</span>,
         <span class="hljs-attr">"modified"</span>: <span class="hljs-number">0</span>
             },
         <span class="hljs-attr">"tag"</span>: <span class="hljs-string">"闲聊"</span>,
         <span class="hljs-attr">"muteNotification"</span>: <span class="hljs-string">"0"</span>,
         <span class="hljs-attr">"score"</span>: <span class="hljs-number">1450247144583</span>
       }

      ],
  <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1439986976135</span>,
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"unreadsession"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>,
  <span class="hljs-attr">"removesessions"</span>: [
        {
          <span class="hljs-attr">"sessionName"</span>: <span class="hljs-string">"224@ChatRoom"</span>
         }]
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"unreadsession"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-2-3"><a name="t11"></a>3.2 获取会话的详细信息</h4>
<p><strong>Action</strong> <code>session</code></p>
<p><strong>场景</strong><br>
读取群或个人详细信息时，需要调用这个接口，最新联系人列表获取后，<code>订阅新消息</code>接口有消息返回，如果这条消息的发送者不在最近会话 或者好友列表内，需要调用这个接口，显示在最近会话中。如果调用返回失败，则不显示。</p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>apptoken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td>临时密钥</td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>sessionName</td>
<td>用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"ZBAYNbRqYAUBbjDE4"</span>,
  <span class="hljs-attr">"sessionName"</span>: <span class="hljs-string">"1@ChatRoom"</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>token-login</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td>[状态码][]</td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>data</td>
<td>返回数据</td>
<td>Object</td>
<td>必要</td>
<td>返回消息</td>
</tr>
</tbody>
</table>
<p><strong>Object</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>modified</td>
<td>用户最后更新时间</td>
<td>long</td>
<td>选填</td>
<td>如果用户存在则返回</td>
</tr>
<tr class="even">
<td>nickName</td>
<td>昵称</td>
<td>string</td>
<td>选填</td>
<td>如果用户存在则返回</td>
</tr>
<tr class="odd">
<td>avatar</td>
<td>头像</td>
<td>string</td>
<td>选填</td>
<td>如果用户存在则返回</td>
</tr>
<tr class="even">
<td>type</td>
<td>用户类型</td>
<td>string</td>
<td>选填</td>
<td>如 con 如果用户存在则返回</td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户名</td>
<td>string</td>
<td>选填</td>
<td>如果用户存在则返回</td>
</tr>
<tr class="even">
<td>memberList</td>
<td>成员列表</td>
<td>List&lt;Object&gt;</td>
<td>选填</td>
<td>如果是群返回成员列表</td>
</tr>
<tr class="odd">
<td>tag</td>
<td>标签</td>
<td>string</td>
<td>选填</td>
<td>个人和群都有</td>
</tr>
<tr class="even">
<td>extension</td>
<td>扩展字段</td>
<td>string</td>
<td>选填</td>
<td>只有群成员才会有</td>
</tr>
<tr class="odd">
<td>stick</td>
<td>置顶</td>
<td>string</td>
<td>选填</td>
<td>“0” 取消置顶 "1" 置顶</td>
</tr>
<tr class="even">
<td>receiveMode</td>
<td>免打扰标识</td>
<td>int</td>
<td>选填</td>
<td>只有群才会有 消息接受模式(0：正常状态，1：接受只显示数字，2：接受不显示数字--预留)</td>
</tr>
</tbody>
</table>
<p><strong>个人Success</strong></p>
<pre class="json"><code class="hljs">{
   <span class="hljs-attr">"data"</span>:{
          <span class="hljs-attr">"memberList"</span>: [ ],  
          <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"6lOd0L20RdFad8LL"</span>,
          <span class="hljs-attr">"nickName"</span>: <span class="hljs-string">"bryan"</span>,
          <span class="hljs-attr">"type"</span>: <span class="hljs-literal">null</span>,
          <span class="hljs-attr">"avatar"</span>: <span class="hljs-literal">null</span>,
          <span class="hljs-attr">"tag"</span>: <span class="hljs-literal">null</span>,
          <span class="hljs-attr">"stick"</span>:<span class="hljs-string">"0"</span>,
          <span class="hljs-attr">"receiveMode"</span>:<span class="hljs-string">"0"</span>
          <span class="hljs-string">"extension"</span>：<span class="hljs-string">"\"position\":\"主治医生\""</span>,
          <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1456998719997</span>

   }
   <span class="hljs-string">"action"</span>: <span class="hljs-string">"session"</span>,
   <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
   <span class="hljs-attr">"message"</span>:<span class="hljs-string">""</span>
}</code></pre>
<p><strong>群Success</strong></p>
<pre class="json"><code class="hljs">{
   <span class="hljs-attr">"data"</span>:{
        <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"669@ChatRoom"</span>,
        <span class="hljs-attr">"nickName"</span>: <span class="hljs-string">"bbuubsdfubu"</span>,
        <span class="hljs-attr">"tag"</span>: <span class="hljs-string">"闲聊aaa"</span>,
        <span class="hljs-attr">"type"</span>: <span class="hljs-string">"clt"</span>,
        <span class="hljs-attr">"avatar"</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1433395416979</span>,
        <span class="hljs-attr">"receiveMode"</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">"stick"</span>:<span class="hljs-string">"0"</span>,
        <span class="hljs-attr">"memberList"</span>:[{         
          <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"6lOd0L20RdFad8LL"</span>,
          <span class="hljs-attr">"nickName"</span>: <span class="hljs-string">"bryan"</span>,
          <span class="hljs-attr">"type"</span>: <span class="hljs-literal">null</span>,
          <span class="hljs-attr">"receiveMode"</span>: <span class="hljs-number">0</span>,
          <span class="hljs-attr">"avatar"</span>: <span class="hljs-literal">null</span>,
          <span class="hljs-attr">"extension"</span>：<span class="hljs-attr">"\"position\":\"主治医生\""</span>,
          <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1456998719997</span>
        }]
   }
   <span class="hljs-string">"action"</span>: <span class="hljs-string">"session"</span>,
   <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
   <span class="hljs-attr">"message"</span>:<span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"session"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">4001</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">"此会话用户不存在"</span>
}</code></pre>
<h4 id="autoid-2-2-4"><a name="t12"></a>3.3 打开会话及消息已读</h4>
<p><strong>Action</strong> <code>readsession</code></p>
<p><strong>场景</strong></p>
<p>1:最近联系人列表中，打开某个会话.</p>
<p>2: <code>获取历史消息</code>时，有未读消息需要调用这个接口,此时需要把未读的消息的发送者及msgId传上来</p>
<p>3:在当前窗口，<code>订阅消息</code>时，读取到新消息，也需要把消息的发送者及msgId传上来</p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>sessionName</td>
<td>会话的用户</td>
<td>string</td>
<td>必填</td>
<td>bellliu</td>
</tr>
<tr class="odd">
<td>content</td>
<td>已读消息list</td>
<td>list&lt;data&gt;</td>
<td>选填</td>
<td>有未读消息的时候才穿上来</td>
</tr>
</tbody>
</table>
<p><strong>data</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>from</td>
<td>消息的发送者</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>msgId</td>
<td>标记为已读的消息id</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>单聊</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>,
  <span class="hljs-attr">"sessionName"</span>:<span class="hljs-string">"markhuo"</span>,
  <span class="hljs-attr">"content"</span>:[{<span class="hljs-attr">"msgId"</span>:<span class="hljs-number">1439951678438</span>,<span class="hljs-attr">"from"</span>:<span class="hljs-string">"markhuo"</span>}]
}
</code></pre>
<p><strong>群聊(目前未开通)</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>,
  <span class="hljs-attr">"sessionName"</span>:<span class="hljs-string">"1@ChatRoom"</span>,
  <span class="hljs-attr">"content"</span>:[{<span class="hljs-attr">"msgId"</span>:<span class="hljs-number">1439951678438</span>,<span class="hljs-attr">"from"</span>:<span class="hljs-string">"markhuo"</span>}]
}
</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>readsession</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{

  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"readsession"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"readsession"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-2-5"><a name="t13"></a>3.4 移除联系人</h4>
<p><strong>Action</strong> <code>removesession</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>sessionName</td>
<td>会话的用户</td>
<td>string</td>
<td>必填</td>
<td>bellliu</td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>,
  <span class="hljs-attr">"sessionName"</span>:<span class="hljs-string">"jetslyli"</span>
}
</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>removesession</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{

  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"removesession"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"removesession"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-2-6"><a name="t14"></a>3.5 会话角标批量清零</h4>
<p><strong>Action</strong> <code>readsessionlist</code></p>
<p><strong>场景</strong></p>
<p>批量角标清空</p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>sessionName</td>
<td>会话的用户</td>
<td>string[]</td>
<td>必填</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>单聊</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>,
  <span class="hljs-attr">"sessionName"</span>:[<span class="hljs-string">"markhuo"</span>,<span class="hljs-string">"22@ChatRoom"</span>]
}
</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>readsessionlist</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{

  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"readsessionlist"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"readsessionlist"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-2-7"><a name="t15"></a>3.6 会话角标根据标签清零</h4>
<p><strong>Action</strong> <code>readsessiontag</code></p>
<p><strong>场景</strong></p>
<p>目前仅支持根据工作群的tag来清空</p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>tag</td>
<td>会话的标签</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>,
  <span class="hljs-attr">"tag"</span>:<span class="hljs-string">"11"</span>
}
</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>readsessiontag</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{

  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"readsessiontag"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"readsessiontag"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-2-8"><a name="t16"></a>3.7 会话置顶功能</h4>
<p><strong>Action</strong> <code>sessionStick</code></p>
<p><strong>场景</strong></p>
<p>会话置顶</p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>sessionName</td>
<td>会话的用户</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>stickModel</td>
<td>置顶参数</td>
<td>int</td>
<td>必填</td>
<td>0取消置顶 1置顶</td>
</tr>
</tbody>
</table>
<p><strong>单聊</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>,
  <span class="hljs-attr">"sessionName"</span>:<span class="hljs-string">"22@ChatRoom"</span>，
  “stickModel”：<span class="hljs-number">1</span>
}
</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>sessionStick</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{

  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"sessionStick"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"sessionStick"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h3 id="autoid-2-2-9"><a name="t17"></a>4 Web讨论组聊天</h3>
<h4 id="autoid-2-3-0"><a name="t18"></a>4.1 创建讨论组</h4>
<p><strong>Action</strong> <code>CreateGroup</code></p>
<p><strong>备注</strong></p>
<p>讨论组成员默认上限有40人，如果人员过多，请使用工作群，工作群上限有500，详见<code>工作群</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>groupUsers</td>
<td>讨论组成员</td>
<td>string[]</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>groupName</td>
<td>讨论组名称</td>
<td>string</td>
<td>选填</td>
</tr>
<tr class="even">
<td>tag</td>
<td>讨论组标签</td>
<td>string</td>
<td>选填</td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>,
  <span class="hljs-attr">"groupName"</span> : <span class="hljs-string">"Linhahahahaha"</span>,
  <span class="hljs-attr">"groupUsers"</span>: [<span class="hljs-string">"markhuo"</span>,<span class="hljs-string">"benntwang"</span>,<span class="hljs-string">"jetslyli"</span>],
  <span class="hljs-attr">"tag"</span> : <span class="hljs-string">"闲聊组"</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>creategroup</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>data</td>
<td>群信息</td>
<td>Group</td>
<td>如果成功必要</td>
</tr>
</tbody>
</table>
<p><strong>Group</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>userName</td>
<td>群Id</td>
<td>string</td>
<td>必要</td>
<td>群Id</td>
</tr>
<tr class="even">
<td>nickName</td>
<td>群名字</td>
<td>string</td>
<td>必要</td>
<td>群名字</td>
</tr>
<tr class="odd">
<td>type</td>
<td>未知</td>
<td>string</td>
<td>必填</td>
<td>未知</td>
</tr>
<tr class="even">
<td>avatar</td>
<td>群头像</td>
<td>string</td>
<td>否</td>
<td>只有工作群才需要传</td>
</tr>
<tr class="odd">
<td>modified</td>
<td>群最后修改时间</td>
<td>long</td>
<td>是</td>
<td>群最后修改时间</td>
</tr>
<tr class="even">
<td>maxMember</td>
<td>群最大成员数</td>
<td>long</td>
<td>选填</td>
<td>群最大成员数-只有创建工作群的时候需要传,默认40</td>
</tr>
<tr class="odd">
<td>memberList</td>
<td>群成员ID数组</td>
<td>string[]</td>
<td>必要</td>
<td>群成员ID数组</td>
</tr>
<tr class="even">
<td>tag</td>
<td>讨论组标签</td>
<td>string</td>
<td>必要</td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"creategroup"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">"操作成功"</span>,
  <span class="hljs-attr">"data"</span>: {
    <span class="hljs-attr">"groupName"</span>: <span class="hljs-string">"bbuububu"</span>,
    <span class="hljs-attr">"memberList"</span>: [
      {
        <span class="hljs-attr">"uid"</span>: <span class="hljs-number">433456546</span>,
        <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"6lOd0L20RdFad8LL"</span>,
        <span class="hljs-attr">"nickName"</span>: <span class="hljs-string">"bryan"</span>,
        <span class="hljs-attr">"type"</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">"receiveMode"</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">"avatar"</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1456998719997</span>
      },
      {
        <span class="hljs-attr">"uid"</span>: <span class="hljs-number">433456545</span>,
        <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"l63XDevNRbhneeGo"</span>,
        <span class="hljs-attr">"nickName"</span>: <span class="hljs-string">"Bryan Lin"</span>,
        <span class="hljs-attr">"type"</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">"receiveMode"</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">"avatar"</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1456996833000</span>
      }
    ],
    <span class="hljs-attr">"maxMember"</span>: <span class="hljs-number">40</span>,
    <span class="hljs-attr">"sessionName"</span>: <span class="hljs-string">"667@ChatRoom"</span>,
    <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1458716638444</span>,
    <span class="hljs-attr">"avatar"</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">"tag"</span>: <span class="hljs-string">"闲聊组"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-literal">null</span>
  }
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"creategroup"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-3-1"><a name="t19"></a>4.2 添加讨论组成员</h4>
<p><strong>Action</strong> <code>AddGroupUser</code></p>
<p><strong>备注</strong></p>
<p>讨论组成员上限默认是40人</p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>sessionName</td>
<td>群id</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>groupUsers</td>
<td>群成员</td>
<td>string[]</td>
<td>必填</td>
<td></td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>,
  <span class="hljs-attr">"groupName"</span>:<span class="hljs-string">"15@chatroom"</span>,
  <span class="hljs-attr">"groupUsers"</span>: [<span class="hljs-string">"jerryluo"</span>]
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>addgroupuser</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>data</td>
<td>消息</td>
<td>msg</td>
<td>如果成功必要</td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"data"</span>: {
    <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
    <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"15@ChatRoom"</span>,
    <span class="hljs-attr">"sign"</span>: <span class="hljs-string">"Push"</span>,
    <span class="hljs-attr">"from"</span>: <span class="hljs-string">"15@ChatRoom"</span>,
    <span class="hljs-attr">"to"</span>: <span class="hljs-string">"jerryluo"</span>,
    <span class="hljs-attr">"content"</span>: <span class="hljs-string">"bell邀请jerry加入群聊"</span>,
    <span class="hljs-attr">"clientMsgId"</span>: <span class="hljs-number">1439801764462</span>,
    <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1439801764462</span>,
    <span class="hljs-attr">"info"</span>: <span class="hljs-string">"{\"guid\":\"00000000-0000-0000-0000-000000000000\",\"nickName\":\"bell,bennet,jetsly,jerry\"}"</span>,
    <span class="hljs-attr">"createDate"</span>: <span class="hljs-number">1439801764462</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Alert"</span>,
    <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1439801764462</span>
  },
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"addgroupuser"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"addgroupuser"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">"群成员已超过上限"</span>
}</code></pre>
<h4 id="autoid-2-3-2"><a name="t20"></a>4.3 删除讨论组成员</h4>
<p><strong>Action</strong> <code>DeleteGroupUser</code></p>
<p><strong>场景</strong></p>
<p>通常就讨论组第一个位用户有这个权限</p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>sessionName</td>
<td>群id</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>toUserName</td>
<td>删除目标成员</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>,
  <span class="hljs-attr">"sessionName"</span>:<span class="hljs-string">"15@chatroom"</span>,
  <span class="hljs-attr">"toUserName"</span>: <span class="hljs-string">"jerryluo"</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>deletegroupuser</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>data</td>
<td>消息</td>
<td>msg</td>
<td>如果成功必要</td>
</tr>
</tbody>
</table>
<p><strong>msg</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app类型</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>userName</td>
<td>群Id</td>
<td>string</td>
<td>否</td>
<td></td>
</tr>
<tr class="odd">
<td>sign</td>
<td>消息状态</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>from</td>
<td>消息来源</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>to</td>
<td>消息接收</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>content</td>
<td>消息内容</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>clientMsgId</td>
<td>创建时间戳</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>msgId</td>
<td>服务端消息Id</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>info</td>
<td>群信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>createDate</td>
<td>创建时间戳</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>modified</td>
<td>创建时间戳</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"data"</span>: {
    <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
    <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"15@ChatRoom"</span>,
    <span class="hljs-attr">"sign"</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">"from"</span>: <span class="hljs-string">"15@ChatRoom"</span>,
    <span class="hljs-attr">"to"</span>: <span class="hljs-string">"jerryluo"</span>,
    <span class="hljs-attr">"content"</span>: <span class="hljs-string">"jerry退出群聊"</span>,
    <span class="hljs-attr">"clientMsgId"</span>: <span class="hljs-number">1439802318717</span>,
    <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1439802318717</span>,
    <span class="hljs-attr">"info"</span>: <span class="hljs-string">"{\"guid\":\"00000000-0000-0000-0000-000000000000\",\"nickName\":\"bell,bennet,jetsly\"}"</span>,
    <span class="hljs-attr">"createDate"</span>: <span class="hljs-number">1439802318717</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Alert"</span>,
    <span class="hljs-attr">"modified"</span>: <span class="hljs-number">0</span>
  },
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"deletegroupuser"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"deletegroupuser"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-3-3"><a name="t21"></a>4.4 修改讨论组名称</h4>
<p><strong>Action</strong> <code>UpdateGroupName</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>sessionName</td>
<td>群id</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>groupName</td>
<td>群名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>,
  <span class="hljs-attr">"sessionName"</span>:<span class="hljs-string">"15@chatroom"</span>,
  <span class="hljs-attr">"groupName"</span>: <span class="hljs-string">"jerryluo"</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>updategroupname</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>data</td>
<td>消息</td>
<td>msg</td>
<td>如果成功必要</td>
</tr>
</tbody>
</table>
<p><strong>msg</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app类型</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>userName</td>
<td>群Id</td>
<td>string</td>
<td>否</td>
<td></td>
</tr>
<tr class="odd">
<td>sign</td>
<td>消息状态</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>from</td>
<td>消息来源</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>to</td>
<td>消息接收</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>content</td>
<td>消息内容</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>clientMsgId</td>
<td>创建时间戳</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>msgId</td>
<td>服务端消息Id</td>
<td>long</td>
<td>必要</td>
</tr>
<tr class="odd">
<td>info</td>
<td>群信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>createDate</td>
<td>创建时间戳</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>modified</td>
<td>创建时间戳</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"data"</span>: {
    <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
    <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"15@ChatRoom"</span>,
    <span class="hljs-attr">"sign"</span>: <span class="hljs-string">"Push"</span>,
    <span class="hljs-attr">"from"</span>: <span class="hljs-string">"15@ChatRoom"</span>,
    <span class="hljs-attr">"to"</span>: <span class="hljs-string">"jetslyli"</span>,
    <span class="hljs-attr">"content"</span>: <span class="hljs-string">"群名改为jerryluo"</span>,
    <span class="hljs-attr">"clientMsgId"</span>: <span class="hljs-number">1439802435454</span>,
    <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1439802435454</span>,
    <span class="hljs-attr">"info"</span>: <span class="hljs-string">"{\"guid\":\"00000000-0000-0000-0000-000000000000\",\"nickName\":\"jerryluo\"}"</span>,
    <span class="hljs-attr">"createDate"</span>: <span class="hljs-number">1439802435454</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Alert"</span>,
    <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1439802435454</span>
  },
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"updategroupname"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"updategroupname"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-3-4"><a name="t22"></a>4.5 我的讨论组列表</h4>
<p><strong>Action</strong> <code>grouplist</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>updategroupname</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>data</td>
<td>消息</td>
<td>List&lt;Group&gt;</td>
<td>如果成功必要</td>
</tr>
</tbody>
</table>
<p><strong>Group</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>modified</td>
<td>用户最后更新时间</td>
<td>long</td>
<td>选填</td>
<td>如果用户存在则返回</td>
</tr>
<tr class="even">
<td>userName</td>
<td>群用户</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>nickName</td>
<td>昵称</td>
<td>string</td>
<td>必要</td>
<td>如果用户存在则返回</td>
</tr>
<tr class="even">
<td>avatar</td>
<td>头像</td>
<td>string</td>
<td>必要</td>
<td>如果用户存在则返回</td>
</tr>
<tr class="odd">
<td>type</td>
<td>用户类型</td>
<td>string</td>
<td>选填</td>
<td></td>
</tr>
<tr class="even">
<td>tag</td>
<td>标签</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"data"</span>: [{
      <span class="hljs-attr">"uid"</span>: <span class="hljs-number">654</span>,
      <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"654@ChatRoom"</span>,
      <span class="hljs-attr">"nickName"</span>: <span class="hljs-string">"Linhahahahaha"</span>,
      <span class="hljs-attr">"type"</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">"receiveMode"</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">"avatar"</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1457949345268</span>,
      <span class="hljs-attr">"tag"</span>: <span class="hljs-literal">null</span> 
  }],
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"superGroupList"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"grouplist"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-3-5"><a name="t23"></a>4.6 讨论组与工作群的区别</h4>
<p><strong>使用场景</strong></p>
<p>讨论组就是随时沟通解散，任何人都可以加入</p>
<p>工作群可能只有后台管理加入，前端一般会屏蔽加群和退群的功能。</p>
<p><strong>成员上限</strong></p>
<p>讨论组只有40人，工作群可设置到500人</p>
<p><strong>头像</strong></p>
<p>讨论组一般会做成九宫格的合成头像，群可以自定义头像</p>
<h4 id="autoid-2-3-6"><a name="t24"></a>4.7 创建群组</h4>
<p><strong>Action</strong> <code>createSuperGroup</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>groupUsers</td>
<td>群成员</td>
<td>string[]</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>groupName</td>
<td>群名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>groupMax</td>
<td>群最大用户数</td>
<td>int</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>tag</td>
<td>标签</td>
<td>string</td>
<td>选填</td>
<td></td>
</tr>
<tr class="even">
<td>alertNotice</td>
<td>是否提醒</td>
<td>bool</td>
<td>选题</td>
<td>默认true,即发送提醒消息否则发送指令</td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>,
  <span class="hljs-attr">"groupName"</span>: <span class="hljs-string">"工作群"</span>,
  <span class="hljs-attr">"groupMax"</span>: <span class="hljs-number">200</span>,
  <span class="hljs-attr">"groupUsers"</span>: [<span class="hljs-string">"bellliu"</span>,<span class="hljs-string">"benntwang"</span>,<span class="hljs-string">"jetslyli"</span>],
  <span class="hljs-attr">"tag"</span>: <span class="hljs-string">"聊天群"</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>creategroup</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>data</td>
<td>群信息</td>
<td>Group</td>
<td>如果成功必要</td>
</tr>
</tbody>
</table>
<p><strong>Group</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>groupName</td>
<td>群名字</td>
<td>string</td>
<td>必要</td>
<td>群名字</td>
</tr>
<tr class="even">
<td>sessionName</td>
<td>会话名称</td>
<td>string</td>
<td>必要</td>
<td>会话名称</td>
</tr>
<tr class="odd">
<td>type</td>
<td>未知</td>
<td>string</td>
<td>必填</td>
<td>未知</td>
</tr>
<tr class="even">
<td>tag</td>
<td>群标签</td>
<td>string</td>
<td>必填</td>
<td>群标签</td>
</tr>
<tr class="odd">
<td>avatar</td>
<td>群头像</td>
<td>string</td>
<td>否</td>
<td>群头像链接地址</td>
</tr>
<tr class="even">
<td>modified</td>
<td>群最后修改时间</td>
<td>long</td>
<td>是</td>
<td>群最后修改时间</td>
</tr>
<tr class="odd">
<td>maxMember</td>
<td>群最大成员数</td>
<td>long</td>
<td>必要</td>
<td>群最大成员数</td>
</tr>
<tr class="even">
<td>memberList</td>
<td>群成员数组</td>
<td>member[]</td>
<td>必要</td>
<td>群成员数组</td>
</tr>
</tbody>
</table>
<p><strong>member</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>uid</td>
<td>成员id</td>
<td>string</td>
<td>必要</td>
<td>成员id</td>
</tr>
<tr class="even">
<td>userName</td>
<td>成员username</td>
<td>string</td>
<td>必要</td>
<td>成员username</td>
</tr>
<tr class="odd">
<td>nickName</td>
<td>成员名称</td>
<td>string</td>
<td>必要</td>
<td>成员名称</td>
</tr>
<tr class="even">
<td>type</td>
<td>未知</td>
<td>string</td>
<td>必填</td>
<td>未知</td>
</tr>
<tr class="odd">
<td>tag</td>
<td>成员标签</td>
<td>string</td>
<td>必填</td>
<td>成员标签</td>
</tr>
<tr class="even">
<td>extension</td>
<td>成员扩展字段</td>
<td>string</td>
<td>必填</td>
<td>成员扩展字段</td>
</tr>
<tr class="odd">
<td>receiveMode</td>
<td>消息接受模式</td>
<td>int</td>
<td>必要</td>
<td>消息接受模式</td>
</tr>
<tr class="even">
<td>auth</td>
<td>成员群权限</td>
<td>int</td>
<td>必要</td>
<td>成员群权限,1 普通 2群管理员 3群主</td>
</tr>
<tr class="odd">
<td>avatar</td>
<td>成员头像</td>
<td>string</td>
<td>否</td>
<td>成员头像</td>
</tr>
<tr class="even">
<td>modified</td>
<td>成员最后修改时间</td>
<td>long</td>
<td>是</td>
<td>成员最后修改时间</td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"createSuperGroup"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Success"</span>,
  <span class="hljs-attr">"data"</span>: {
    <span class="hljs-attr">"groupName"</span>: <span class="hljs-string">"这是群"</span>,
    <span class="hljs-attr">"memberList"</span>: [
      {
        <span class="hljs-attr">"uid"</span>: <span class="hljs-number">433456545</span>,
        <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"l63XDevNRbhneeGo"</span>,
        <span class="hljs-attr">"nickName"</span>: <span class="hljs-string">"Bryan Lin"</span>,
        <span class="hljs-attr">"type"</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">"tag"</span>: <span class="hljs-string">"蘑菇星人"</span>,
        <span class="hljs-attr">"extension"</span>: <span class="hljs-string">"{\"position\":\"主治医生\"}"</span>,
        <span class="hljs-attr">"receiveMode"</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">"auth"</span>: <span class="hljs-number">3</span>,
        <span class="hljs-attr">"avatar"</span>: <span class="hljs-string">"/avatar/launchr/l63XDevNRbhneeGo/150/af4fd1c8-4416-484c-a4a8-c138cd307fae.jpg?remote=1"</span>,
        <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1464074840501</span>
      },
      {
        <span class="hljs-attr">"uid"</span>: <span class="hljs-number">433456546</span>,
        <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"6lOd0L20RdFad8LL"</span>,
        <span class="hljs-attr">"nickName"</span>: <span class="hljs-string">"bryan"</span>,
        <span class="hljs-attr">"type"</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">"tag"</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">"extension"</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">"receiveMode"</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">"auth"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"avatar"</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1456998719997</span>
      }
    ],
    <span class="hljs-attr">"maxMember"</span>: <span class="hljs-number">40</span>,
    <span class="hljs-attr">"sessionName"</span>: <span class="hljs-string">"215@SuperGroup"</span>,
    <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1464597524170</span>,
    <span class="hljs-attr">"avatar"</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">"tag"</span>: <span class="hljs-string">"打屁群"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-literal">null</span>
  }
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"creategroup"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-3-7"><a name="t25"></a>4.8 添加群成员</h4>
<p><strong>Action</strong> <code>AddGroupUser</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>sessionName</td>
<td>群id</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>groupUsers</td>
<td>群成员</td>
<td>string[]</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>alertNotice</td>
<td>是否提醒</td>
<td>bool</td>
<td>选题</td>
<td>默认true,即发送提醒消息否则发送指令</td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>,
  <span class="hljs-attr">"sessionName"</span>:<span class="hljs-string">"15@SuperGroup"</span>,
  <span class="hljs-attr">"groupUsers"</span>: [<span class="hljs-string">"jerryluo"</span>]
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>addgroupuser</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td>t</td>
</tr>
<tr class="even">
<td>data</td>
<td>消息</td>
<td>msg</td>
<td>如果成功必要</td>
</tr>
</tbody>
</table>
<p><strong>msg</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app类型</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>userName</td>
<td>群Id</td>
<td>string</td>
<td>否</td>
<td></td>
</tr>
<tr class="odd">
<td>sign</td>
<td>消息状态</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>from</td>
<td>消息来源</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>to</td>
<td>消息接收</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>content</td>
<td>消息内容</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>clientMsgId</td>
<td>创建时间戳</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>msgId</td>
<td>服务端消息Id</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>info</td>
<td>群信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>createDate</td>
<td>创建时间戳</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>modified</td>
<td>创建时间戳</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"data"</span>: {
    <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
    <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"15@ChatRoom"</span>,
    <span class="hljs-attr">"sign"</span>: <span class="hljs-string">"Push"</span>,
    <span class="hljs-attr">"from"</span>: <span class="hljs-string">"15@ChatRoom"</span>,
    <span class="hljs-attr">"to"</span>: <span class="hljs-string">"jerryluo"</span>,
    <span class="hljs-attr">"content"</span>: <span class="hljs-string">"bell邀请jerry加入群聊"</span>,
    <span class="hljs-attr">"clientMsgId"</span>: <span class="hljs-number">1439801764462</span>,
    <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1439801764462</span>,
    <span class="hljs-attr">"info"</span>: <span class="hljs-string">"{\"guid\":\"00000000-0000-0000-0000-000000000000\",\"nickName\":\"bell,bennet,jetsly,jerry\"}"</span>,
    <span class="hljs-attr">"createDate"</span>: <span class="hljs-number">1439801764462</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Alert"</span>,
    <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1439801764462</span>
  },
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"addgroupuser"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"addgroupuser"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-3-8"><a name="t26"></a>4.9 删除群成员</h4>
<p><strong>Action</strong> <code>removeSuperGroupMember</code></p>
<p>若删除的是群主，则会把群主权限移给下一位，管理员优先</p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>sessionName</td>
<td>群id</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>toUserName</td>
<td>删除目标成员</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>,
  <span class="hljs-attr">"sessionName"</span>:<span class="hljs-string">"15@chatroom"</span>,
  <span class="hljs-attr">"toUserName"</span>: <span class="hljs-string">"jerryluo"</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>deletegroupuser</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>data</td>
<td>消息</td>
<td>Group</td>
<td>如果成功必要</td>
</tr>
</tbody>
</table>
<p><strong>Group</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app类型</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>userName</td>
<td>群Id</td>
<td>string</td>
<td>否</td>
<td></td>
</tr>
<tr class="odd">
<td>sign</td>
<td>消息状态</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>from</td>
<td>消息来源</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>to</td>
<td>消息接收</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>content</td>
<td>消息内容</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>clientMsgId</td>
<td>创建时间戳</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>msgId</td>
<td>服务端消息Id</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>info</td>
<td>群信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>createDate</td>
<td>创建时间戳</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>modified</td>
<td>创建时间戳</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"data"</span>: {   
  },
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"deletegroupuser"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"deletegroupuser"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-3-9"><a name="t27"></a>4.10 修改群名或头像</h4>
<p><strong>Action</strong> <code>updateSuperGroup</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>sessionName</td>
<td>群id</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>groupName</td>
<td>群名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>avatar</td>
<td>群头像</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>alertNotice</td>
<td>是否提醒</td>
<td>bool</td>
<td>选题</td>
<td>默认true,即发送提醒消息否则发送指令</td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>,
  <span class="hljs-attr">"sessionName"</span>:<span class="hljs-string">"15@SuperGroup"</span>,
  <span class="hljs-attr">"groupName"</span>: <span class="hljs-string">"jerryluo"</span>,
  <span class="hljs-attr">"avatar"</span>:<span class="hljs-string">""</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>updategroupname</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>data</td>
<td>消息</td>
<td>msg</td>
<td>如果成功必要</td>
</tr>
</tbody>
</table>
<p><strong>msg</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app类型</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>userName</td>
<td>群Id</td>
<td>string</td>
<td>否</td>
<td></td>
</tr>
<tr class="odd">
<td>sign</td>
<td>消息状态</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>from</td>
<td>消息来源</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>to</td>
<td>消息接收</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>content</td>
<td>消息内容</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>clientMsgId</td>
<td>创建时间戳</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>msgId</td>
<td>服务端消息Id</td>
<td>long</td>
<td>必要</td>
</tr>
<tr class="odd">
<td>info</td>
<td>群信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>createDate</td>
<td>创建时间戳</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>modified</td>
<td>创建时间戳</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"data"</span>: {
    <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
    <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"15@SuperGroup"</span>,
    <span class="hljs-attr">"sign"</span>: <span class="hljs-string">"Push"</span>,
    <span class="hljs-attr">"from"</span>: <span class="hljs-string">"15@SuperGroup"</span>,
    <span class="hljs-attr">"to"</span>: <span class="hljs-string">"jetslyli"</span>,
    <span class="hljs-attr">"content"</span>: <span class="hljs-string">"群名改为jerryluo"</span>,
    <span class="hljs-attr">"clientMsgId"</span>: <span class="hljs-number">1439802435454</span>,
    <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1439802435454</span>,
    <span class="hljs-attr">"info"</span>: <span class="hljs-string">"{\"guid\":\"00000000-0000-0000-0000-000000000000\",\"nickName\":\"jerryluo\"}"</span>,
    <span class="hljs-attr">"createDate"</span>: <span class="hljs-number">1439802435454</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Alert"</span>,
    <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1439802435454</span>
  },
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"updategroupname"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"updategroupname"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-3-10"><a name="t28"></a>4.11 获取群列表</h4>
<p><strong>Action</strong> <code>superGroupList</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>updategroupname</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>data</td>
<td>消息</td>
<td>List&lt;SuperGroup&gt;</td>
<td>如果成功必要</td>
</tr>
</tbody>
</table>
<p><strong>SuperGroup</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>modified</td>
<td>用户最后更新时间</td>
<td>long</td>
<td>选填</td>
<td>如果用户存在则返回</td>
</tr>
<tr class="even">
<td>userName</td>
<td>群用户</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>nickName</td>
<td>昵称</td>
<td>string</td>
<td>必要</td>
<td>如果用户存在则返回</td>
</tr>
<tr class="even">
<td>avatar</td>
<td>头像</td>
<td>string</td>
<td>必要</td>
<td>如果用户存在则返回</td>
</tr>
<tr class="odd">
<td>type</td>
<td>用户类型</td>
<td>string</td>
<td>选填</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"data"</span>: [{
      <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"5@SuperGroup"</span>,
 
      <span class="hljs-attr">"nickName"</span>: <span class="hljs-string">"群2"</span>,
      <span class="hljs-attr">"avatar"</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">"type"</span> : <span class="hljs-literal">null</span>,
      <span class="hljs-attr">"modified"</span> : <span class="hljs-number">1448706687985</span>
     
  }],
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"superGroupList"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"superGroupList"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-3-11"><a name="t29"></a>4.12 获取群成员</h4>
<p><strong>获取session信息详见 3.2 获取会话的详情</strong></p>
<p><strong>Action</strong> <code>session</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>apptoken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td>临时密钥</td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>sessionName</td>
<td>用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"userToken"</span>: <span class="hljs-string">"verify"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"1317"</span>,
  <span class="hljs-attr">"sessionName"</span>: <span class="hljs-string">"5@SuperGroup"</span>
}</code></pre>
<p><strong>Object</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>groupName</td>
<td>群名字</td>
<td>string</td>
<td>必要</td>
<td>群名字</td>
</tr>
<tr class="even">
<td>sessionName</td>
<td>会话名称</td>
<td>string</td>
<td>必要</td>
<td>会话名称</td>
</tr>
<tr class="odd">
<td>type</td>
<td>未知</td>
<td>string</td>
<td>必填</td>
<td>未知</td>
</tr>
<tr class="even">
<td>tag</td>
<td>群标签</td>
<td>string</td>
<td>必填</td>
<td>群标签</td>
</tr>
<tr class="odd">
<td>avatar</td>
<td>群头像</td>
<td>string</td>
<td>否</td>
<td>群头像链接地址</td>
</tr>
<tr class="even">
<td>modified</td>
<td>群最后修改时间</td>
<td>long</td>
<td>是</td>
<td>群最后修改时间</td>
</tr>
<tr class="odd">
<td>maxMember</td>
<td>群最大成员数</td>
<td>long</td>
<td>必要</td>
<td>群最大成员数</td>
</tr>
<tr class="even">
<td>memberList</td>
<td>群成员数组</td>
<td>member[]</td>
<td>必要</td>
<td>群成员数组</td>
</tr>
</tbody>
</table>
<p><strong>member</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>uid</td>
<td>成员id</td>
<td>string</td>
<td>必要</td>
<td>成员id</td>
</tr>
<tr class="even">
<td>userName</td>
<td>成员username</td>
<td>string</td>
<td>必要</td>
<td>成员username</td>
</tr>
<tr class="odd">
<td>nickName</td>
<td>成员名称</td>
<td>string</td>
<td>必要</td>
<td>成员名称</td>
</tr>
<tr class="even">
<td>type</td>
<td>未知</td>
<td>string</td>
<td>必填</td>
<td>未知</td>
</tr>
<tr class="odd">
<td>tag</td>
<td>成员标签</td>
<td>string</td>
<td>必填</td>
<td>成员标签</td>
</tr>
<tr class="even">
<td>extension</td>
<td>成员扩展字段</td>
<td>string</td>
<td>必填</td>
<td>成员扩展字段</td>
</tr>
<tr class="odd">
<td>receiveMode</td>
<td>消息接受模式</td>
<td>int</td>
<td>必要</td>
<td>消息接受模式</td>
</tr>
<tr class="even">
<td>auth</td>
<td>成员群权限</td>
<td>int</td>
<td>必要</td>
<td>成员群权限,1 普通 2群管理员 3群主</td>
</tr>
<tr class="odd">
<td>avatar</td>
<td>成员头像</td>
<td>string</td>
<td>否</td>
<td>成员头像</td>
</tr>
<tr class="even">
<td>modified</td>
<td>成员最后修改时间</td>
<td>long</td>
<td>是</td>
<td>成员最后修改时间</td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"session"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Success"</span>,
  <span class="hljs-attr">"data"</span>: {
    <span class="hljs-attr">"memberList"</span>: [
      {
        <span class="hljs-attr">"uid"</span>: <span class="hljs-number">433456545</span>,
        <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"l63XDevNRbhneeGo"</span>,
        <span class="hljs-attr">"nickName"</span>: <span class="hljs-string">"Bryan Lin"</span>,
        <span class="hljs-attr">"type"</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">"tag"</span>: <span class="hljs-string">"蘑菇星人"</span>,
        <span class="hljs-attr">"extension"</span>: <span class="hljs-string">"{\"position\":\"主治医生\"}"</span>,
        <span class="hljs-attr">"receiveMode"</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">"auth"</span>: <span class="hljs-number">3</span>,
        <span class="hljs-attr">"avatar"</span>: <span class="hljs-string">"/avatar/launchr/l63XDevNRbhneeGo/150/af4fd1c8-4416-484c-a4a8-c138cd307fae.jpg?remote=1"</span>,
        <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1464074840501</span>
      },
      {
        <span class="hljs-attr">"uid"</span>: <span class="hljs-number">433456546</span>,
        <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"6lOd0L20RdFad8LL"</span>,
        <span class="hljs-attr">"nickName"</span>: <span class="hljs-string">"bryan"</span>,
        <span class="hljs-attr">"type"</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">"tag"</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">"extension"</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">"receiveMode"</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">"auth"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"avatar"</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1456998719997</span>
      }
    ],
    <span class="hljs-attr">"nickName"</span>: <span class="hljs-string">"这是群"</span>,
    <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1464597524170</span>,
    <span class="hljs-attr">"avatar"</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">"tag"</span>: <span class="hljs-string">"打屁群"</span>,
    <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"215@SuperGroup"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-literal">null</span>
  }
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"session"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">4001</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">"此会话用户不存在"</span>
}</code></pre>
<h4 id="autoid-2-3-12"><a name="t30"></a>4.13 升为群管理员</h4>
<p><strong>Action</strong> <code>addSuperGroupAdmin</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>sessionName</td>
<td>群id</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>toUserName</td>
<td>目标成员</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"xLd9WaVpoVsY7m5R"</span>,
  <span class="hljs-attr">"sessionName"</span>:<span class="hljs-string">"39@SuperGroup"</span>,
  <span class="hljs-attr">"toUserName"</span>:<span class="hljs-string">"ZmO9Xa39JPSx7OlD"</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>addSuperGroupAdmin</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>data</td>
<td>消息</td>
<td>Group</td>
<td>如果成功必要</td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"addSuperGroupAdmin"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Success"</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"addSuperGroupAdmin"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-3-13"><a name="t31"></a>4.14 取消用户群管理员权限</h4>
<p><strong>Action</strong> <code>cancelSuperGroupAdmin</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>sessionName</td>
<td>群id</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>toUserName</td>
<td>目标成员</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"xLd9WaVpoVsY7m5R"</span>,
  <span class="hljs-attr">"sessionName"</span>:<span class="hljs-string">"39@SuperGroup"</span>,
  <span class="hljs-attr">"toUserName"</span>:<span class="hljs-string">"ZmO9Xa39JPSx7OlD"</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>cancelSuperGroupAdmin</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>data</td>
<td>消息</td>
<td>Group</td>
<td>如果成功必要</td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"cancelSuperGroupAdmin"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Success"</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"cancelSuperGroupAdmin"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-3-14"><a name="t32"></a>4.15 消息免打扰设置</h4>
<p><strong>Action</strong> <code>messageTroubleFree</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>sessionName</td>
<td>会话名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>receiveMode</td>
<td>消息接收模式</td>
<td>string</td>
<td>必填</td>
<td>0：正常状态，1：接受只显示数字，2：接受不显示数字</td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"xLd9WaVpoVsY7m5R"</span>,
  <span class="hljs-attr">"sessionName"</span>: <span class="hljs-string">"224@ChatRoom"</span>,
  <span class="hljs-attr">"receiveMode"</span>: <span class="hljs-string">"1"</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>messageTroubleFree</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>data</td>
<td>消息</td>
<td>Group</td>
<td>如果成功必要</td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"messageTroubleFree"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Success"</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"messageTroubleFree"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h3 id="autoid-2-3-15"><a name="t33"></a>5. 消息中心</h3>
<h4 id="autoid-2-4-0"><a name="t34"></a>5.1 网页版文本消息发送</h4>
<p><strong>Action</strong> <code>sendmsg</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>apptoken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td>app密钥</td>
</tr>
<tr class="odd">
<td>userName</td>
<td>账号</td>
<td>string</td>
<td>必填</td>
<td>发送者账号</td>
</tr>
<tr class="even">
<td>from</td>
<td>用户或子app</td>
<td>string</td>
<td>选填</td>
<td>发送方Uid 默认为userName字段</td>
</tr>
<tr class="odd">
<td>to</td>
<td>接收着用户</td>
<td>string[]</td>
<td>必填</td>
<td>接收方Uid列表</td>
</tr>
<tr class="even">
<td>content</td>
<td>消息内容</td>
<td>string</td>
<td>必填</td>
<td>长度限制4000,超过服务器自动丢弃</td>
</tr>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>info</td>
<td>个人信息</td>
<td>string</td>
<td>必填</td>
<td>发送方nickName</td>
</tr>
<tr class="odd">
<td>clientMsgId</td>
<td>客户端消息时间戳</td>
<td>long</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>modified</td>
<td>用户更新时间戳</td>
<td>long</td>
<td>选填</td>
<td>用户个人资料最后更新时间戳</td>
</tr>
</tbody>
</table>
<p><strong>单聊-发送</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>,
  <span class="hljs-attr">"to"</span>: [<span class="hljs-string">"jetslyli"</span>],
  <span class="hljs-attr">"content"</span>: <span class="hljs-string">"亲，你还有别的需要咨询吗"</span>,
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Text"</span>,
  <span class="hljs-attr">"info"</span>: <span class="hljs-string">"{\"nickName\":\"贝尔\"}"</span>,
  <span class="hljs-attr">"clientMsgId"</span>:<span class="hljs-number">1439803710917</span>
}</code></pre>
<p><strong>群聊-发送</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>,
  <span class="hljs-attr">"to"</span>: [<span class="hljs-string">"1@ChatRoom"</span>],
  <span class="hljs-attr">"content"</span>: <span class="hljs-string">"hi mark"</span>,
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Text"</span>,
  <span class="hljs-attr">"clientMsgId"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"info"</span>: <span class="hljs-string">"{\"nickName\":\"贝尔\"}"</span>
}
</code></pre>
<p><strong>群聊@功能-发送</strong><br>
1、atUser需要按顺序存放，可解决群里出现同名问题。<br>
2、如果 @ 的人不存在，就当普通文本处理，同时需要加入在atUsers里面加一个空的数组,即有几个@就有几个数组。<br>
3、如果需要 @全体成员，则加入 ["@全体成员"] 即可，同理日文版则是为 ["@日本语all"],点高亮无法跳转</p>
<p>如下完整格式</p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"from"</span>: <span class="hljs-string">"mark"</span>,
  <span class="hljs-attr">"to"</span>: [<span class="hljs-string">"1@ChatRoom"</span>],
  <span class="hljs-attr">"content"</span>: <span class="hljs-string">"hi all @马克 @马克@@ @全体成员 "</span>,
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Text"</span>,
  <span class="hljs-attr">"createDate"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"info"</span>: <span class="hljs-string">"{\"nickName\":\"贝尔\",\"atUsers\":[\"bell@贝尔\",\"mark@马克\",\"\",\"\",\"ALL@全体成员\"]}"</span>,
  <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1422416686183</span>
}</code></pre>
<p><strong>群聊通知栏指定人提醒功能-发送</strong><br>
1.默认所有人都会收到通知栏提醒-即alertUsers为null（不屏蔽群的情况下）<br>
2.如果屏蔽了群，不会收到通知栏提醒（优先级高）<br>
3、alertUsers 账号里面的人通知栏才会提醒。</p>
<p>比如群里面有mark,bell,yan,而bell屏蔽了群，由于mark是发送者，不会收到提醒，bell因为屏蔽了群也不会收到提醒，yan不在提醒列表里面也不会收到提醒。</p>
<p>如下完整格式</p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"from"</span>: <span class="hljs-string">"mark"</span>,
  <span class="hljs-attr">"to"</span>: [<span class="hljs-string">"1@ChatRoom"</span>],
  <span class="hljs-attr">"content"</span>: <span class="hljs-string">"需要通知马克、贝尔"</span>,
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Text"</span>,
  <span class="hljs-attr">"createDate"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"info"</span>: <span class="hljs-string">"{\"nickName\":\"马克\",\"alertUsers\":[\"bell\",\"mark\"]}"</span>,
  <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1422416686183</span>
}</code></pre>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
    <span class="hljs-attr">"action"</span>: <span class="hljs-string">"sendmsg"</span>,
    <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
    <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{

   <span class="hljs-attr">"action"</span>: <span class="hljs-string">"sendmsg"</span>,
   <span class="hljs-attr">"code"</span>: <span class="hljs-number">4012</span>,
   <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>

}</code></pre>
<h4 id="autoid-2-4-1"><a name="t35"></a>5.2 发送文件或图片</h4>
<p><strong>注意</strong><br>
请求方法为表单提交,文件或图片根据type来区分</p>
<p><strong>Action</strong> <code>upload</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必填</td>
<td>文件为File,图片为Image</td>
</tr>
<tr class="odd">
<td>info</td>
<td>扩展字段</td>
<td>string</td>
<td>必填 个人昵称等扩展信息，如{"nickName":"贝尔"}</td>
</tr>
<tr class="even">
<td>to</td>
<td>目标对象</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>clientMsgId</td>
<td>消息的客户端Id</td>
<td>long</td>
<td>必填</td>
</tr>
<tr class="even">
<td>attachment</td>
<td>附件</td>
<td>file</td>
<td>必填</td>
<td></td>
</tr>
</tbody>
</table>
<pre class="multipart"><code class="hljs http"><span class="hljs-keyword">POST</span> <span class="hljs-string">/api/v1</span> HTTP/1.1
<span class="hljs-attribute">Host</span>: localhost:8080
<span class="hljs-attribute">Content-Type</span>: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

<span class="accesslog">----WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name=<span class="hljs-string">"appName"</span>

launchr
----WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name=<span class="hljs-string">"appToken"</span>

verify-code
----WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name=<span class="hljs-string">"userName"</span>

bellliu
----WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name=<span class="hljs-string">"type"</span>

Image
----WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name=<span class="hljs-string">"info"</span>

{\<span class="hljs-string">"nickName\"</span>:\<span class="hljs-string">"贝尔\"</span>}
----WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name=<span class="hljs-string">"to"</span>

jetslyli
----WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name=<span class="hljs-string">"clientMsgId"</span>

<span class="hljs-number">1439884073010</span>
----WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name=<span class="hljs-string">"attachment"</span>; filename=<span class="hljs-string">"avatar.jpg"</span>
Content-Type: image/jpeg


----WebKitFormBoundary7MA4YWxkTrZu0gW</span></code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>upload</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{

  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"upload"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"upload"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-4-2"><a name="t36"></a>5.3 获取用户会话历史聊天消息</h4>
<p><strong>Action</strong> <code>historymessage</code></p>
<p><strong>场景</strong></p>
<p>打开某个会话的时候，或者上来刷新时需要调用这接口</p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>onlyFrom</td>
<td>xx会话用户</td>
<td>string</td>
<td>选填</td>
<td>不为空的话，会筛选出某个账号所有发出的消息</td>
</tr>
<tr class="odd">
<td>to</td>
<td>与xx人会话</td>
<td>string</td>
<td>必填</td>
<td>如与mark对话 则填markhuo</td>
</tr>
<tr class="even">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>选填</td>
<td>默认为全部类型，如果填Text则为文本类型</td>
</tr>
<tr class="odd">
<td>limit</td>
<td>返回总数</td>
<td>long</td>
<td>选填</td>
<td>默认值是10 最大100</td>
</tr>
<tr class="even">
<td>startTimestamp</td>
<td>开始时间戳</td>
<td>long</td>
<td>必填</td>
<td>大于等于这个时间戳 （开始结束二选一）</td>
</tr>
<tr class="odd">
<td>endTimestamp</td>
<td>结束时间戳</td>
<td>long</td>
<td>必填</td>
<td>小于等于这个时间戳,当为-1的时候获取当前时间戳 （开始结束二选一）</td>
</tr>
</tbody>
</table>
<p><strong>普通消息历史记录</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>,
  <span class="hljs-attr">"to"</span>: <span class="hljs-string">"markhuo"</span>,
  <span class="hljs-attr">"limit"</span>:<span class="hljs-number">10</span>,
  <span class="hljs-attr">"startTimestamp"</span>:<span class="hljs-number">1431337458667</span>,
  <span class="hljs-attr">"endTimestamp"</span>: <span class="hljs-number">1431337458667</span>
}</code></pre>
<p><strong>某个群成员发送的消息历史记录</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>,
  <span class="hljs-attr">"onlyFrom"</span>: <span class="hljs-string">"mark"</span>,
  <span class="hljs-attr">"to"</span>: <span class="hljs-string">"22@ChatRoom"</span>,
  <span class="hljs-attr">"limit"</span>:<span class="hljs-number">10</span>,
  <span class="hljs-attr">"endTimestamp"</span>: <span class="hljs-number">-1</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>historymessage</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>msg</td>
<td>消息list</td>
<td>list&lt;msg&gt;</td>
<td>选填</td>
<td>token验证无效就不返回</td>
</tr>
</tbody>
</table>
<p><strong>msg</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#02-">消息类型码</a></td>
</tr>
<tr class="even">
<td>from</td>
<td>消息来源</td>
<td>string</td>
<td>必要</td>
<td>用户UID</td>
</tr>
<tr class="odd">
<td>to</td>
<td>消息接收</td>
<td>string</td>
<td>必要</td>
<td>用户UID</td>
</tr>
<tr class="even">
<td>createDate</td>
<td>消息生成的服务器时间</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>clientMsgId</td>
<td>客户端时间</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>msgId</td>
<td>服务器消息id</td>
<td>long</td>
<td>必要</td>
<td>按照这个倒序排列</td>
</tr>
<tr class="odd">
<td>info</td>
<td>扩展字段-个人信息</td>
<td>string</td>
<td>必要</td>
<td>profile</td>
</tr>
<tr class="even">
<td>content</td>
<td>消息内容</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>modified</td>
<td>用户更新时间戳</td>
<td>long</td>
<td>否</td>
<td>用户个人资料最后更新时间戳</td>
</tr>
<tr class="even">
<td>unReadCount</td>
<td>消息未读个数</td>
<td>long</td>
<td>必填</td>
<td>表示这个消息还有多少个人没有读</td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"msg"</span>: [
        {
          <span class="hljs-attr">"unReadCount"</span>:<span class="hljs-number">0</span>,
          <span class="hljs-attr">"from"</span>: <span class="hljs-string">"bellliu"</span>,
          <span class="hljs-attr">"to"</span>: <span class="hljs-string">"markhuo"</span>,
          <span class="hljs-attr">"content"</span>: <span class="hljs-string">"2亲，本医生还提供其他服务,如有信息需要可点击"</span>,
          <span class="hljs-attr">"clientMsgId"</span>: <span class="hljs-number">1431330288416</span>,
          <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1431330288417</span>,
          <span class="hljs-attr">"info"</span>: <span class="hljs-string">"{\"nickName\":\"贝尔\"}"</span>,
          <span class="hljs-attr">"createDate"</span>: <span class="hljs-number">0</span>,
          <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Text"</span>,
          <span class="hljs-attr">"modified"</span>: <span class="hljs-number">0</span>
        }
   ]
  <span class="hljs-string">"action"</span>: <span class="hljs-string">"historymessage"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"historymessage"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-4-3"><a name="t37"></a>5.4 定位某一历史聊天消息</h4>
<p><strong>Action</strong> <code>searchmessage</code></p>
<p><strong>场景</strong></p>
<p>获取到@我的历史记录或者我标记的重点里面，需要快速定位到这条的前后历史消息</p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>sessionName</td>
<td>xx会话用户</td>
<td>必填</td>
<td>选填</td>
<td>群活个人</td>
</tr>
<tr class="odd">
<td>limit</td>
<td>返回总数</td>
<td>long</td>
<td>选填</td>
<td>默认值是10 最大50，如果填10 则返回小于endTimestamp值得5条，即limit/2的整数部分</td>
</tr>
<tr class="even">
<td>endTimestamp</td>
<td>结束时间戳</td>
<td>long</td>
<td>必填</td>
<td>时间戳-即消息msgId</td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"ZBAYNbRqYAUBbjDE2"</span>,
  <span class="hljs-attr">"limit"</span>:<span class="hljs-number">21</span>,
  <span class="hljs-attr">"sessionName"</span> : <span class="hljs-string">"224@ChatRoom"</span>,
  <span class="hljs-attr">"endTimestamp"</span>: <span class="hljs-number">1449196692089</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>historymessage</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>msg</td>
<td>消息list</td>
<td>list&lt;msg&gt;</td>
<td>选填</td>
<td>token验证无效就不返回</td>
</tr>
</tbody>
</table>
<p><strong>msg</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#02-">消息类型码</a></td>
</tr>
<tr class="even">
<td>from</td>
<td>消息来源</td>
<td>string</td>
<td>必要</td>
<td>用户UID</td>
</tr>
<tr class="odd">
<td>to</td>
<td>消息接收</td>
<td>string</td>
<td>必要</td>
<td>用户UID</td>
</tr>
<tr class="even">
<td>createDate</td>
<td>消息生成的服务器时间</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>clientMsgId</td>
<td>客户端时间</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>msgId</td>
<td>服务器消息id</td>
<td>long</td>
<td>必要</td>
<td>按照这个倒序排列</td>
</tr>
<tr class="odd">
<td>info</td>
<td>扩展字段-个人信息</td>
<td>string</td>
<td>必要</td>
<td>profile</td>
</tr>
<tr class="even">
<td>content</td>
<td>消息内容</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>modified</td>
<td>用户更新时间戳</td>
<td>long</td>
<td>否</td>
<td>用户个人资料最后更新时间戳</td>
</tr>
<tr class="even">
<td>unReadCount</td>
<td>消息未读个数</td>
<td>long</td>
<td>必填</td>
<td>表示这个消息还有多少个人没有读</td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"msg"</span>: [
        {
          <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1449199129174</span>,
<span class="hljs-attr">"info"</span>: <span class="hljs-string">"{\"atUsers\":[\"ZBAYNbRqYAUBbjDE7@Tyrion Kong●⁠ sdf\\n\"],\"userName\":\"zZPnWOQdL3F5NXPZ\",\"nickName\":\"Billlin\",\"sessionName\":\"Allen Feng,William Zhang,Jerry Luo,Alex Liu,Tyrion Kong,Andrew ,erwr,Bennet Wang,Arno Yao,Helen Yin,Lars Chen,Richard Ji,尹晗,Loome Zhou,Remon Lv,skyefeng,Flandre Yi,Jeffrey Pan,Bell Liu,Daniel Wu,Eden Liang,DeanLiu,Billlin,ak48,StephenHe,Joan Xie,Sid Hu,yanzeng,测试多部门员工,Jetsly Li,aaa,Carolie,larry,larryxu,测试新用户5,测试新用户6,conan,ces5,e1e2222,july测试2,july测试,测试添加部门用户1,Lily,Conan Ma,Julie Chen,bevisli,Alice,Alice,robinlin,Emilyye,skimmyzhou,ymiryu,yukiyuan,evywang,sofeirsu,alvinshen,cherrychen,test,test,Jason Wang,Tab Liu,Richard Ji2,Richard ji #,Richard Ji 5,Richard Ji 5,Richard Ji 6,Richard Ji 7,Richard Ji 8,Richard Ji,zero,尹晗5,尹晗4,尹晗3,尹晗2\",\"readCount\":74}"</span>,
<span class="hljs-attr">"unReadCount"</span>: <span class="hljs-number">0</span>,
<span class="hljs-attr">"content"</span>: <span class="hljs-string">"@Tyrion Kong⁠ sdf"</span>,
<span class="hljs-attr">"type"</span>: <span class="hljs-string">"Text"</span>,
<span class="hljs-attr">"from"</span>: <span class="hljs-string">"224@ChatRoom"</span>,
<span class="hljs-attr">"to"</span>: <span class="hljs-string">"ZBAYNbRqYAUBbjDE2"</span>,
<span class="hljs-attr">"clientMsgId"</span>: <span class="hljs-number">1449199155111</span>,
<span class="hljs-attr">"createDate"</span>: <span class="hljs-number">1449199129174</span>,
<span class="hljs-attr">"modified"</span>: <span class="hljs-number">0</span>,
<span class="hljs-attr">"bookMark"</span>: <span class="hljs-number">0</span>
        }
   ]
  <span class="hljs-string">"action"</span>: <span class="hljs-string">"historymessage"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"historymessage"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-4-4"><a name="t38"></a>5.5 获取@我的消息</h4>
<p><strong>Action</strong> <code>searchAtSelfMessage</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>apptoken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td>临时密钥</td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>limit</td>
<td>长度</td>
<td>int</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>to</td>
<td>会话用户</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>startTimestamp</td>
<td>开始时间戳</td>
<td>long</td>
<td>必填</td>
<td>大于等于这个时间戳 （开始结束二选一）</td>
</tr>
<tr class="odd">
<td>endTimestamp</td>
<td>结束时间戳</td>
<td>long</td>
<td>必填</td>
<td>小于等于这个时间戳,当为-1则获取当前时间戳 （开始结束二选一）</td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"ZBAYNbRqYAUBbjDE4"</span>,
  <span class="hljs-attr">"limit"</span>: <span class="hljs-string">"15"</span>,
  <span class="hljs-attr">"to"</span>: <span class="hljs-string">"ZBAYNbRqYAUBbjDE5"</span>,
  <span class="hljs-attr">"endTimestamp"</span>: <span class="hljs-number">-1</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>upload</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>msg</td>
<td>返回数据</td>
<td>Object</td>
<td>必要</td>
<td>返回消息</td>
</tr>
</tbody>
</table>
<p><strong>Object</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>content</td>
<td>消息内容</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>createDate</td>
<td>消息生成的服务器时间</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>from</td>
<td>消息来源</td>
<td>string</td>
<td>必要</td>
<td>用户UID</td>
</tr>
<tr class="even">
<td>info</td>
<td>扩展字段-个人信息</td>
<td>string</td>
<td>必要</td>
<td>profile</td>
</tr>
<tr class="odd">
<td>msgId</td>
<td>服务器消息id</td>
<td>long</td>
<td>必要</td>
<td>按照这个倒序排列</td>
</tr>
<tr class="even">
<td>to</td>
<td>消息接收</td>
<td>string</td>
<td>必要</td>
<td>用户UID</td>
</tr>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>bookMark</td>
<td>重点标记</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{

  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"searchAtSelfMessage"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">"操作成功"</span>,
    <span class="hljs-attr">"msg"</span>: [
          {
             <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1458284583560</span>,
              <span class="hljs-attr">"info"</span>: <span class="hljs-string">"{\"atUsers\":[\"6lOd0L20RdFad8LL@bryan\"],\"userName\":\"l63XDevNRbhneeGo\",\"nickName\":\"Bryan Lin\",\"sessionName\":\"Linhahahahaha\"}"</span>,
              <span class="hljs-attr">"content"</span>: <span class="hljs-string">"@bryan‍ testetstet"</span>,
              <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
              <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Text"</span>,
              <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"6lOd0L20RdFad8LL"</span>,
              <span class="hljs-attr">"from"</span>: <span class="hljs-string">"654@ChatRoom"</span>,
              <span class="hljs-attr">"to"</span>: <span class="hljs-string">"6lOd0L20RdFad8LL"</span>,
              <span class="hljs-attr">"createDate"</span>: <span class="hljs-number">1458284583560</span>,
              <span class="hljs-attr">"bookMark"</span>: <span class="hljs-number">0</span>
          }
     ]
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"searchAtSelfMessage"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-4-5"><a name="t39"></a>5.6 下载图片或附件</h4>
<p><strong>Action</strong> ``</p>
<p><strong>场景</strong></p>
<p>直接拿断链地址进行拼接，http://imhttp.mintcode.com/launchr//F3IfYna,需要把之前登录成功返回cookie信息带过来，否则无法下载</p>
<h4 id="autoid-2-4-6"><a name="t40"></a>5.7 消息撤回</h4>
<p><strong>Action</strong> <code>resendmsg</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>userName</td>
<td>用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userToken</td>
<td>用户token</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必要</td>
<td>消息类型 (新)</td>
</tr>
<tr class="odd">
<td>content</td>
<td>消息内容</td>
<td>string</td>
<td>消息内容</td>
<td>必要</td>
</tr>
<tr class="even">
<td>from</td>
<td>消息来源</td>
<td>string</td>
<td>必要</td>
<td>用户UID （旧）</td>
</tr>
<tr class="odd">
<td>to</td>
<td>消息接收</td>
<td>string</td>
<td>必要</td>
<td>用户UID （旧）</td>
</tr>
<tr class="even">
<td>clientMsgId</td>
<td>客户端时间</td>
<td>long</td>
<td>必要</td>
<td>（旧）</td>
</tr>
<tr class="odd">
<td>msgId</td>
<td>服务端消息id</td>
<td>long</td>
<td>必要</td>
<td>(旧)</td>
</tr>
<tr class="even">
<td>info</td>
<td>个人信息</td>
<td>string</td>
<td>必要</td>
<td>个人nickName</td>
</tr>
<tr class="odd">
<td>modified</td>
<td>用户更新时间戳</td>
<td>long</td>
<td>选填</td>
<td>用户个人资料最后更新时间戳</td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"userToken"</span>: <span class="hljs-string">"verify"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>,
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Push"</span>,
  <span class="hljs-attr">"from"</span>: <span class="hljs-string">"bellliu"</span>,
  <span class="hljs-attr">"to"</span>: <span class="hljs-string">"mark"</span>,
  <span class="hljs-attr">"content"</span>: <span class="hljs-string">"bellliu撤回了一条消息"</span>,
  <span class="hljs-attr">"clientMsgId"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1433416686183</span>,
  <span class="hljs-attr">"info"</span>: <span class="hljs-string">"{\"nickName\":\"贝尔\"}"</span>,
  <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1422416686186</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td>[状态码][]</td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"resendmsg"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"resendmsg"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">4010</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">"to参数不能为空"</span>
}</code></pre>
<h4 id="autoid-2-4-7"><a name="t41"></a>5.8 消息合并转发</h4>
<p><strong>Action</strong> <code>forwardMergeMessage</code></p>
<p><strong>场景</strong></p>
<p>可逐条转发也可以合并准发</p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>apptoken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td>临时密钥</td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户名</td>
<td>string</td>
<td>必填</td>
<td>发送者账号</td>
</tr>
<tr class="even">
<td>info</td>
<td>个人信息</td>
<td>string</td>
<td>必填</td>
<td>发送方个人信息</td>
</tr>
<tr class="odd">
<td>to</td>
<td>接受者用户</td>
<td>string[]</td>
<td>必填</td>
<td>接收方Uid列表</td>
</tr>
<tr class="even">
<td>content</td>
<td>消息list</td>
<td>list<msg></msg></td>
<td>必填</td>
<td>转发的消息</td>
</tr>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>title</td>
<td>合并消息标题</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>oneByOne</td>
<td>逐条转发标识</td>
<td>bool</td>
<td>非必要</td>
<td>当为true时</td>
</tr>
<tr class="even">
<td>clientMsgId</td>
<td>客户端消息时间戳</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>msg</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#02-">消息类型码</a></td>
</tr>
<tr class="even">
<td>from</td>
<td>消息来源</td>
<td>string</td>
<td>必要</td>
<td>用户UID</td>
</tr>
<tr class="odd">
<td>createDate</td>
<td>消息生成的服务器时间</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>clientMsgId</td>
<td>客户端时间</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>msgId</td>
<td>服务器消息id</td>
<td>long</td>
<td>必要</td>
<td>按照这个倒序排列</td>
</tr>
<tr class="even">
<td>info</td>
<td>扩展字段-个人信息</td>
<td>string</td>
<td>必要</td>
<td>profile</td>
</tr>
<tr class="odd">
<td>content</td>
<td>消息内容</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>modified</td>
<td>用户更新时间戳</td>
<td>long</td>
<td>否</td>
<td>用户个人资料最后更新时间戳</td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>:<span class="hljs-string">"l63XDevNRbhneeGo"</span>,
  <span class="hljs-attr">"info"</span>: <span class="hljs-string">"{\"nickName\":\"Bryan Lin\",\"userName\":\"l63XDevNRbhneeGo\"}"</span>,
  <span class="hljs-attr">"type"</span>:<span class="hljs-string">"MergeMessage"</span>,
  <span class="hljs-attr">"to"</span>: [<span class="hljs-string">"654@ChatRoom"</span>],
  <span class="hljs-attr">"oneByOne"</span>:<span class="hljs-literal">true</span>,
  <span class="hljs-attr">"title"</span>: <span class="hljs-string">"4s组的聊天记录"</span>,
  <span class="hljs-attr">"clientMsgId"</span>:<span class="hljs-number">1459493528412</span>,
  <span class="hljs-attr">"content"</span>: [
          {
              <span class="hljs-attr">"from"</span>: <span class="hljs-string">"bellliu"</span>,
              <span class="hljs-attr">"content"</span>: <span class="hljs-string">"色热热热"</span>,
              <span class="hljs-attr">"clientMsgId"</span>: <span class="hljs-number">1431330288416</span>,
              <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1431330288417</span>,
              <span class="hljs-attr">"info"</span>: <span class="hljs-string">"{\"nickName\":\"贝尔\"}"</span>,
              <span class="hljs-attr">"createDate"</span>: <span class="hljs-number">1444376110920</span>,
              <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Text"</span>,
              <span class="hljs-attr">"modified"</span>: <span class="hljs-number">0</span>
        },
        {
              <span class="hljs-attr">"from"</span>: <span class="hljs-string">"bellliu"</span>,
              <span class="hljs-attr">"content"</span>: <span class="hljs-string">"{\"fileName\":\"u=445139140,968914561&amp;fm=23&amp;gp=0.jpg\",\"fileSize\":8791,\"fileUrl\":\"/jYvYzeb\",\"thumbnail\":\"/jYvYzea\",\"thumbnailHeight\":200,\"thumbnailWidth\":200}"</span>,
              <span class="hljs-attr">"clientMsgId"</span>: <span class="hljs-number">1431330288417</span>,
              <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1431330288418</span>,
              <span class="hljs-attr">"info"</span>: <span class="hljs-string">"{\"nickName\":\"bryan lin\"}"</span>,
              <span class="hljs-attr">"createDate"</span>: <span class="hljs-number">1444376110921</span>,
              <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Image"</span>,    (File)
              <span class="hljs-attr">"modified"</span>: <span class="hljs-number">0</span>
        }
    ]
}</code></pre>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
    <span class="hljs-attr">"action"</span>: <span class="hljs-string">"forwardMergeMessage"</span>,
    <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
    <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1457949670113</span>,
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
   <span class="hljs-attr">"action"</span>: <span class="hljs-string">"forwardMergeMessage"</span>,
   <span class="hljs-attr">"code"</span>: <span class="hljs-number">4012</span>,
   <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-4-8"><a name="t42"></a>5.9 消息轮训订阅</h4>
<p><strong>Action</strong> <code>subscribemessage</code></p>
<p><strong>场景</strong></p>
<p>第一次调用时，msgId来自<code>获取最近会话列表</code>里返回的msgId,然后<br>
不断http轮训这个接口，如果有数据立马返回，并把返回的msg列表里面最大的msgId，存在本地，下次调用把这个值带上会。<br>
返回的消息类型包括<code>指令消息类型</code>和<code>普通消息类型</code>，需要逐条处理</p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>msgId</td>
<td>消息msgId</td>
<td>long</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>milliseconds</td>
<td>订阅等待毫秒数</td>
<td>long</td>
<td>必填填</td>
<td>默认值最小100毫秒</td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>,
  <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1433143943434</span>,
  <span class="hljs-attr">"milliseconds"</span>:<span class="hljs-number">50000</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>subscribemessage</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>msg</td>
<td>消息list</td>
<td>list&lt;msg&gt;</td>
<td>选填</td>
<td>token验证无效就不返回</td>
</tr>
</tbody>
</table>
<p><strong>msg</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必要</td>
<td>[消息类型码]</td>
</tr>
<tr class="even">
<td>from</td>
<td>消息来源</td>
<td>string</td>
<td>必要</td>
<td>用户UID</td>
</tr>
<tr class="odd">
<td>to</td>
<td>消息接收</td>
<td>string</td>
<td>必要</td>
<td>用户UID</td>
</tr>
<tr class="even">
<td>createDate</td>
<td>消息生成的服务器时间</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>clientMsgId</td>
<td>客户端时间</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>msgId</td>
<td>服务器消息id</td>
<td>long</td>
<td>必要</td>
<td>按照这个倒序排列</td>
</tr>
<tr class="odd">
<td>info</td>
<td>扩展字段-个人信息</td>
<td>string</td>
<td>必要</td>
<td>profile</td>
</tr>
<tr class="even">
<td>content</td>
<td>消息内容</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>modified</td>
<td>用户更新时间戳</td>
<td>long</td>
<td>否</td>
<td>用户个人资料最后更新时间戳</td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
   <span class="hljs-attr">"msg"</span>: [
        {
          <span class="hljs-attr">"from"</span>: <span class="hljs-string">"bellliu"</span>,
          <span class="hljs-attr">"to"</span>: <span class="hljs-string">"markhuo"</span>,
          <span class="hljs-attr">"content"</span>: <span class="hljs-string">"2亲，本医生还提供其他服务,如有信息需要可点击"</span>,
          <span class="hljs-attr">"clientMsgId"</span>: <span class="hljs-number">1431330288416</span>,
          <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1431330288417</span>,
          <span class="hljs-attr">"info"</span>: <span class="hljs-string">"{\"nickName\":\"贝尔\"}"</span>,
          <span class="hljs-attr">"createDate"</span>: <span class="hljs-number">0</span>,
          <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Text"</span>,
          <span class="hljs-attr">"modified"</span>: <span class="hljs-number">0</span>
        }
   ]
  <span class="hljs-string">"action"</span>: <span class="hljs-string">"subscribemessage"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"subscribemessage"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-4-9"><a name="t43"></a>5.10 发送图文消息</h4>
<p><strong>Action</strong> <code>sendNewsMsg</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>String</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>String</td>
<td>必填</td>
<td>app密钥</td>
</tr>
<tr class="odd">
<td>userName</td>
<td>账号</td>
<td>String</td>
<td>必填</td>
<td>发送者账号</td>
</tr>
<tr class="even">
<td>from</td>
<td>用户或子app</td>
<td>String</td>
<td>选填</td>
<td>发送方Uid 默认为userName字段</td>
</tr>
<tr class="odd">
<td>to</td>
<td>接收着用户</td>
<td>String[]</td>
<td>必填</td>
<td>接收方Uid列表</td>
</tr>
<tr class="even">
<td>articles</td>
<td>消息内容</td>
<td>Articles</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>String</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>info</td>
<td>个人信息</td>
<td>String</td>
<td>选填</td>
<td>发送方nickName</td>
</tr>
<tr class="odd">
<td>clientMsgId</td>
<td>客户端消息时间戳</td>
<td>long</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>modified</td>
<td>用户更新时间戳</td>
<td>long</td>
<td>选填</td>
<td>用户个人资料最后更新时间戳</td>
</tr>
</tbody>
</table>
<p><strong>Articles</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>title</td>
<td>标题</td>
<td>String</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>description</td>
<td>描述</td>
<td>String</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>picUrl</td>
<td>图片链接</td>
<td>String</td>
<td>必填</td>
<td>有url合法性验证</td>
</tr>
<tr class="even">
<td>url</td>
<td>跳转链接</td>
<td>String</td>
<td>必填</td>
<td>有url合法性验证</td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>,
  <span class="hljs-attr">"to"</span>: [<span class="hljs-string">"jetslyli"</span>],
  <span class="hljs-attr">"articles"</span>: {
    <span class="hljs-attr">"title"</span>:<span class="hljs-string">"Title"</span>,
    <span class="hljs-attr">"description"</span>:<span class="hljs-string">"Description"</span>,
    <span class="hljs-attr">"picUrl"</span>:<span class="hljs-string">"http://www.baidu.com"</span>,
    <span class="hljs-attr">"url"</span>:<span class="hljs-string">"http://www.mintcode.com/img/img-bg-index-01.jpg"</span>
  },
  <span class="hljs-attr">"info"</span>: <span class="hljs-string">"{\"nickName\":\"贝尔刘\"}"</span>,
  <span class="hljs-attr">"clientMsgId"</span>:<span class="hljs-number">1439803710917</span>
}</code></pre>
<h3 id="autoid-2-4-10"><a name="t44"></a>6.消息标记重点</h3>
<h4 id="autoid-2-5-0"><a name="t45"></a>6.1 添加重点</h4>
<p><strong>Action</strong> <code>addbookmark</code></p>
<p><strong>场景</strong></p>
<p>类似消息收藏功能，并能够快速定位前后消息</p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>apptoken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td>临时密钥</td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>msgId</td>
<td>消息id</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>sessionName</td>
<td>会话的用户</td>
<td>string 必填</td>
<td></td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"ZBAYNbRqYAUBbjDE4"</span>,
  <span class="hljs-attr">"sessionName"</span>:<span class="hljs-string">"bellliu"</span>,
  <span class="hljs-attr">"msgId"</span>: <span class="hljs-string">"1444471462316"</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>upload</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{

  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"addbookmark"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"addbookmark"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-5-1"><a name="t46"></a>7.2 删除重点</h4>
<p><strong>Action</strong> <code>deletebookmark</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>apptoken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td>临时密钥</td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>msgId</td>
<td>消息id</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>sessionName</td>
<td>会话的用户</td>
<td>string 必填</td>
<td></td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"ZBAYNbRqYAUBbjDE4"</span>,
  <span class="hljs-attr">"sessionName"</span>:<span class="hljs-string">"bellliu"</span>,
  <span class="hljs-attr">"msgId"</span>: <span class="hljs-string">"1444471462316"</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>upload</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{

  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"deletebookmark"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"deletebookmark"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-5-2"><a name="t47"></a>7.3 消息重点列表</h4>
<p><strong>Action</strong> <code>searchbookmark</code></p>
<p><strong>场景</strong></p>
<p>返回消息重点的列表，可根据消息msgId<code>获取历史消息</code>或<code>定位某一历史聊天消息</code>来查看前后聊天记录。</p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>apptoken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td>临时密钥</td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>limit</td>
<td>长度</td>
<td>int</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>to</td>
<td>会话用户</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>startTimestamp</td>
<td>开始时间戳</td>
<td>long</td>
<td>必填</td>
<td>大于等于这个时间戳 （开始结束二选一）</td>
</tr>
<tr class="odd">
<td>endTimestamp</td>
<td>结束时间戳</td>
<td>long</td>
<td>必填</td>
<td>小于等于这个时间戳,当为-1 or 两个时间戳参数都不填的情况下则获取当前时间戳 （开始结束二选一）</td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"ZBAYNbRqYAUBbjDE4"</span>,
  <span class="hljs-attr">"limit"</span>: <span class="hljs-string">"15"</span>,
  <span class="hljs-attr">"to"</span>: <span class="hljs-string">"ZBAYNbRqYAUBbjDE5"</span>,
  <span class="hljs-attr">"endTimestamp"</span>: <span class="hljs-number">-1</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>upload</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>msg</td>
<td>返回数据</td>
<td>Object</td>
<td>必要</td>
<td>返回消息</td>
</tr>
</tbody>
</table>
<p><strong>Object</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>content</td>
<td>消息内容</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>createDate</td>
<td>消息生成的服务器时间</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>from</td>
<td>消息来源</td>
<td>string</td>
<td>必要</td>
<td>用户UID</td>
</tr>
<tr class="even">
<td>info</td>
<td>扩展字段-个人信息</td>
<td>string</td>
<td>必要</td>
<td>profile</td>
</tr>
<tr class="odd">
<td>msgId</td>
<td>服务器消息id</td>
<td>long</td>
<td>必要</td>
<td>按照这个倒序排列</td>
</tr>
<tr class="even">
<td>to</td>
<td>消息接收</td>
<td>string</td>
<td>必要</td>
<td>用户UID</td>
</tr>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{

  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"searchbookmark"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"msg"</span>: [
          {
            <span class="hljs-attr">"from"</span>: <span class="hljs-string">"ZBAYNbRqYAUBbjDE4"</span>,
            <span class="hljs-attr">"to"</span>: <span class="hljs-string">"ZBAYNbRqYAUBbjDE5"</span>,
            <span class="hljs-attr">"content"</span>: <span class="hljs-string">"2亲，本医生还提供其他服务,如有信息需要可点击"</span>,
            <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1444376076792</span>,
            <span class="hljs-attr">"info"</span>: <span class="hljs-string">"{\"nickName\":\"贝尔\"}"</span>,
            <span class="hljs-attr">"createDate"</span>: <span class="hljs-number">1444376110920</span>,
            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Text"</span>,
          }
     ]
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"searchbookmark"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-5-3"><a name="t48"></a>7.4 批量添加重点</h4>
<p><strong>Action</strong> <code>addbookmarklist</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>apptoken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td>临时密钥</td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>msgIds</td>
<td>消息id列表</td>
<td>long[]</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>sessionName</td>
<td>会话的用户</td>
<td>string 必填</td>
<td></td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"ZBAYNbRqYAUBbjDE4"</span>,
  <span class="hljs-attr">"sessionName"</span>:<span class="hljs-string">"bellliu"</span>,
  <span class="hljs-attr">"msgIds"</span>: [<span class="hljs-number">1444471462316</span>,<span class="hljs-number">1444471462317</span>]
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>upload</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{

  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"addbookmarklist"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"addbookmarklist"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h3 id="autoid-2-5-4"><a name="t49"></a>8 普通消息订阅类型</h3>
<p><strong>场景</strong></p>
<p>个人发送消息成功后或者接收到别人发个自己的消息都能订阅到,通过<code>消息轮训订阅</code>接口逐条处理</p>
<h4 id="autoid-2-6-0"><a name="t50"></a>8.1 接收个人文本</h4>
<p><strong>场景</strong></p>
<p>以bell账号为例,收到消息后</p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>from</td>
<td>发送者用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>to</td>
<td>接受者用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>content</td>
<td>内容</td>
<td>string</td>
<td>必填</td>
<td>文本</td>
</tr>
<tr class="even">
<td>clientMsgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>返回客户端本地时间戳</td>
</tr>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必填</td>
<td>Text</td>
</tr>
<tr class="even">
<td>info</td>
<td>扩展字段</td>
<td>string</td>
<td>选填</td>
<td>发送人的nickName</td>
</tr>
<tr class="odd">
<td>msgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>服务端消息id</td>
</tr>
</tbody>
</table>
<p><strong>单聊-接收</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"from"</span>: <span class="hljs-string">"bell"</span>,
  <span class="hljs-attr">"to"</span>: <span class="hljs-string">"mark"</span>,
  <span class="hljs-attr">"content"</span>: <span class="hljs-string">"hi mark"</span>,
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Text"</span>,
  <span class="hljs-attr">"createDate"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"info"</span>: <span class="hljs-string">"{\"nickName\":\"贝尔\"}"</span>,
  <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1422416686183</span>
}</code></pre>
<p><strong>自己发出去的群聊</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"from"</span>: <span class="hljs-string">"bell"</span>,
  <span class="hljs-attr">"to"</span>: <span class="hljs-string">"1@ChatRoom"</span>,
  <span class="hljs-attr">"content"</span>: <span class="hljs-string">"hi mark"</span>,
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Text"</span>,
  <span class="hljs-attr">"clientMsgId"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1422416686183</span>
}
</code></pre>
<p><strong>自己收到到的群聊</strong></p>
<p>info里面nickName代表发送方昵称，userName代表用户名</p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"from"</span>: <span class="hljs-string">"1@ChatRoom"</span>,
  <span class="hljs-attr">"to"</span>: <span class="hljs-string">"bell"</span>,
  <span class="hljs-attr">"content"</span>: <span class="hljs-string">"hi bell"</span>,
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Text"</span>,
  <span class="hljs-attr">"createDate"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"info"</span>: <span class="hljs-string">"{\"nickName\":\"马克\",\"userName\":\"mark\",\"sessionName\":\"聊天群\"}"</span>,
  <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1422416686183</span>
}</code></pre>
<p><strong>群聊@功能-接收</strong><br>
1、atUser需要按顺序存放，可解决群里出现同名问题。<br>
2、如果 @ 的人不存在，就当普通文本处理，同时需要加入在atUsers里面加一个空的数组,即有几个@就有几个数组。<br>
3、如果需要 @全体成员，则加入 ["@全体成员"] 即可，同理日文版则是为 ["@日本语all"],点高亮无法跳转</p>
<p>如下完整格式,其中发送方信息都在info里面 userName为发送方账号,nickName为发送方昵称,sessionName为会话群</p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"from"</span>: <span class="hljs-string">"1@ChatRoom"</span>,
  <span class="hljs-attr">"to"</span>: <span class="hljs-string">"bell"</span>,
  <span class="hljs-attr">"content"</span>: <span class="hljs-string">"hi bell @贝尔 @马克@@ @全体成员"</span>,
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Text"</span>,
  <span class="hljs-attr">"createDate"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"info"</span>: <span class="hljs-string">"{\"nickName\":\"马克\",\"userName\":\"mark\",\"sessionName\":\"聊天群\",\"atUsers\":[\"bell@贝尔\",\"mark@马克\",\"\",\"\",\"ALL@全体成员\"]}"</span>,
  <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1422416686183</span>
}</code></pre>
<h4 id="autoid-2-6-1"><a name="t51"></a>7.2 接收个人语音</h4>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>from</td>
<td>发送者用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>to</td>
<td>接受者用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>content</td>
<td>内容</td>
<td>string</td>
<td>必填</td>
<td>Json</td>
</tr>
<tr class="even">
<td>clientMsgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>客户端本地时间戳</td>
</tr>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必填</td>
<td>Audio</td>
</tr>
<tr class="even">
<td>info</td>
<td>扩展字段</td>
<td>string</td>
<td>选填</td>
<td>发送人的nickName</td>
</tr>
<tr class="odd">
<td>msgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>服务端消息id</td>
</tr>
</tbody>
</table>
<p><strong>Output</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"from"</span>: <span class="hljs-string">"bell"</span>,
  <span class="hljs-attr">"to"</span>: <span class="hljs-string">"mark"</span>,
  <span class="hljs-attr">"content"</span>: <span class="hljs-string">"{\"fileUrl\":\"/attachment/20150430/guid.amr\",\"audioLength\":3}"</span>,
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Audio"</span>,
  <span class="hljs-attr">"createDate"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"info"</span>: <span class="hljs-string">"{\"nickName\":\"贝尔\"}"</span>
}</code></pre>
<h4 id="autoid-2-6-2"><a name="t52"></a>7.3 接收个人图片<code>client</code></h4>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>from</td>
<td>发送者用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>to</td>
<td>接受者用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>content</td>
<td>内容</td>
<td>string</td>
<td>必填</td>
<td>Json</td>
</tr>
<tr class="even">
<td>clientMsgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>客户端本地时间戳</td>
</tr>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必填</td>
<td>Image</td>
</tr>
<tr class="even">
<td>info</td>
<td>扩展字段</td>
<td>string</td>
<td>选填</td>
<td>发送人的nickName</td>
</tr>
<tr class="odd">
<td>msgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>服务端消息id</td>
</tr>
</tbody>
</table>
<p><strong>Output</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"from"</span>: <span class="hljs-string">"bell"</span>,
  <span class="hljs-attr">"to"</span>: <span class="hljs-string">"mark"</span>,
  <span class="hljs-attr">"content"</span>: <span class="hljs-string">"{\"fileName:\"emoji.jpg\",\"fileSize\":95709,\"thumbnail\":\"/attachment/20150430/guid.jpg\",\"fileUrl\":\"/attachment/20150430/guid.jpg\"}"</span>,
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Image"</span>,
  <span class="hljs-attr">"createDate"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"MsgId"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"info"</span>: <span class="hljs-string">"{\"nickName\":\"贝尔\"}"</span>
}</code></pre>
<h4 id="autoid-2-6-3"><a name="t53"></a>7.4 系统提醒消息</h4>
<p><strong>场景</strong></p>
<p>显示为黑色的提醒框，'跟xx加入群聊'显示的效果一样</p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>from</td>
<td>发送者用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>to</td>
<td>接受者用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>content</td>
<td>内容</td>
<td>string</td>
<td>必填</td>
<td>Json</td>
</tr>
<tr class="even">
<td>clientMsgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>客户端本地时间戳</td>
</tr>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必填</td>
<td>Alert</td>
</tr>
<tr class="even">
<td>info</td>
<td>扩展字段</td>
<td>string</td>
<td>选填</td>
<td>发送人的nickName</td>
</tr>
<tr class="odd">
<td>msgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>服务端消息id</td>
</tr>
</tbody>
</table>
<p><strong>Output</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"from"</span>: <span class="hljs-string">"bell"</span>,
  <span class="hljs-attr">"to"</span>: <span class="hljs-string">"mark"</span>,
  <span class="hljs-attr">"content"</span>: <span class="hljs-string">"亲，本医生还提供其他服务"</span>,
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Alert"</span>,
  <span class="hljs-attr">"createDate"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"modified"</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">"info"</span>: <span class="hljs-string">"{\"nickName\":\"贝尔\"}"</span>
}</code></pre>
<p><strong>备注</strong></p>
<p>客户端收到需要特殊显示（类似xx加入讨论组）</p>
<h4 id="autoid-2-6-4"><a name="t54"></a>7.5 接收视频消息</h4>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>from</td>
<td>发送者用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>to</td>
<td>接受者用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>content</td>
<td>内容</td>
<td>string</td>
<td>必填</td>
<td>Json</td>
</tr>
<tr class="even">
<td>clientMsgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>客户端本地时间戳</td>
</tr>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必填</td>
<td>Video</td>
</tr>
<tr class="even">
<td>info</td>
<td>扩展字段</td>
<td>string</td>
<td>选填</td>
<td>发送人的nickName</td>
</tr>
<tr class="odd">
<td>msgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>服务端消息id</td>
</tr>
</tbody>
</table>
<p><strong>Output</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"from"</span>: <span class="hljs-string">"bell"</span>,
  <span class="hljs-attr">"to"</span>: <span class="hljs-string">"mark"</span>,
   <span class="hljs-attr">"content"</span>: <span class="hljs-string">"{\"fileUrl\":\"/attachment/20150430/guid.mp4\",\"fileSize\":95709,\"videoLength\":12,\"thumbnail\":\"/attachment/20150430/guid.jpg\"}"</span>,
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Video"</span>,
  <span class="hljs-attr">"createDate"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"info"</span>: <span class="hljs-string">"{\"nickName\":\"贝尔\"}"</span>
}</code></pre>
<p><strong>备注</strong></p>
<p>videoLength 视频秒数</p>
<h4 id="autoid-2-6-5"><a name="t55"></a>7.6 接收图文消息</h4>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>from</td>
<td>发送者用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>to</td>
<td>接受者用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>content</td>
<td>内容</td>
<td>string</td>
<td>必填</td>
<td>Json</td>
</tr>
<tr class="even">
<td>clientMsgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>客户端本地时间戳</td>
</tr>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必填</td>
<td>News</td>
</tr>
<tr class="even">
<td>info</td>
<td>扩展字段</td>
<td>string</td>
<td>选填</td>
<td>发送人的nickName</td>
</tr>
<tr class="odd">
<td>msgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>服务端消息id</td>
</tr>
</tbody>
</table>
<p><strong>Output</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"from"</span>: <span class="hljs-string">"bell"</span>,
  <span class="hljs-attr">"to"</span>: <span class="hljs-string">"mark"</span>,
  <span class="hljs-attr">"content"</span> : <span class="hljs-string">"{\"title\":\"Title\",\"description\":\"Description\",\"url\":\"http://www.mintcode.com/\",\"picUrl\":\"http://www.mintcode.com/img/img-bg-index-01.jpg\"}"</span>,
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"News"</span>,
  <span class="hljs-attr">"createDate"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"MsgId"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"info"</span>: <span class="hljs-string">"{\"nickName\":\"贝尔\"}"</span>
}</code></pre>
<h4 id="autoid-2-6-6"><a name="t56"></a>7.7 接收附件消息</h4>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>from</td>
<td>发送者用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>to</td>
<td>接受者用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>content</td>
<td>内容</td>
<td>string</td>
<td>必填</td>
<td>Json</td>
</tr>
<tr class="even">
<td>clientMsgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>客户端本地时间戳</td>
</tr>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必填</td>
<td>File</td>
</tr>
<tr class="even">
<td>info</td>
<td>扩展字段</td>
<td>string</td>
<td>选填</td>
<td>发送人的nickName</td>
</tr>
<tr class="odd">
<td>msgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>服务端消息id</td>
</tr>
</tbody>
</table>
<p><strong>Output</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"from"</span>: <span class="hljs-string">"bell"</span>,
  <span class="hljs-attr">"to"</span>: <span class="hljs-string">"mark"</span>,
   <span class="hljs-attr">"content"</span>: <span class="hljs-string">"{\"fileUrl\":\"/attachment/20150430/guid.mp4\",\"fileSize\":95709\"}"</span>,
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"File"</span>,
  <span class="hljs-attr">"createDate"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"info"</span>: <span class="hljs-string">"{\"nickName\":\"贝尔\"}"</span>
}</code></pre>
<h4 id="autoid-2-6-7"><a name="t57"></a>7.8 消息撤回重发</h4>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>from</td>
<td>发送者用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>to</td>
<td>接受者用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>content</td>
<td>内容</td>
<td>string</td>
<td>必填</td>
<td>Json</td>
</tr>
<tr class="even">
<td>clientMsgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>手机时间</td>
</tr>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必填</td>
<td>ReSend</td>
</tr>
<tr class="even">
<td>info</td>
<td>扩展字段</td>
<td>string</td>
<td>选填</td>
<td>发送人的nickName</td>
</tr>
<tr class="odd">
<td>msgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>服务端消息id</td>
</tr>
</tbody>
</table>
<p><strong>Output</strong></p>
<p>content里面的msgId和clientMsgId都是被替换前的</p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"from"</span>: <span class="hljs-string">"1@ChatRoom"</span>,
  <span class="hljs-attr">"to"</span>: <span class="hljs-string">"bell"</span>,
  <span class="hljs-attr">"content"</span>: <span class="hljs-string">"{\"type\":\"Alert\",\"content\":\"jeffey撤回来了一条消息\",\"msgId\":1402416686183,\"clientMsgId\":1402416686183}"</span>,
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"ReSend"</span>,
  <span class="hljs-attr">"clientMsgId"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"createDate"</span> : <span class="hljs-number">1402416686183</span>,
  <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"modified"</span>:<span class="hljs-number">1422416686183</span>
}</code></pre>
<h4 id="autoid-2-6-8"><a name="t58"></a>7.9 接收实时音频视频消息</h4>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>from</td>
<td>发送者用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>to</td>
<td>接受者用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>content</td>
<td>内容</td>
<td>string</td>
<td>必填</td>
<td>Json</td>
</tr>
<tr class="even">
<td>clientMsgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>客户端本地时间戳</td>
</tr>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必填</td>
<td>File</td>
</tr>
<tr class="even">
<td>info</td>
<td>扩展字段</td>
<td>string</td>
<td>选填</td>
<td>发送人的nickName</td>
</tr>
<tr class="odd">
<td>msgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>服务端消息id</td>
</tr>
</tbody>
</table>
<p><strong>Output</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"from"</span>: <span class="hljs-string">"jeffrey"</span>,
  <span class="hljs-attr">"to"</span>: <span class="hljs-string">"bell"</span>,
  <span class="hljs-attr">"content"</span>: <span class="hljs-string">"{\"videoLength\":0,\"audioLength\":10,\"fromUid\":1001,\"toUid\":1002}"</span>,
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Voip"</span>,
  <span class="hljs-attr">"clientMsgId"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"createDate"</span> : <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"modified"</span>:<span class="hljs-number">0</span>,
  <span class="hljs-attr">"info"</span>:<span class="hljs-string">"{\"nickName\":\"杰佛里\"}"</span>
}</code></pre>
<h3 id="autoid-2-6-9"><a name="t59"></a>8 指令消息订阅类型</h3>
<p><strong>场景</strong></p>
<p>一些特殊操作需要客户端进行处理,,通过<code>消息轮训订阅</code>接口逐条处理</p>
<h4 id="autoid-2-7-0"><a name="t60"></a>8.1 个人消息已读指令</h4>
<p><strong>场景</strong></p>
<p>jeffrey 发消息给bell,bell读了这条指令消息，<br>
jeffrey会收到下面这样的一条指令消息</p>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>from</td>
<td>发送者用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>to</td>
<td>会话用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>content</td>
<td>内容</td>
<td>string</td>
<td>必填</td>
<td>Json name 为命令类型 data为读过的msgId</td>
</tr>
<tr class="even">
<td>clientMsgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>手机时间</td>
</tr>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必填</td>
<td>Video</td>
</tr>
<tr class="even">
<td>msgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>服务器消息id</td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"from"</span>: <span class="hljs-string">"bell"</span>,
  <span class="hljs-attr">"to"</span>: <span class="hljs-string">"jeffrey"</span>,
  <span class="hljs-attr">"content"</span>: <span class="hljs-string">"{\"name\":\"Read\",\"data\":\"1422416686183\"}"</span>,
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Cmd"</span>,
  <span class="hljs-attr">"clientMsgId"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1422416686183</span>
}</code></pre>
<h4 id="autoid-2-7-1"><a name="t61"></a>8.2 群消息已读指令(暂未实现该功能)</h4>
<p><strong>场景</strong></p>
<p>jeffrey 发消息给1@ChatRoom,bell在群里读了这条指令消息，<br>
jeffrey会收到下面这样的一条指令消息</p>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>from</td>
<td>发送者用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>to</td>
<td>会话用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>content</td>
<td>内容</td>
<td>string</td>
<td>必填</td>
<td>Json name 为命令类型 data为读过的msgId</td>
</tr>
<tr class="even">
<td>clientMsgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>手机时间</td>
</tr>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必填</td>
<td>Cmd</td>
</tr>
<tr class="even">
<td>msgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>服务器消息id</td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"from"</span>: <span class="hljs-string">"bell"</span>,
  <span class="hljs-attr">"to"</span>: <span class="hljs-string">"1@ChatRoom"</span>,
  <span class="hljs-attr">"content"</span>: <span class="hljs-string">"{\"name\":\"Read\",\"data\":\"1422416686183\"}"</span>,
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Cmd"</span>,
  <span class="hljs-attr">"clientMsgId"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1422416686183</span>
}</code></pre>
<h4 id="autoid-2-7-2"><a name="t62"></a>8.3 消息标记重点指令</h4>
<p><strong>场景</strong></p>
<p>jeffrey 发消息给1@ChatRoom,bell在群里标记这条消息为重点，<br>
bell会收到下面这样的一条指令消息</p>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>from</td>
<td>发送者用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>to</td>
<td>会话用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>content</td>
<td>内容</td>
<td>string</td>
<td>必填</td>
<td>Json name 为命令类型 data为读过的msgId</td>
</tr>
<tr class="even">
<td>clientMsgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>手机时间</td>
</tr>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必填</td>
<td>Cmd</td>
</tr>
<tr class="even">
<td>msgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>服务器消息id</td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"from"</span>: <span class="hljs-string">"bell"</span>,
  <span class="hljs-attr">"to"</span>: <span class="hljs-string">"1@ChatRoom"</span>,
  <span class="hljs-attr">"content"</span>: <span class="hljs-string">"{\"name\":\"Mark\",\"data\":\"1422416686183\"}"</span>,
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Cmd"</span>,
  <span class="hljs-attr">"clientMsgId"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1422416686183</span>
}</code></pre>
<h4 id="autoid-2-7-3"><a name="t63"></a>8.4 消息取消标记指令(客户端只收不发)<code>client</code></h4>
<p><strong>场景</strong></p>
<p>jeffrey 发消息给1@ChatRoom,bell在群里取消标记这条消息为重点，<br>
bell会收到下面这样的一条指令消息</p>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>from</td>
<td>发送者用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>to</td>
<td>会话用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>content</td>
<td>内容</td>
<td>string</td>
<td>必填</td>
<td>Json name 为命令类型 data为读过的msgId</td>
</tr>
<tr class="even">
<td>clientMsgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>手机时间</td>
</tr>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必填</td>
<td>Cmd</td>
</tr>
<tr class="even">
<td>msgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>服务器消息id</td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"from"</span>: <span class="hljs-string">"bell"</span>,
  <span class="hljs-attr">"to"</span>: <span class="hljs-string">"1@ChatRoom"</span>,
  <span class="hljs-attr">"content"</span>: <span class="hljs-string">"{\"name\":\"CancelMark\",\"data\":\"1422416686183\"}"</span>,
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Cmd"</span>,
  <span class="hljs-attr">"clientMsgId"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1422416686183</span>
}</code></pre>
<h4 id="autoid-2-7-4"><a name="t64"></a>8.5 移除会话框指令</h4>
<p><strong>场景</strong></p>
<p>bell主动退出群1@ChatRoom或删除会话</p>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>from</td>
<td>发送者用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>to</td>
<td>会话用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>content</td>
<td>内容</td>
<td>string</td>
<td>必填</td>
<td>Json name 为命令类型 data为读过的msgId</td>
</tr>
<tr class="even">
<td>clientMsgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>手机时间</td>
</tr>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必填</td>
<td>Cmd</td>
</tr>
<tr class="even">
<td>msgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>服务器消息id</td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"from"</span>: <span class="hljs-string">"bell"</span>,
  <span class="hljs-attr">"to"</span>: <span class="hljs-string">"1@ChatRoom"</span>,
  <span class="hljs-attr">"content"</span>: <span class="hljs-string">"{\"name\":\"Remove\"}"</span>,
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Cmd"</span>,
  <span class="hljs-attr">"clientMsgId"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1422416686183</span>
}</code></pre>
<h4 id="autoid-2-7-5"><a name="t65"></a>8.6 打开会话指令</h4>
<p><strong>场景</strong></p>
<p>jeffrey 发消息给1@ChatRoom,bell打开了这个聊天框，通过http 的api请求readSession 接口后，会收到如下指令<br>
然后 客户端把上面的数字清空</p>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>from</td>
<td>发送者用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>to</td>
<td>会话用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>content</td>
<td>内容</td>
<td>string</td>
<td>必填</td>
<td>Json name 为命令类型 data为读过的msgId</td>
</tr>
<tr class="even">
<td>clientMsgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>手机时间</td>
</tr>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必填</td>
<td>Cmd</td>
</tr>
<tr class="even">
<td>msgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>服务器消息id</td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"from"</span>: <span class="hljs-string">"bell"</span>,
  <span class="hljs-attr">"to"</span>: <span class="hljs-string">"1@ChatRoom"</span>,
  <span class="hljs-attr">"content"</span>: <span class="hljs-string">"{\"name\":\"Open\"}"</span>,
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Cmd"</span>,
  <span class="hljs-attr">"clientMsgId"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1422416686183</span>
}</code></pre>
<h4 id="autoid-2-7-6"><a name="t66"></a>8.7 好友同步指令</h4>
<p><strong>场景</strong></p>
<p>jeffrey 发邀请好友信息给bell，bell通过http 的api处理好友请求接口，同意后，会收到如下指令<br>
当 bell 自己添加分组或者移动好友的时候也会收到如下指令，收到指令后需要重新获取好友列表</p>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>from</td>
<td>发送者用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>to</td>
<td>会话用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>content</td>
<td>内容</td>
<td>string</td>
<td>必填</td>
<td>Json name 为命令类型 data为读过的msgId</td>
</tr>
<tr class="even">
<td>clientMsgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>手机时间</td>
</tr>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必填</td>
<td>Cmd</td>
</tr>
<tr class="even">
<td>msgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>服务器消息id</td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"from"</span>: <span class="hljs-string">"bell"</span>,
  <span class="hljs-attr">"to"</span>: <span class="hljs-string">"bell"</span>,
  <span class="hljs-attr">"content"</span>: <span class="hljs-string">"{\"name\":\"Relation\"}"</span>,
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Cmd"</span>,
  <span class="hljs-attr">"clientMsgId"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1422416686183</span>
}</code></pre>
<h4 id="autoid-2-7-7"><a name="t67"></a>8.8 会话更新指令</h4>
<p><strong>场景</strong></p>
<p>jeffrey 把bell通过http 的api添加群成员请求接口，且alertNotece参数设置为false,<br>
此时bell会如下指令，收到指令后需要把会话显示出来</p>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>from</td>
<td>发送者用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>to</td>
<td>会话用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>content</td>
<td>内容</td>
<td>string</td>
<td>必填</td>
<td>name 为命令类型,还包括extension扩展字段,stick置顶,muteNotification屏蔽</td>
</tr>
<tr class="even">
<td>clientMsgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>手机时间</td>
</tr>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必填</td>
<td>Cmd</td>
</tr>
<tr class="even">
<td>msgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>服务器消息id</td>
</tr>
<tr class="odd">
<td>modified</td>
<td>会话更新时间戳</td>
<td>long 必填</td>
<td></td>
</tr>
<tr class="even">
<td>info</td>
<td>会话基本信息</td>
<td>String</td>
<td>包括SessionName 和 Tag</td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"from"</span>: <span class="hljs-string">"bell"</span>,
  <span class="hljs-attr">"to"</span>: <span class="hljs-string">"220@SuperGroup"</span>,
  <span class="hljs-attr">"content"</span>: <span class="hljs-string">"{\"name\":\"Modified\"，\"extension\":\"\"，\"stick\":\"0\",\"muteNotification\":\"1\"}"</span>,  
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Cmd"</span>,
  <span class="hljs-attr">"clientMsgId"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1422416686183</span>，
  <span class="hljs-string">"info"</span>:<span class="hljs-string">"{\"sessionName\":\"工作群\",\"tag\":\"标签\"}”
 }</span></code></pre>
<h4 id="autoid-2-7-8"><a name="t68"></a>8.9 会话角标批量清零指令</h4>
<p><strong>场景</strong></p>
<p>批量清空角标</p>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>from</td>
<td>发送者用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>to</td>
<td>会话用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>content</td>
<td>内容</td>
<td>string</td>
<td>必填</td>
<td>Json name 为命令类型 data为读过的msgId</td>
</tr>
<tr class="even">
<td>clientMsgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>手机时间</td>
</tr>
<tr class="odd">
<td>type</td>
<td>消息类型</td>
<td>string</td>
<td>必填</td>
<td>Cmd</td>
</tr>
<tr class="even">
<td>msgId</td>
<td>消息Id</td>
<td>long</td>
<td>必填</td>
<td>服务器消息id</td>
</tr>
</tbody>
</table>
<p><strong>普通按照会话模式</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"from"</span>: <span class="hljs-string">"bell"</span>,
  <span class="hljs-attr">"to"</span>: <span class="hljs-string">"bell"</span>,
  <span class="hljs-attr">"content"</span>: <span class="hljs-string">"{\"name\":\"MultiOpen\",\"data\":[\"mark\",\"22@ChatRoom\"]}"</span>,
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Cmd"</span>,
  <span class="hljs-attr">"clientMsgId"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1422416686183</span>
}</code></pre>
<p><strong>按照tag模式</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"from"</span>: <span class="hljs-string">"bell"</span>,
  <span class="hljs-attr">"to"</span>: <span class="hljs-string">"bell"</span>,
  <span class="hljs-attr">"content"</span>: <span class="hljs-string">"{\"name\":\"MultiOpen\"]}"</span>,
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Cmd"</span>,
  <span class="hljs-attr">"clientMsgId"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1422416686183</span>,
  <span class="hljs-attr">"info"</span>:<span class="hljs-string">"{\"tag\":\"标签\"}”
}</span></code></pre>
<h3 id="autoid-2-7-9"><a name="t69"></a>9. 好友及分组接口</h3>
<h4 id="autoid-2-8-0"><a name="t70"></a>9.1 创建分组</h4>
<p><strong>Action</strong> <code>createRelationGroup</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>relationGroupName</td>
<td>群组名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"Wr7qq8XOR7cQXpbW"</span>,
  <span class="hljs-attr">"relationGroupName"</span>: <span class="hljs-string">"我的好友"</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>unreadsession</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
    <span class="hljs-attr">"action"</span>: <span class="hljs-string">"createRelationGroup"</span>,
    <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
     <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>,
     <span class="hljs-attr">"data"</span>: {
            <span class="hljs-attr">"relationGroupName"</span>: <span class="hljs-string">"我的好友22"</span>,
            <span class="hljs-attr">"relationGroupId"</span>: <span class="hljs-number">206</span>   }
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"createRelationGroup"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-8-1"><a name="t71"></a>9.2 修改好友分组</h4>
<p><strong>Action</strong> <code>modifyRelationGroup</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>relationGroupName</td>
<td>修改后的分组名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>relationGroupId</td>
<td>分组id</td>
<td>long</td>
<td>必填</td>
<td></td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"ZBAYNbRqYAUBbjDE6"</span>,
  <span class="hljs-attr">"relationGroupName"</span>:<span class="hljs-string">"我的好友1"</span>,
  <span class="hljs-attr">"relationGroupId"</span>:<span class="hljs-number">5</span>

}
</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>readsession</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{

  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"modifyRelationGroup"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"modifyRelationGroup"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-8-2"><a name="t72"></a>9.3 删除好友分组</h4>
<p><strong>Action</strong> <code>deleteRelationGroup</code></p>
<p><strong>场景</strong><br>
默认分组删除会失败</p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>relationGroupId</td>
<td>主键</td>
<td>long</td>
<td>必填</td>
<td></td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"ZBAYNbRqYAUBbjDE6"</span>,
  <span class="hljs-attr">"relationGroupId"</span>:<span class="hljs-number">5</span>

}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>subscribemessage</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{

  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"deleteRelationGroup"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"deleteRelationGroup"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-8-3"><a name="t73"></a>9.4 获取分组列表</h4>
<p><strong>Action</strong> <code>relationGroupList</code></p>
<p><strong>场景</strong></p>
<p>每个账号有个默认分组在,即使没创建也会存在</p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>apptoken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td>app密钥</td>
</tr>
<tr class="odd">
<td>userName</td>
<td>账号</td>
<td>string</td>
<td>必填</td>
<td>发送者账号</td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>
}</code></pre>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
    <span class="hljs-attr">"action"</span>: <span class="hljs-string">"sendmsg"</span>,
    <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
    <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>,
    data<span class="hljs-attr">": [
      {
   "</span>relationGroupId<span class="hljs-attr">": 1,
   "</span>appName<span class="hljs-attr">": "</span>launchr<span class="hljs-attr">",
   "</span>userName<span class="hljs-attr">": "</span>ZBAYNbRqYAUBbjDE6<span class="hljs-attr">",
   "</span>relationGroupName<span class="hljs-attr">": "</span>我的好友<span class="hljs-attr">",
   "</span>createDate<span class="hljs-attr">": 1448591332149
     },
   {
    "</span>relationGroupId<span class="hljs-attr">": 2,
    "</span>appName<span class="hljs-attr">": "</span>launchr<span class="hljs-attr">",
    "</span>userName<span class="hljs-attr">": "</span>ZBAYNbRqYAUBbjDE6<span class="hljs-attr">",
    "</span>relationGroupName<span class="hljs-attr">": "</span>我的好友<span class="hljs-attr">",
   "</span>createDate<span class="hljs-attr">": 1448591378987
   }]</span></code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{

   <span class="hljs-attr">"action"</span>: <span class="hljs-string">"relationGroupList"</span>,
   <span class="hljs-attr">"code"</span>: <span class="hljs-number">6002</span>,
   <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>

}</code></pre>
<h4 id="autoid-2-8-4"><a name="t74"></a>9.5 获取好友列表</h4>
<p><strong>Action</strong> <code>relationGroupInfoList</code></p>
<p><strong>场景</strong></p>
<p>全量获取好友列表，网页第一次加载需要缓存在本地，后面<code>订阅消息</code>收到的好友同步指令后，可通过增量来获取</p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"ZBAYNbRqYAUBbjDE6"</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>historymessage</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>data</td>
<td>消息list</td>
<td>list&lt;relation&gt;</td>
<td>选填</td>
<td>token验证无效就不返回</td>
</tr>
</tbody>
</table>
<p><strong>relation</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>RelationGroupId</td>
<td>分组id</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>RelationName</td>
<td>好友用户名</td>
<td>否</td>
<td>用户UID</td>
</tr>
<tr class="odd">
<td>Remark</td>
<td>好友备注名</td>
<td>string</td>
<td>否</td>
<td></td>
</tr>
<tr class="even">
<td>Tag</td>
<td>好友标签</td>
<td>string</td>
<td>否</td>
<td>这个是好友的tag 不是user的tag</td>
</tr>
<tr class="odd">
<td>NickName</td>
<td>好友昵称</td>
<td>string</td>
<td>否</td>
<td>按照这个倒序排列</td>
</tr>
<tr class="even">
<td>relationAvatar</td>
<td>好友头像</td>
<td>string</td>
<td>否</td>
<td>profile</td>
</tr>
<tr class="odd">
<td>relationModified</td>
<td>用户更新时间戳</td>
<td>long</td>
<td>选填</td>
<td>更新时间戳</td>
</tr>
<tr class="even">
<td>mobile</td>
<td>手机号</td>
<td>string</td>
<td>选填</td>
<td></td>
</tr>
<tr class="odd">
<td>imNumber</td>
<td>im号</td>
<td>string</td>
<td>选填</td>
<td></td>
</tr>
<tr class="even">
<td>extension</td>
<td>扩展字段</td>
<td>string</td>
<td>选填</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
   <span class="hljs-attr">"data"</span>: 
  [
      {
         <span class="hljs-attr">"relationGroupId"</span>: <span class="hljs-string">"1"</span>,
         <span class="hljs-attr">"relationGroupName"</span>: <span class="hljs-string">"我的好友"</span>,
         <span class="hljs-attr">"relationList"</span>: [
           {
             <span class="hljs-attr">"id"</span>: <span class="hljs-number">433456546</span>,
             <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
             <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"l63XDevNRbhneeGo"</span>,
             <span class="hljs-attr">"relationName"</span>: <span class="hljs-string">"6lOd0L20RdFad8LL"</span>,
             <span class="hljs-attr">"remark"</span>: <span class="hljs-string">"林"</span>,
             <span class="hljs-attr">"tag"</span>: <span class="hljs-literal">null</span>,
             <span class="hljs-attr">"relationGroupId"</span>: <span class="hljs-number">637</span>,
             <span class="hljs-attr">"createDate"</span>: <span class="hljs-number">1459147819075</span>,
             <span class="hljs-attr">"isPass"</span>: <span class="hljs-literal">null</span>,
             <span class="hljs-attr">"nickName"</span>: <span class="hljs-string">"bryan"</span>,
             <span class="hljs-attr">"relationAvatar"</span>: <span class="hljs-literal">null</span>,
             <span class="hljs-attr">"relationModified"</span>: <span class="hljs-number">1456998719997</span>,
             <span class="hljs-attr">"mobile"</span>: <span class="hljs-string">""</span>,
             <span class="hljs-attr">"imNumber"</span>: <span class="hljs-string">"1111211"</span>，
             <span class="hljs-string">"extension"</span>:<span class="hljs-string">"\"position\":\"主治医生\""</span>
            }
          ]
      }
  ]
  <span class="hljs-string">"action"</span>: <span class="hljs-string">"relationGroupInfoList"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"relationGroupInfoList"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-8-5"><a name="t75"></a>9.6 邀请好友</h4>
<p><strong>Action</strong> <code>addRelationValidate</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>apptoken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td>app密钥</td>
</tr>
<tr class="odd">
<td>userName</td>
<td>账号</td>
<td>string</td>
<td>必填</td>
<td>用户名</td>
</tr>
<tr class="even">
<td>from</td>
<td>邀请者</td>
<td>string</td>
<td>必填</td>
<td>*from代表邀请人，to为被邀请人。原则是要求userName和from一样。</td>
</tr>
<tr class="odd">
<td>to</td>
<td>被邀请者</td>
<td>string</td>
<td>必填</td>
<td>用户uid</td>
</tr>
<tr class="even">
<td>remark</td>
<td>备注</td>
<td>string</td>
<td>必填</td>
<td>好友备注</td>
</tr>
<tr class="odd">
<td>content</td>
<td>验证信息</td>
<td>string</td>
<td>必填</td>
<td>发送验证信息</td>
</tr>
<tr class="even">
<td>relationGroupId</td>
<td>分组id</td>
<td>long</td>
<td>必填</td>
<td></td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bell"</span>,
  <span class="hljs-attr">"from"</span>:<span class="hljs-string">"bell"</span>,
  <span class="hljs-attr">"to"</span>:<span class="hljs-string">"mark"</span>,
  <span class="hljs-attr">"content"</span>:<span class="hljs-string">""</span>,
  <span class="hljs-attr">"relationGroupId"</span>:<span class="hljs-number">11</span>,
  <span class="hljs-attr">"remark"</span>:<span class="hljs-string">"马克"</span>
}</code></pre>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
    <span class="hljs-attr">"action"</span>: <span class="hljs-string">"addRelationValidate"</span>,
    <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
    <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{

   <span class="hljs-attr">"action"</span>: <span class="hljs-string">"addRelationValidate"</span>,
   <span class="hljs-attr">"code"</span>: <span class="hljs-number">6002</span>,
   <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>

}</code></pre>
<h4 id="autoid-2-8-6"><a name="t76"></a>9.7 处理好友请求</h4>
<p><strong>Action</strong> <code>disposeRelationValidate</code></p>
<p><strong>场景</strong><br>
处理好友请求，同意后双发会建立会话，提示已经加为好友，如果拒绝或忽略，对方不会收到任何消息。</p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>apptoken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td>app密钥</td>
</tr>
<tr class="odd">
<td>userName</td>
<td>账号</td>
<td>string</td>
<td>必填</td>
<td>用户名</td>
</tr>
</tbody>
</table>
<p>from | 发送者账号 | string | 必填 | 邀请人</p>
<p>to | 被邀请者账号 | string | 必填 | *from代表邀请人，to为被邀请人。原则是要求userName和to一样。<br>
remark | 备注 | string | 必填 | 用户备注<br>
content | 验证内容 | string | 必填 | 拒绝的时候需要填内容<br>
ValidateState | 处理状态 | int | 必填 | 2:同意 3:拒绝 4:忽略<br>
relationGroupId | 好友分组id | long | 选填 | 只有选择同意的时候需要填写</p>
<p><strong>同意</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"mark"</span>,
  <span class="hljs-attr">"from"</span>:<span class="hljs-string">"bell"</span>,
  <span class="hljs-attr">"to"</span>:<span class="hljs-string">"mark"</span>,
  <span class="hljs-attr">"remark"</span>:<span class="hljs-string">"贝尔"</span>,
  <span class="hljs-attr">"content"</span>:<span class="hljs-string">""</span>,
  <span class="hljs-attr">"validateState"</span>:<span class="hljs-number">2</span>
  <span class="hljs-string">"relationGroupId"</span>:<span class="hljs-number">14</span>
}</code></pre>
<p><strong>拒绝</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"mark"</span>,
  <span class="hljs-attr">"from"</span>:<span class="hljs-string">"bell"</span>,
  <span class="hljs-attr">"to"</span>:<span class="hljs-string">"mark"</span>,
  <span class="hljs-attr">"remark"</span>:<span class="hljs-string">""</span>,
  <span class="hljs-attr">"content"</span>:<span class="hljs-string">"不同意"</span>,
  <span class="hljs-attr">"validateState"</span>:<span class="hljs-number">3</span>
}</code></pre>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
    <span class="hljs-attr">"action"</span>: <span class="hljs-string">"disposeRelationValidate"</span>,
    <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
    <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{

   <span class="hljs-attr">"action"</span>: <span class="hljs-string">"disposeRelationValidate"</span>,
   <span class="hljs-attr">"code"</span>: <span class="hljs-number">4012</span>,
   <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>

}</code></pre>
<h4 id="autoid-2-8-7"><a name="t77"></a>9.8 删除好友</h4>
<p><strong>Action</strong> <code>deleteRelation</code></p>
<p><strong>场景</strong></p>
<p>删除后好友列表和会话都会消息,聊天记录还在。</p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>to</td>
<td>好友用户名</td>
<td>string</td>
<td>必填</td>
<td>用户Uid</td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"mark"</span>,
  <span class="hljs-attr">"to"</span>:<span class="hljs-string">"bell"</span>
}
</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>removeSession</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p>0</p>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{

  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"removeSession"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"removeSession"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-8-8"><a name="t78"></a>9.9 获取好友验证列表</h4>
<p><strong>Action</strong> <code>relationValidateList</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>limit</td>
<td>返回总数</td>
<td>long</td>
<td>选填</td>
<td>默认值是10 最大100</td>
</tr>
<tr class="odd">
<td>startTimestamp</td>
<td>开始时间戳</td>
<td>long</td>
<td>必填</td>
<td>大于等于这个时间戳 （开始结束二选一）</td>
</tr>
<tr class="even">
<td>endTimestamp</td>
<td>结束时间戳</td>
<td>long</td>
<td>必填</td>
<td>小于等于这个时间戳,当为-1的时候获取当前时间戳 （开始结束二选一）</td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
    <span class="hljs-attr">"appName"</span> : <span class="hljs-string">"launchr"</span>,
    <span class="hljs-attr">"appToken"</span> : <span class="hljs-string">"verify-code"</span>,
    <span class="hljs-attr">"userName"</span> : <span class="hljs-string">"bellliu"</span> ，
    <span class="hljs-string">"limit"</span> : <span class="hljs-number">10</span>,
    <span class="hljs-attr">"startTimestamp"</span> : <span class="hljs-number">1431337458667</span>,
    <span class="hljs-attr">"endTimestamp"</span> : <span class="hljs-number">1431337458667</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>removeSession</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>date</td>
<td>好友验证列表</td>
<td>list&lt;relationvalid&gt;</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>relationvalid</strong></p>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{

  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"Relations"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>,
  <span class="hljs-attr">"data"</span>: [
      {
        <span class="hljs-attr">"id"</span>: <span class="hljs-number">297</span>,
        <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
        <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"xRGqEydzELHrBkW2"</span>,
        <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1458798439736</span>,
        <span class="hljs-attr">"from"</span>: <span class="hljs-string">"xRGqEydzELHrBkW2"</span>,
        <span class="hljs-attr">"fromNickName"</span>: <span class="hljs-string">"larrya"</span>,
        <span class="hljs-attr">"fromAvatar"</span>: <span class="hljs-string">""</span>,
        <span class="hljs-attr">"to"</span>: <span class="hljs-string">"l63XDevNRbhneeGo"</span>,
        <span class="hljs-attr">"content"</span>: <span class="hljs-string">"加我。。。"</span>,
        <span class="hljs-attr">"createDate"</span>: <span class="hljs-number">1458798439736</span>,
        <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1458798445037</span>,
        <span class="hljs-attr">"validateState"</span>: <span class="hljs-number">1</span>
      }
  ]
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"Relations"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-8-9"><a name="t79"></a>9.10 添加单向好友类似收藏功能</h4>
<p><strong>Action</strong> <code>addRelation</code></p>
<p><strong>备注</strong><br>
另一个流程，就是不需要添加好友验证，部分项目需要用到，如果用了双向好友，可以忽略这个接口</p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>apptoken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td>临时密钥</td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>to</td>
<td>用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>remark</td>
<td>备注</td>
<td>string</td>
<td>选填</td>
</tr>
<tr class="even">
<td>relationGroupId</td>
<td>分组</td>
<td>long</td>
<td>必填</td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"ZBAYNbRqYAUBbjDE4"</span>,
  <span class="hljs-attr">"to"</span>: <span class="hljs-string">"NDOaqxpE9mT5a5xZ"</span>,
  <span class="hljs-attr">"remark"</span>:<span class="hljs-string">"备注"</span>,
  <span class="hljs-attr">"relationGroupId"</span>:<span class="hljs-number">13</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>token-login</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td>[状态码][]</td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>data</td>
<td>返回数据</td>
<td>Object</td>
<td>必要</td>
<td>返回消息</td>
</tr>
</tbody>
</table>
<p><strong>Object</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>modified</td>
<td>用户最后更新时间</td>
<td>long</td>
<td>选填</td>
<td>如果用户存在则返回</td>
</tr>
<tr class="even">
<td>nickName</td>
<td>昵称</td>
<td>string</td>
<td>选填</td>
<td>如果用户存在则返回</td>
</tr>
<tr class="odd">
<td>avatar</td>
<td>头像</td>
<td>string</td>
<td>选填</td>
<td>如果用户存在则返回</td>
</tr>
<tr class="even">
<td>type</td>
<td>用户类型</td>
<td>string</td>
<td>选填</td>
<td>如 con 如果用户存在则返回</td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户名</td>
<td>string</td>
<td>选填</td>
<td>如果用户存在则返回</td>
</tr>
<tr class="even">
<td>memberList</td>
<td>成员列表</td>
<td>List&lt;Object&gt;</td>
<td>选填</td>
<td>如果是群返回成员列表</td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
   <span class="hljs-attr">"action"</span>: <span class="hljs-string">"addRelation"</span>,
   <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
   <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"addRelation"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">4001</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">"此会话用户不存在"</span>
}</code></pre>
<h4 id="autoid-2-8-10"><a name="t80"></a>9.11 移动好友分组</h4>
<p><strong>场景</strong></p>
<p>改变好友所在的分组,如果分组id填错，会移动到默认分组里</p>
<p><strong>Action</strong> <code>transferRelation</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>relationName</td>
<td>好友用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>relationGroupId</td>
<td>好友分组id</td>
<td>long</td>
<td>必填</td>
<td></td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>,
  <span class="hljs-attr">"relationName"</span>:<span class="hljs-string">"mark"</span>,
  <span class="hljs-attr">"relationGroupId"</span>:<span class="hljs-number">13</span>
}
</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>removeSession</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>date</td>
<td>好友验证列表</td>
<td>list&lt;relationvalid&gt;</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>relationvalid</strong></p>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{

  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"transferRelation"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"transferRelation"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-8-11"><a name="t81"></a>9.12 好友备注</h4>
<p><strong>注意</strong><br>
请求方法为表单提交</p>
<p><strong>Action</strong> <code>remarkRelation</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>relationName</td>
<td>好友用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>remark</td>
<td>备注</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>,
  <span class="hljs-attr">"relationName"</span>:<span class="hljs-string">"mark"</span>,
  <span class="hljs-attr">"remark"</span>:<span class="hljs-string">"备注"</span>
}
</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>removeSession</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>date</td>
<td>好友验证列表</td>
<td>list&lt;relationvalid&gt;</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>relationvalid</strong></p>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{

  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"remarkRelation"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"remarkRelation"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-8-12"><a name="t82"></a>9.13 搜索好友列表</h4>
<p><strong>Action</strong> <code>searchUserName</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>relationUserName</td>
<td>好友用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>,
  <span class="hljs-attr">"relationUserName"</span>:<span class="hljs-string">"mark"</span>
}
</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>removeSession</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>date</td>
<td>好友验证列表</td>
<td>list&lt;relationvalid&gt;</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>relationvalid</strong></p>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"searchUserName"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>,
  <span class="hljs-attr">"data"</span>: [
    {
      <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"stats"</span>,
      <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"laoda"</span>,
      <span class="hljs-attr">"nickName"</span>: <span class="hljs-string">"老大"</span>,
      <span class="hljs-attr">"relationId"</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">"remark"</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">"relation"</span>: <span class="hljs-literal">false</span>
    },
    {
      <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"stats"</span>,
      <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"test11"</span>,
      <span class="hljs-attr">"nickName"</span>: <span class="hljs-string">"测试"</span>,
      <span class="hljs-attr">"relationId"</span>: <span class="hljs-number">92</span>,
      <span class="hljs-attr">"remark"</span>: <span class="hljs-string">"laoda"</span>,
      <span class="hljs-attr">"relation"</span>: <span class="hljs-literal">true</span>
    }
  ]
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"searchUserName"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-8-13"><a name="t83"></a>9.14 增量好友及分组</h4>
<p><strong>Action</strong> <code>loadRelationGroupInfo</code></p>
<p><strong>场景</strong></p>
<p>当网页<code>订阅消息</code>收到好友同步指令时，需要调用这个接口。</p>
<p><strong>注意</strong></p>
<p>初次调用msgId传0，然后把返回的modify作为下次增量的msgId。</p>
<p>增量同步顺序为：先执行remove,然后执行添加。</p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>msgId</td>
<td>时间戳消息id</td>
<td>long</td>
<td>选填</td>
<td>大于该时间戳</td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>:<span class="hljs-string">"l63XDevNRbhneeGo"</span>,
  <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">0</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>historymessage</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>data</td>
<td>好友数据</td>
<td>object</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>modify</td>
<td>调用时服务器时间戳</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>totalFlag</td>
<td>全量标识</td>
<td>boolean</td>
<td>必要</td>
<td>false:增量，true：全量</td>
</tr>
</tbody>
</table>
<p><strong>relationlist</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>relations</td>
<td>添加好友</td>
<td>list&lt;relation&gt;</td>
<td>是</td>
<td></td>
</tr>
<tr class="even">
<td>removeRelations</td>
<td>删除好友</td>
<td>list&lt;string&gt;</td>
<td>是</td>
<td></td>
</tr>
<tr class="odd">
<td>relaitonGroups</td>
<td>好友分组</td>
<td>list&lt;relationgroup&gt;</td>
<td>是</td>
<td></td>
</tr>
<tr class="even">
<td>removeRelationGroups</td>
<td>删除分组</td>
<td>list&lt;long&gt;</td>
<td>是</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>relation</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>userName</td>
<td>好友用户名</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>remark</td>
<td>好友备注名</td>
<td>long</td>
<td>否</td>
<td></td>
</tr>
<tr class="even">
<td>tag</td>
<td>好友标签</td>
<td>long</td>
<td>否</td>
<td></td>
</tr>
<tr class="odd">
<td>nickName</td>
<td>好友昵称</td>
<td>long</td>
<td>否</td>
<td>按照这个倒序排列</td>
</tr>
<tr class="even">
<td>avatar</td>
<td>好友头像</td>
<td>string</td>
<td>否</td>
<td>profile</td>
</tr>
<tr class="odd">
<td>relationGroupId</td>
<td>分组id</td>
<td>long</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>modified</td>
<td>用户时间戳</td>
<td>long</td>
<td>必填</td>
<td>更新时间戳</td>
</tr>
<tr class="odd">
<td>mobile</td>
<td>手机号</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>imNumber</td>
<td>im号</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>relationgroup</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>relationGroupId</td>
<td>分组id</td>
<td>long</td>
<td>必要</td>
<td>用户UID</td>
</tr>
<tr class="even">
<td>relationGroupName</td>
<td>分组名称</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>defaultNameFlag</td>
<td>好友分组标志位</td>
<td>string</td>
<td>必要</td>
<td>0：普遍好友分组；1：默认我的好友分组 ; 2 : 黑名单分组</td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
   <span class="hljs-attr">"data"</span>: 
       {
        <span class="hljs-attr">"relations"</span> [
           {
               <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
               <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"O8ARkepaJ0Fqxm7m"</span>,
               <span class="hljs-attr">"nickName"</span>: <span class="hljs-string">"boydxu"</span>,
               <span class="hljs-attr">"remark"</span>: <span class="hljs-string">"老林"</span>,
               <span class="hljs-attr">"tag"</span>: <span class="hljs-literal">null</span>,
               <span class="hljs-attr">"avatar"</span>: <span class="hljs-literal">null</span>,
               <span class="hljs-attr">"relationGroupId"</span>: <span class="hljs-number">637</span>,
               <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1458790896000</span>,
               <span class="hljs-attr">"mobile"</span>: <span class="hljs-string">"123123"</span>,
               <span class="hljs-attr">"imNumber"</span>: <span class="hljs-string">"28435969"</span>
             }
          ],
       <span class="hljs-attr">"removeRelations"</span>:[<span class="hljs-string">"ZBAYNbRqYAUBbjDE6"</span>],
        <span class="hljs-attr">"relationGroups"</span>:[  
          {
             <span class="hljs-attr">"relationGroupId"</span>: <span class="hljs-number">1</span>,
             <span class="hljs-attr">"relationGroupName"</span>: <span class="hljs-string">"我的好友"</span>,
             <span class="hljs-attr">"defaultNameFlag"</span>: <span class="hljs-string">"1"</span>         
          }
        ],
       <span class="hljs-attr">"removeRelationGroups"</span>:[<span class="hljs-number">1056</span>,<span class="hljs-number">1057</span>]
  ]
  <span class="hljs-string">"action"</span>: <span class="hljs-string">"loadRelationGroupInfo"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>,
  <span class="hljs-attr">"totalFlag"</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">"modify"</span>: <span class="hljs-number">1465713247092</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"loadRelationGroupInfo"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-8-14"><a name="t84"></a>9.15 精确搜索用户</h4>
<p><strong>Action</strong> <code>searchRelationUser</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>relationValue</td>
<td>查询值</td>
<td>string</td>
<td>必填</td>
<td>好友用户名或者手机号或者imNumber</td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>,
  <span class="hljs-attr">"relationValue"</span>:<span class="hljs-string">"15866666666"</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>removeSession</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>date</td>
<td>好友验证列表</td>
<td>list&lt;relationvalid&gt;</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>relationvalid</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>userName</td>
<td>好友用户名</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>nickName</td>
<td>好友昵称</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>imNumber</td>
<td>im号码</td>
<td>string</td>
<td>非必填</td>
<td></td>
</tr>
<tr class="odd">
<td>relationId</td>
<td>好友id</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>remark</td>
<td>好友备注</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>mobile</td>
<td>手机号码</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>avatar</td>
<td>头像</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>relation</td>
<td>是否是好友</td>
<td>boolean</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>tag</td>
<td>标签</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>extension</td>
<td>扩展字段</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"searchRelationUser"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>,
  <span class="hljs-attr">"data"</span>: [
    {
      <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
      <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"laoda"</span>,
      <span class="hljs-attr">"imNumber"</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">"nickName"</span>: <span class="hljs-string">"老大"</span>,
      <span class="hljs-attr">"relationId"</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">"remark"</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">"mobile"</span>: <span class="hljs-number">15866666666</span>,
      <span class="hljs-attr">"avatar"</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">"relation"</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">"tag"</span>:<span class="hljs-literal">null</span>,
      <span class="hljs-attr">"extension"</span>:<span class="hljs-literal">null</span>
    },
    {
      <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
      <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"test11"</span>,
      <span class="hljs-attr">"imNumber"</span>: <span class="hljs-string">"15866666666"</span>,
      <span class="hljs-attr">"nickName"</span>: <span class="hljs-string">"测试"</span>,
      <span class="hljs-attr">"relationId"</span>: <span class="hljs-number">92</span>,
      <span class="hljs-attr">"remark"</span>: <span class="hljs-string">"laoda"</span>,
      <span class="hljs-attr">"mobile"</span>: <span class="hljs-number">15525111</span>,
      <span class="hljs-attr">"avatar"</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">"relation"</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">"tag"</span>:<span class="hljs-literal">null</span>,
      <span class="hljs-attr">"extension"</span>:<span class="hljs-literal">null</span>
    }
  ]
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"searchRelationUser"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-8-15"><a name="t85"></a>9.16 模糊搜索好友</h4>
<p><strong>通过nickName,remark来搜索好友</strong></p>
<p><strong>Action</strong> <code>searchRelation</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>token值</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>relationValue</td>
<td>搜索词</td>
<td>string</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>limit</td>
<td>返回总数</td>
<td>long</td>
<td>选填</td>
<td>默认值是10 最大100</td>
</tr>
<tr class="even">
<td>startTimestamp</td>
<td>开始时间戳</td>
<td>long</td>
<td>选填</td>
<td>大于等于这个时间戳 （开始结束二选一）</td>
</tr>
<tr class="odd">
<td>endTimestamp</td>
<td>结束时间戳</td>
<td>long</td>
<td>选填</td>
<td>小于等于这个时间戳,当为-1的时候获取当前时间戳 （开始结束二选一）</td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
    <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
    <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
    <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"bellliu"</span>,
    <span class="hljs-attr">"relationValue"</span>:<span class="hljs-string">"mark"</span>,
    <span class="hljs-attr">"limit"</span> : <span class="hljs-number">10</span>,
    <span class="hljs-attr">"startTimestamp"</span> : <span class="hljs-number">1431337458667</span>,
    <span class="hljs-attr">"endTimestamp"</span> : <span class="hljs-number">1431337458667</span>
}
</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>string</td>
<td>必要</td>
<td>removeSession</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>date</td>
<td>好友验证列表</td>
<td>list&lt;relation&gt;</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>relation</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>userName</td>
<td>好友用户名</td>
<td>int</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>nickName</td>
<td>好友昵称</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>mobile</td>
<td>手机号</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>avatar</td>
<td>头像</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>relationId</td>
<td>好友id</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>remark</td>
<td>好友备注</td>
<td>string</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>createDate</td>
<td>创建时间</td>
<td>long</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"searchRelation"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">"操作成功"</span>,
  <span class="hljs-attr">"data"</span>: [
    {
      <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
      <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"xRGqEydzELHrBkW2"</span>,
      <span class="hljs-attr">"nickName"</span>: <span class="hljs-string">"larry"</span>,
      <span class="hljs-attr">"mobile"</span>: <span class="hljs-string">"18967162080"</span>,
      <span class="hljs-attr">"avatar"</span>: <span class="hljs-string">"/Base-Module/Annex/Avatar?companyCode=mintcode&amp;userName=xRGqEydzELHrBkW2&amp;userTrueName=larry"</span>,
      <span class="hljs-attr">"relationId"</span>: <span class="hljs-number">426</span>,
      <span class="hljs-attr">"remark"</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">"createDate"</span>: <span class="hljs-number">1458788353783</span>
    }
  ]
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"searchRelation"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-8-16"><a name="t86"></a>9.17 黑名单列表</h4>
<p>拉黑后，会收不到来自拉黑用户的消息，群消息还是可以收到的</p>
<pre class="curl"><code class="hljs sql">curl -X POST -H "Accept: application/json" -H "Content-Type: application/json" -H "<span class="hljs-keyword">Cache</span>-Control: <span class="hljs-keyword">no</span>-<span class="hljs-keyword">cache</span><span class="hljs-string">" -H "</span>Postman-Token: <span class="hljs-number">7</span>bb53123-e7dd<span class="hljs-number">-4</span>ff8-ffbf<span class="hljs-number">-8</span>cf22d72daef<span class="hljs-string">" -d '{
  "</span>appName<span class="hljs-string">": "</span>launchr<span class="hljs-string">",
  "</span>appToken<span class="hljs-string">": "</span><span class="hljs-keyword">verify</span>-code<span class="hljs-string">",
  "</span>userName<span class="hljs-string">":"</span>l63XDevNRbhneeGo<span class="hljs-string">"
}' "</span><span class="hljs-keyword">http</span>://<span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.251</span>:<span class="hljs-number">20001</span>//launchr/chat/blackList<span class="hljs-string">"</span></code></pre>
<p><strong>Action</strong> <code>blackList</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>String</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>String</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>String</td>
<td>必填</td>
<td></td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>:<span class="hljs-string">"l63XDevNRbhneeGo"</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>String</td>
<td>必要</td>
<td>remove</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>String</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>data</td>
<td>黑名单列表</td>
<td>object[]</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Object</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>relationGroupId</td>
<td>黑名单用户的id</td>
<td>Integer</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>appName</td>
<td>app名称</td>
<td>String</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户名</td>
<td>String</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>relationName</td>
<td>黑名单好友userName</td>
<td>String</td>
<td>必要</td>
<td></td>
</tr>
<tr class="odd">
<td>remark</td>
<td>黑名单好友备注</td>
<td>String</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>tag</td>
<td>黑名单好友标签</td>
<td>String</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"blackList"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Success"</span>,
  <span class="hljs-attr">"data"</span>: [
    {
      <span class="hljs-attr">"relationName"</span>: <span class="hljs-string">"O8ARkepaJ0Fqxm7m"</span>,
      <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
      <span class="hljs-attr">"remark"</span>: <span class="hljs-string">""</span>,
      <span class="hljs-attr">"tag"</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"l63XDevNRbhneeGo"</span>,
      <span class="hljs-attr">"relationGroupId"</span>: <span class="hljs-number">701</span>
    }
  ]
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
    <span class="hljs-attr">"action"</span> : <span class="hljs-string">"blackList"</span>,
    <span class="hljs-attr">"code"</span> : <span class="hljs-number">6102</span>,
    <span class="hljs-attr">"message"</span> : <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-8-17"><a name="t87"></a>9.18 移入黑名单</h4>
<pre class="curl"><code class="hljs sql">curl -X POST -H "Accept: application/json" -H "Content-Type: application/json" -H "<span class="hljs-keyword">Cache</span>-Control: <span class="hljs-keyword">no</span>-<span class="hljs-keyword">cache</span><span class="hljs-string">" -H "</span>Postman-Token: <span class="hljs-number">9734215</span>d-ae1b-ec35<span class="hljs-number">-7437</span><span class="hljs-number">-74</span>eeb5cdfb0f<span class="hljs-string">" -d '{
  "</span>appName<span class="hljs-string">": "</span>launchr<span class="hljs-string">",
  "</span>appToken<span class="hljs-string">": "</span><span class="hljs-keyword">verify</span>-code<span class="hljs-string">",
  "</span>userName<span class="hljs-string">":"</span>l63XDevNRbhneeGo<span class="hljs-string">",
  "</span>blackUser<span class="hljs-string">":"</span>O8ARkepaJ0Fqxm7m<span class="hljs-string">"
}' "</span><span class="hljs-keyword">http</span>://<span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.251</span>:<span class="hljs-number">20001</span>//launchr/chat/addToBlackList<span class="hljs-string">"</span></code></pre>
<p><strong>Action</strong> <code>addToBlackList</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>String</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>String</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>String</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>blackUser</td>
<td>要拉黑的用户</td>
<td>String</td>
<td>必填</td>
<td></td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>:<span class="hljs-string">"l63XDevNRbhneeGo"</span>,
  <span class="hljs-attr">"blackUser"</span>:<span class="hljs-string">"O8ARkepaJ0Fqxm7m"</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>String</td>
<td>必要</td>
<td>remove</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>String</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"addToBlackList"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Success"</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
    <span class="hljs-attr">"action"</span> : <span class="hljs-string">"addToBlackList"</span>,
    <span class="hljs-attr">"code"</span> : <span class="hljs-number">6102</span>,
    <span class="hljs-attr">"message"</span> : <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-8-18"><a name="t88"></a>9.19 移出黑名单</h4>
<pre class="curl"><code class="hljs sql">curl -X POST -H "Accept: application/json" -H "Content-Type: application/json" -H "<span class="hljs-keyword">Cache</span>-Control: <span class="hljs-keyword">no</span>-<span class="hljs-keyword">cache</span><span class="hljs-string">" -H "</span>Postman-Token: dec5c49c<span class="hljs-number">-211e-4</span>b0b-fcf2<span class="hljs-number">-8</span>dc6c725eabb<span class="hljs-string">" -d '{
  "</span>appName<span class="hljs-string">": "</span>launchr<span class="hljs-string">",
  "</span>appToken<span class="hljs-string">": "</span><span class="hljs-keyword">verify</span>-code<span class="hljs-string">",
  "</span>userName<span class="hljs-string">":"</span>l63XDevNRbhneeGo<span class="hljs-string">",
  "</span>blackUser<span class="hljs-string">":"</span>O8ARkepaJ0Fqxm7m<span class="hljs-string">"
}' "</span><span class="hljs-keyword">http</span>://<span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.251</span>:<span class="hljs-number">20001</span>//launchr/chat/removeFromBlackList<span class="hljs-string">"</span></code></pre>
<p><strong>Action</strong> <code>removeFromBlackList</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>String</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>String</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>String</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>blackUser</td>
<td>拉黑的用户</td>
<td>String</td>
<td>必填</td>
<td></td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>:<span class="hljs-string">"l63XDevNRbhneeGo"</span>,
  <span class="hljs-attr">"blackUser"</span>:<span class="hljs-string">"O8ARkepaJ0Fqxm7m"</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>String</td>
<td>必要</td>
<td>remove</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>String</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"removeFromBlackList"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Success"</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
    <span class="hljs-attr">"action"</span> : <span class="hljs-string">"removeFromBlackList"</span>,
    <span class="hljs-attr">"code"</span> : <span class="hljs-number">6102</span>,
    <span class="hljs-attr">"message"</span> : <span class="hljs-string">""</span>
}</code></pre>
<h3 id="autoid-2-8-19"><a name="t89"></a>10 其他</h3>
<h4 id="autoid-2-9-0"><a name="t90"></a>10.1 发起实时语音</h4>
<p><strong>场景</strong> web或者手机端需要发起实时语音视频的时候需要调用这个接口，返回对方的uid进行voip拨号，调用成功后会自动发起苹果voip推送。</p>
<p><strong>Action</strong> <code>voipcall</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>String</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>String</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>String</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>to</td>
<td>会话的用户</td>
<td>String</td>
<td>必填</td>
<td>bellliu</td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"NDOaqxpE9mT5a5xZ"</span>,
  <span class="hljs-attr">"to"</span> : [<span class="hljs-string">"Wr7qq8XOR7cQXpbW"</span>] 
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>String</td>
<td>必要</td>
<td>readsession</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>String</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>msgId</td>
<td>消息Id</td>
<td>long</td>
<td>选填</td>
<td>成功后才返回</td>
</tr>
<tr class="odd">
<td>uid</td>
<td>会话用户的uid</td>
<td>long</td>
<td>选填</td>
<td>成功后才返回</td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{

  <span class="hljs-attr">"uid"</span>: <span class="hljs-number">1013</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"voipcall"</span>,
   <span class="hljs-attr">"msgId"</span>: <span class="hljs-number">1462266280408</span>,
   <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Success"</span> 
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"readsession"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-9-1"><a name="t91"></a>10.2 获取账号详细信息</h4>
<p><strong>场景</strong></p>
<p>web或者手机端需要发起实时语音视频后，会收到voip推送，根据uid获取用户详细资料。</p>
<p><strong>Action</strong> <code>voipcall</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>String</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>String</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>String</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>uid</td>
<td>会话的uid</td>
<td>long</td>
<td>必填</td>
<td></td>
</tr>
</tbody>
</table>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"appName"</span>: <span class="hljs-string">"launchr"</span>,
  <span class="hljs-attr">"appToken"</span>: <span class="hljs-string">"verify-code"</span>,
  <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"makrhuo"</span>,
  <span class="hljs-attr">"uid"</span> : <span class="hljs-number">1013</span>
}</code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>String</td>
<td>必要</td>
<td>token-login</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td>[状态码][]</td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>String</td>
<td>必要</td>
<td></td>
</tr>
<tr class="even">
<td>data</td>
<td>返回数据</td>
<td>Object</td>
<td>必要</td>
<td>返回消息</td>
</tr>
</tbody>
</table>
<p><strong>Object</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>modified</td>
<td>用户最后更新时间</td>
<td>long</td>
<td>选填</td>
<td>如果用户存在则返回</td>
</tr>
<tr class="even">
<td>nickName</td>
<td>昵称</td>
<td>String</td>
<td>选填</td>
<td>如果用户存在则返回</td>
</tr>
<tr class="odd">
<td>avatar</td>
<td>头像</td>
<td>String</td>
<td>选填</td>
<td>如果用户存在则返回</td>
</tr>
<tr class="even">
<td>type</td>
<td>用户类型</td>
<td>String</td>
<td>选填</td>
<td>如 con 如果用户存在则返回</td>
</tr>
<tr class="odd">
<td>appname</td>
<td>app名称</td>
<td>String</td>
<td>选填</td>
<td>如果用户存在则返回</td>
</tr>
<tr class="even">
<td>userName</td>
<td>用户名</td>
<td>String</td>
<td>选填</td>
<td>如果用户存在则返回</td>
</tr>
<tr class="odd">
<td>create</td>
<td>用户创建时间</td>
<td>long</td>
<td>选填</td>
<td>如果用户存在则返回</td>
</tr>
<tr class="even">
<td>mobile</td>
<td>手机号码</td>
<td>String</td>
<td>选填</td>
<td>如果用户存在则返回</td>
</tr>
<tr class="odd">
<td>tag</td>
<td>群标签</td>
<td>String</td>
<td>选填</td>
<td>如果是群则有返回</td>
</tr>
<tr class="even">
<td>uid</td>
<td>im唯一标识符</td>
<td>long</td>
<td>选填</td>
<td>如果成功就能返回</td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"voipsession"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Success"</span>,
  <span class="hljs-attr">"data"</span>: {
     <span class="hljs-attr">"uid"</span>: <span class="hljs-number">1013</span>, 
     <span class="hljs-attr">"appname"</span>: <span class="hljs-string">"launchr"</span>,
     <span class="hljs-attr">"nickname"</span>: <span class="hljs-string">"Bell Liu"</span>,
     <span class="hljs-attr">"username"</span>: <span class="hljs-string">"Wr7qq8XOR7cQXpbW"</span>,
     <span class="hljs-attr">"password"</span>: <span class="hljs-literal">null</span>,
     <span class="hljs-attr">"imNumber"</span>: <span class="hljs-string">"10692890"</span>,
     <span class="hljs-attr">"mobile"</span>: <span class="hljs-string">"13888888888"</span>,
     <span class="hljs-attr">"type"</span>: <span class="hljs-literal">null</span>,
     <span class="hljs-attr">"avatar"</span>: <span class="hljs-literal">null</span>,
     <span class="hljs-attr">"create"</span>: <span class="hljs-number">1444638143000</span>,
     <span class="hljs-attr">"modified"</span>: <span class="hljs-number">1449629814000</span>,
     <span class="hljs-attr">"tag"</span>: <span class="hljs-literal">null</span>
     }
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"voipsession"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-9-2"><a name="t92"></a>10.3 上传头像</h4>
<p><strong>场景</strong><br>
提供头像支持，图片存在im服务端, 请求方法为表单form提交</p>
<p><strong>Action</strong> <code>uploadAvatar</code></p>
<p><strong>Input</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>String</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>appToken</td>
<td>token值</td>
<td>String</td>
<td>必填</td>
<td></td>
</tr>
<tr class="odd">
<td>userName</td>
<td>用户</td>
<td>String</td>
<td>必填</td>
<td></td>
</tr>
<tr class="even">
<td>file</td>
<td>附件</td>
<td>file</td>
<td>必填</td>
<td></td>
</tr>
</tbody>
</table>
<pre class="multipart"><code class="hljs http"><span class="hljs-keyword">POST</span> <span class="hljs-string">//launchr/chat/uploadAvatar</span> HTTP/1.1
<span class="hljs-attribute">Host</span>: localhost:20001
<span class="hljs-attribute">Accept</span>: application/json
<span class="hljs-attribute">Cache-Control</span>: no-cache
<span class="hljs-attribute">Postman-Token</span>: 4f67abca-5737-9c92-2c39-42158c91f796
<span class="hljs-attribute">Content-Type</span>: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

<span class="haskell"><span class="hljs-comment">----WebKitFormBoundary7MA4YWxkTrZu0gW</span>
<span class="hljs-type">Content</span>-<span class="hljs-type">Disposition</span>: form-<span class="hljs-class"><span class="hljs-keyword">data</span>; name="appName"</span>

<span class="hljs-title">launchr</span>
<span class="hljs-comment">----WebKitFormBoundary7MA4YWxkTrZu0gW</span>
<span class="hljs-type">Content</span>-<span class="hljs-type">Disposition</span>: form-<span class="hljs-class"><span class="hljs-keyword">data</span>; name="appToken"</span>

<span class="hljs-title">verify</span>-code
<span class="hljs-comment">----WebKitFormBoundary7MA4YWxkTrZu0gW</span>
<span class="hljs-type">Content</span>-<span class="hljs-type">Disposition</span>: form-<span class="hljs-class"><span class="hljs-keyword">data</span>; name="userName"</span>

<span class="hljs-title">l63XDevNRbhneeGo</span>
<span class="hljs-comment">----WebKitFormBoundary7MA4YWxkTrZu0gW</span>
<span class="hljs-type">Content</span>-<span class="hljs-type">Disposition</span>: form-<span class="hljs-class"><span class="hljs-keyword">data</span>; name="file"; filename="undefined"</span>
<span class="hljs-type">Content</span>-<span class="hljs-type">Type</span>: undefined


<span class="hljs-comment">----WebKitFormBoundary7MA4YWxkTrZu0gW</span></span></code></pre>
<p><strong>Output</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必要</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>action</td>
<td>api 动作码</td>
<td>String</td>
<td>必要</td>
<td>upload</td>
</tr>
<tr class="even">
<td>code</td>
<td>状态码</td>
<td>int</td>
<td>必要</td>
<td><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#01-">状态码</a></td>
</tr>
<tr class="odd">
<td>message</td>
<td>状态信息</td>
<td>String</td>
<td>必要</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Success</strong></p>
<pre class="json"><code class="hljs">{

  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"uploadAvatar"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">2000</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<p><strong>Fail</strong></p>
<pre class="json"><code class="hljs">{
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"uploadAvatar"</span>,
  <span class="hljs-attr">"code"</span>: <span class="hljs-number">6102</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">""</span>
}</code></pre>
<h4 id="autoid-2-9-3"><a name="t93"></a>10.4 获取头像</h4>
<p><strong>注意</strong><br>
获取服务端的头像图片,只有上传了才能取的到， 通过http的get 带url去获取</p>
<p><strong>Action</strong> <code>avatar</code></p>
<p><strong>url</strong><br>
{{url}}/launchr/chat/avatar?appName=launchr&amp;userName=l63XDevNRbhneeGo</p>
<p><strong>参数类型</strong></p>
<table>
<thead>
<tr class="header">
<th>字段名</th>
<th>字段</th>
<th>数据类型</th>
<th>是否必填</th>
<th>描述及要求</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>appName</td>
<td>app名称</td>
<td>String</td>
<td>必填</td>
<td>如launchr</td>
</tr>
<tr class="even">
<td>userName</td>
<td>用户名</td>
<td>String</td>
<td>必填</td>
<td>可以传个人用户名或者讨论组、群的userName</td>
</tr>
</tbody>
</table>
</div><div id="MySignature" style="display: block;">作者：ricolee &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 出处：<a href="http://www.cnblogs.com/ricolee/">http://www.cnblogs.com/ricolee/</a><br>本文版权归作者和博客园共有欢迎转载，转载之后请务必在文章明显位置标出原文链接和作者，谢谢。<br>如果本文对您有帮助，请点击<a id="recommendme" ,href="javascript:void(0);">【推荐】</a>您的赞赏将鼓励我继续创作！想跟我一起进步么？那就<a id="followme" href="javascript:void(0);">【关注】</a>我吧。<div id="signatureTips"></div></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory"></div>
<div id="EntryTag"></div>
<div id="blog_post_info"><div id="green_channel">
        <a href="javascript:void(0);" id="green_channel_digg" onclick="DiggIt(10127311,cb_blogId,1);green_channel_success(this,&#39;谢谢推荐！&#39;);">好文要顶</a>
            <a id="green_channel_follow" onclick="follow(&#39;b8d9e362-b458-e111-aa3f-842b2b196315&#39;);" href="javascript:void(0);">关注我</a>
    <a id="green_channel_favorite" onclick="AddToWz(cb_entryId);return false;" href="javascript:void(0);">收藏该文</a>
    <a id="green_channel_weibo" href="javascript:void(0);" title="分享至新浪微博" onclick="ShareToTsina()"><img src="./OneCall-API_files/icon_weibo_24.png" alt=""></a>
    <a id="green_channel_wechat" href="javascript:void(0);" title="分享至微信" onclick="shareOnWechat()"><img src="./OneCall-API_files/wechat.png" alt=""></a>
</div>
<div id="author_profile">
    <div id="author_profile_info" class="author_profile_info">
            <a href="http://home.cnblogs.com/u/ricolee/" target="_blank"><img src="./OneCall-API_files/20150427192748.png" class="author_avatar" alt=""></a>
        <div id="author_profile_detail" class="author_profile_info">
            <a href="http://home.cnblogs.com/u/ricolee/">rico.lee</a><br>
            <a href="http://home.cnblogs.com/u/ricolee/followees">关注 - 48</a><br>
            <a href="http://home.cnblogs.com/u/ricolee/followers">粉丝 - 5</a>
        </div>
    </div>
    <div class="clear"></div>
    <div id="author_profile_honor"></div>
    <div id="author_profile_follow">
    </div>
</div>
<div id="div_digg">
    <div class="diggit" onclick="votePost(10127311,&#39;Digg&#39;)">
        <span class="diggnum" id="digg_count">0</span>
    </div>
    <div class="buryit" onclick="votePost(10127311,&#39;Bury&#39;)">
        <span class="burynum" id="bury_count">0</span>
    </div>
    <div class="clear"></div>
    <div class="diggword" id="digg_tips">
    </div>
<div style="padding-bottom: 5px;"><a onclick="javascript:focusFunction();" href="javascript:void(0);">快速评论</a></div></div>
<script type="text/javascript">
    currentDiggType = 0;
</script></div>
<div class="clear"></div>
<div id="post_next_prev"><a href="https://www.cnblogs.com/ricolee/p/excel-group-sum.html" class="p_n_p_prefix">« </a> 上一篇：<a href="https://www.cnblogs.com/ricolee/p/excel-group-sum.html" title="发布于2018-12-12 14:05">Excel 报表汇总</a><br></div>
</div>


		</div>
		<div class="postDesc">posted @ <span id="post-date">2018-12-16 17:36</span> <a href="https://www.cnblogs.com/ricolee/">rico.lee</a> 阅读(<span id="post_view_count">1</span>) 评论(<span id="post_comment_count">0</span>)  <a href="https://i.cnblogs.com/EditPosts.aspx?postid=10127311" rel="nofollow">编辑</a> <a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#" onclick="AddToWz(10127311);return false;">收藏</a></div>
	</div>
	<script src="./OneCall-API_files/highlight.min.js.下载"></script><script>markdown_highlight();</script><script type="text/javascript">var allowComments=false,cb_blogId=121374,cb_entryId=10127311,cb_blogApp=currentBlogApp,cb_blogUserGuid='b8d9e362-b458-e111-aa3f-842b2b196315',cb_entryCreatedDate='2018/12/16 17:36:00';loadViewCount(cb_entryId);var cb_postType=1;</script>
	
</div><!--end: topics 文章、评论容器-->
</div><a name="!comments"></a><div id="blog-comments-placeholder"></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id="comment_form" class="commentform">
<a name="commentform"></a>
<div id="divCommentShow"></div>
<div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" onclick="return RefreshCommentList();" id="lnk_RefreshComments" runat="server" clientidmode="Static">刷新评论</a><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#" onclick="return RefreshPage();">刷新页面</a><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#top">返回顶部</a></div>
<div id="comment_form_container">（评论功能已被禁用）</div>
<div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
<div id="ad_t2"><a href="http://www.ucancode.com/index.htm" target="_blank">【推荐】超50万VC++源码: 大型组态工控、电力仿真CAD与GIS源码库！</a><br><a href="http://clickc.admaster.com.cn/c/a113612,b3081535,c1705,i0,m101,8a1,8b3,h" target="_blank" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;T2-EH&#39;)">【活动】华为云12.12会员节全场1折起 满额送Mate20</a><br><a href="http://clickc.admaster.com.cn/c/a116493,b2949399,c1705,i0,m101,8a1,8b3,h" target="_blank" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;T2-会员节&#39;)">【活动】华为云会员节云服务特惠1折起</a><br><a href="https://cloud.tencent.com/act/southwest?fromSource=gwzcw.2017844.2017844.2017844" target="_blank" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;T2-腾讯云&#39;)">【推荐】服务器100%基准CPU性能，1核1G首年168元，限时特惠！</a><br></div>
<div id="opt_under_post"></div>
<div id="cnblogs_c1" class="c_ad_block"><a href="https://cloud.tencent.com/act/special/amd?fromSource=gwzcw.1351353.1351353.1351353" target="_blank"><img width="300" height="250" src="./OneCall-API_files/24442-20181129113406214-695115565.jpg" alt="腾讯云1129" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;C1&#39;);"></a></div>
<div id="under_post_news"><div class="itnews c_ad_block"><b>相关博文：</b><br>·  <a href="https://www.cnblogs.com/chenzhihong294/p/10015021.html" target="_blank" onclick="clickRecomItmem(10015021,&#39;VgtQU75uYf2uTI28sCCZFKurjYs3vtzDYJ5zQxxq7cTZdbqI0FIrjpDs1a4uWnlx12yU0KxvmkzZue/5RTHKBdqFINM0p3NZJnWek7xUkxmj5j7OS8Fiod3B4eAZvUjwR2s2JtCCX9ZUAg==&#39;)">API &amp; Web API</a><br>·  <a href="https://www.cnblogs.com/scg0624/p/9975174.html" target="_blank" onclick="clickRecomItmem(9975174,&#39;O+y837M+VvCculVTiD6AqWXXWgC18woBbTPg0V5ukheJ2oxTHHCmAb65M2gif+Y6C/OqOBylt7zrVJONJX6GOJ76kPhUHl2+aOMdRp0s3VzigQmTpLqkxHBukO9Lp+mWdZSNDp8yYniXmQ==&#39;)">API和web API</a><br>·  <a href="https://www.cnblogs.com/xiaoyueyuedeboke/p/9978347.html" target="_blank" onclick="clickRecomItmem(9978347,&#39;ZU4MHT9Y81zbQ2K6PwKVzYk/7djLzzz3c6Ziu5pQP7Z3MtkUxg7mcYpafC08JCr1uErBteKf7F+DcYfgV0b0uJH1wLB9OhQh2JHmM97tyumy+JrP8tpWGG2HYqI/BRhshf5E1UJ776gdcw==&#39;)">API&amp;Web API</a><br>·  <a href="https://www.cnblogs.com/yixiaoyu/p/10016781.html" target="_blank" onclick="clickRecomItmem(10016781,&#39;Go+40ubIShzgeWeR24jvZTtP7iKHBXBg3YveL1dSiEOsLMoLCuJW+OSxIPchmCoYDEnhZcr/3aecX2+3MGANLfnhiHEUEdKEIJf2hq08bgk8ImnEErdDmM0ArG+4NfOFfxi0SzG9BWc5Mw==&#39;)">API 与web API</a><br>·  <a href="https://www.cnblogs.com/ljming/p/9969194.html" target="_blank" onclick="clickRecomItmem(9969194,&#39;IkUCvGw2fWLBF9KMAbwgnDeg8T5GozVohrTc9K+8TbymNywn+wov1BwqgRPhOZQnOA2UFZ0GvsCHuC5gDz8M4L9NAfVQWIKAWW5FpHdQkcnzOfQ8osPghzN/21sTnWtQg66pC7UFHNwhvQ==&#39;)">API and Web API</a><br></div></div>
<script async="async" src="./OneCall-API_files/gpt.js.下载"></script>
<script>
  var googletag = googletag || {};
  googletag.cmd = googletag.cmd || [];
</script>

<script>
  googletag.cmd.push(function() {
    googletag.defineSlot('/1090369/C2', [468, 60], 'div-gpt-ad-1539008685004-0').addService(googletag.pubads());
    googletag.pubads().enableSingleRequest();
    googletag.enableServices();
  });
</script>
<div id="cnblogs_c2" class="c_ad_block">
    <div id="div-gpt-ad-1539008685004-0" style="height:60px; width:468px;" data-google-query-id="CKeMtpmNpN8CFdRuiwoddw4Bag">
    <script>
    if (new Date() >= new Date(2018, 9, 13)) {
        googletag.cmd.push(function() { googletag.display('div-gpt-ad-1539008685004-0'); });
    }
    </script>
    <div id="google_ads_iframe_/1090369/C2_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1090369/C2_0" title="3rd party ad content" name="google_ads_iframe_/1090369/C2_0" width="468" height="60" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" style="border: 0px; vertical-align: bottom;" data-google-container-id="1" data-load-complete="true" src="./OneCall-API_files/saved_resource.html"></iframe></div></div>
</div>
<div id="under_post_kb"><div class="itnews c_ad_block"><b>最新新闻</b>：<br> ·  <a href="https://news.cnblogs.com/n/615016/" target="_blank">“钢铁侠”感谢NASA支持 NASA暖心回应：救援不允许失败</a><br> ·  <a href="https://news.cnblogs.com/n/615015/" target="_blank">京东金融悄悄上线两家P2P 刘强东助理担任法人</a><br> ·  <a href="https://news.cnblogs.com/n/615014/" target="_blank">李斌赌蔚来</a><br> ·  <a href="https://news.cnblogs.com/n/615013/" target="_blank">谷歌新专利展示提高可折叠显示屏耐用性的多套方案</a><br> ·  <a href="https://news.cnblogs.com/n/615006/" target="_blank">解密拼多多：2019年一号工程</a><br>» <a href="http://news.cnblogs.com/" title="IT新闻" target="_blank">更多新闻...</a></div></div>
<div id="HistoryToday" class="c_ad_block"></div>
<script type="text/javascript">
    fixPostBody();
    setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
    deliverAdT2();
    deliverAdC1();
    deliverAdC2();    
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);   
</script>
</div>


	</div><!--end: forFlow -->
	</div><!--end: mainContent 主体内容容器-->

	<div id="sideBar">
		<div id="sideBarMain">
			
<!--done-->
<div class="newsItem">
<h3 class="catListTitle">公告</h3>
	<div id="blog-news"><script type="text/javascript">window['__document_write_ajax_callbacks__']['8']();</script><script type="text/javascript">window['__document_write_ajax_callbacks__']['9']();</script><script>window['__document_write_ajax_callbacks__']['1']();</script>
<script type="text/javascript">window['__document_write_ajax_callbacks__']['10']();</script><script type="text/javascript">window['__document_write_ajax_callbacks__']['11']();</script><script type="text/javascript">window['__document_write_ajax_callbacks__']['2']();</script>
<script type="text/javascript">window['__document_write_ajax_callbacks__']['12']();</script><script type="text/javascript">window['__document_write_ajax_callbacks__']['13']();</script><script type="text/javascript">window['__document_write_ajax_callbacks__']['3']();</script>

<script type="text/javascript">window['__document_write_ajax_callbacks__']['14']();</script><script type="text/javascript">window['__document_write_ajax_callbacks__']['15']();</script><script type="text/javascript">window['__document_write_ajax_callbacks__']['4']();</script>
<script type="text/javascript">window['__document_write_ajax_callbacks__']['16']();</script><script type="text/javascript">window['__document_write_ajax_callbacks__']['17']();</script><script type="text/javascript">window['__document_write_ajax_callbacks__']['5']();</script>
<script type="text/javascript">window['__document_write_ajax_callbacks__']['18']();</script><script type="text/javascript">window['__document_write_ajax_callbacks__']['6']();</script><div id="profile_block">昵称：<a href="https://home.cnblogs.com/u/ricolee/">rico.lee</a><br>园龄：<a href="https://home.cnblogs.com/u/ricolee/" title="入园时间：2012-02-16">6年10个月</a><br>粉丝：<a href="https://home.cnblogs.com/u/ricolee/followers/">5</a><br>关注：<a href="https://home.cnblogs.com/u/ricolee/followees/">48</a><div id="p_b_follow"></div><script type="text/javascript">window['__document_write_ajax_callbacks__']['19']();</script><script>window['__document_write_ajax_callbacks__']['7']();</script></div></div><script type="text/javascript">loadBlogNews();</script>
</div>

			<div id="calendar"><div id="blog-calendar" style="display:none"></div><script type="text/javascript">loadBlogDefaultCalendar();</script></div>
			
			<div id="leftcontentcontainer">
				<div id="blog-sidecolumn"><div id="sidebar_search" class="sidebar-block"></div><div id="sidebar_categories">
<div class="catListPostCategory">
<h3 class="catListTitle">随笔分类<span style="font-size:11px;font-weight:normal">(5)</span></h3>

<ul>

<li><a id="CatList_LinkList_0_Link_0" href="https://www.cnblogs.com/ricolee/category/1199290.html">[01]-c#</a> </li>

<li><a id="CatList_LinkList_0_Link_1" href="https://www.cnblogs.com/ricolee/category/1199292.html">[02]-Asp.net MVC</a> </li>

<li><a id="CatList_LinkList_0_Link_2" href="https://www.cnblogs.com/ricolee/category/1347853.html">[10]-JavaScript(1)</a> </li>

<li><a id="CatList_LinkList_0_Link_3" href="https://www.cnblogs.com/ricolee/category/1199293.html">[20]-Java</a> </li>

<li><a id="CatList_LinkList_0_Link_4" href="https://www.cnblogs.com/ricolee/category/1360852.html">[30]-SQL Server</a> </li>

<li><a id="CatList_LinkList_0_Link_5" href="https://www.cnblogs.com/ricolee/category/1361080.html">[40]-Oauth2.0(1)</a> </li>

<li><a id="CatList_LinkList_0_Link_6" href="https://www.cnblogs.com/ricolee/category/1347855.html">[90]-工具(1)</a> </li>

<li><a id="CatList_LinkList_0_Link_7" href="https://www.cnblogs.com/ricolee/category/1361364.html">[91]-日常(2)</a> </li>

</ul>

</div>

<div class="catListPostArchive">
<h3 class="catListTitle">随笔档案<span style="font-size:11px;font-weight:normal">(9)</span></h3>

<ul>

<li><a id="CatList_LinkList_1_Link_0" href="https://www.cnblogs.com/ricolee/archive/2018/12.html">2018年12月 (3)</a> </li>

<li><a id="CatList_LinkList_1_Link_1" href="https://www.cnblogs.com/ricolee/archive/2018/11.html">2018年11月 (2)</a> </li>

<li><a id="CatList_LinkList_1_Link_2" href="https://www.cnblogs.com/ricolee/archive/2018/04.html">2018年4月 (1)</a> </li>

<li><a id="CatList_LinkList_1_Link_3" href="https://www.cnblogs.com/ricolee/archive/2017/11.html">2017年11月 (2)</a> </li>

<li><a id="CatList_LinkList_1_Link_4" href="https://www.cnblogs.com/ricolee/archive/2017/10.html">2017年10月 (1)</a> </li>

</ul>

</div>

</div><div id="sidebar_topviewedposts" class="sidebar-block"><div id="topview_posts_wrap">
<div class="catListView">
<h3 class="catListTitle">阅读排行榜</h3>
	<div id="TopViewPostsBlock"><ul><li><a href="https://www.cnblogs.com/ricolee/p/postman-api.html">1. postman自动化接口测试(2268)</a></li><li><a href="https://www.cnblogs.com/ricolee/p/markdown.html">2. 博客园markdown效果(559)</a></li><li><a href="https://www.cnblogs.com/ricolee/p/web-performace.html">3. 雅虎网站优化军规(43)</a></li><li><a href="https://www.cnblogs.com/ricolee/p/java-setting.html">4. Java 环境搭建(39)</a></li><li><a href="https://www.cnblogs.com/ricolee/p/crossdomain.html">5. 同源策略和跨域(18)</a></li></ul></div>
</div>
</div></div><div id="sidebar_topcommentedposts" class="sidebar-block"><div id="topfeedback_posts_wrap" style="display: none;">
<div class="catListFeedback">
<h3 class="catListTitle">评论排行榜</h3>
	<div id="TopFeedbackPostsBlock"></div>
</div>
</div></div><div id="sidebar_topdiggedposts" class="sidebar-block"><div id="topdigg_posts_wrap">
<div class="catListView">
<h3 class="catListTitle">推荐排行榜</h3>
<div id="TopDiggPostsBlock"><ul><li><a href="https://www.cnblogs.com/ricolee/p/postman-api.html">1. postman自动化接口测试(2)</a></li></ul></div>
</div></div></div></div><script type="text/javascript">loadBlogSideColumn();</script>
			</div>
			
		</div><!--end: sideBarMain -->
	</div><!--end: sideBar 侧边栏容器 -->
	<div class="clear"></div>
	</div><!--end: main -->
	<div class="clear"></div>
	<div id="footer">
		
<!--done-->
Copyright ©2018 rico.lee
	</div><!--end: footer -->
</div><!--end: home 自定义的最大容器 -->
<!--PageEndHtml Block Begin-->
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1266823638'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s22.cnzz.com/z_stat.php%3Fid%3D1266823638%26show%3Dpic2' type='text/javascript'%3E%3C/script%3E"));</script><span id="cnzz_stat_icon_1266823638"><a href="http://www.cnzz.com/stat/website.php?web_id=1266823638" target="_blank" title="站长统计"><img border="0" hspace="0" vspace="0" src="./OneCall-API_files/pic2.gif"></a></span><script src="./OneCall-API_files/z_stat.php" type="text/javascript"></script><script src="./OneCall-API_files/core.php" charset="utf-8" type="text/javascript"></script>
<!--PageEndHtml Block End-->


<iframe id="google_osd_static_frame_2696045430187" name="google_osd_static_frame" style="display: none; width: 0px; height: 0px;" src="./OneCall-API_files/saved_resource(1).html"></iframe><div id="sideToolbar" style="display: block;"><div class="sideCatalogBg" id="sideCatalog"><div id="sideCatalog-sidebar"><div class="sideCatalog-sidebar-top"></div><div class="sideCatalog-sidebar-bottom"></div></div><div id="sideCatalog-catalog"><ul class="nav" style="width:300px;zoom:1"><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-0-0-0" title="目录">目录</a><span class="sideCatalog-dot"></span></li><li><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-1-0-0" title="接口详细">接口详细</a><span class="sideCatalog-dot"></span></li><li class="h2Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-0-0" title="1. 接口简介">1. 接口简介</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-1-0" title="1.1 状态代码">1.1 状态代码</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-1-1" title="1.2 消息格式">1.2 消息格式</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-1-2" title="1.3 通用接口地址">1.3 通用接口地址</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-1-3" title="1.4 通用接口验证方式">1.4 通用接口验证方式</a></li><li class="h2Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-1-4" title="2 Web个人接口">2 Web个人接口</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-2-0" title="1.2.1 用户登录">1.2.1 用户登录</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-2-1" title="2.2 用户强行登出">2.2 用户强行登出</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-2-2" title="3.1 网页获取未读会话消息个数">3.1 网页获取未读会话消息个数</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-2-3" title="3.2 获取会话的详细信息">3.2 获取会话的详细信息</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-2-4" title="3.3 打开会话及消息已读">3.3 打开会话及消息已读</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-2-5" title="3.4 移除联系人">3.4 移除联系人</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-2-6" title="3.5 会话角标批量清零">3.5 会话角标批量清零</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-2-7" title="3.6 会话角标根据标签清零">3.6 会话角标根据标签清零</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-2-8" title="3.7 会话置顶功能">3.7 会话置顶功能</a></li><li class="h2Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-2-9" title="4 Web讨论组聊天">4 Web讨论组聊天</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-3-0" title="4.1 创建讨论组">4.1 创建讨论组</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-3-1" title="4.2 添加讨论组成员">4.2 添加讨论组成员</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-3-2" title="4.3 删除讨论组成员">4.3 删除讨论组成员</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-3-3" title="4.4 修改讨论组名称">4.4 修改讨论组名称</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-3-4" title="4.5 我的讨论组列表">4.5 我的讨论组列表</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-3-5" title="4.6 讨论组与工作群的区别">4.6 讨论组与工作群的区别</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-3-6" title="4.7 创建群组">4.7 创建群组</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-3-7" title="4.8 添加群成员">4.8 添加群成员</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-3-8" title="4.9 删除群成员">4.9 删除群成员</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-3-9" title="4.10 修改群名或头像">4.10 修改群名或头像</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-3-10" title="4.11 获取群列表">4.11 获取群列表</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-3-11" title="4.12 获取群成员">4.12 获取群成员</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-3-12" title="4.13 升为群管理员">4.13 升为群管理员</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-3-13" title="4.14 取消用户群管理员权限">4.14 取消用户群管理员权限</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-3-14" title="4.15 消息免打扰设置">4.15 消息免打扰设置</a></li><li class="h2Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-3-15" title="5. 消息中心">5. 消息中心</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-4-0" title="5.1 网页版文本消息发送">5.1 网页版文本消息发送</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-4-1" title="5.2 发送文件或图片">5.2 发送文件或图片</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-4-2" title="5.3 获取用户会话历史聊天消息">5.3 获取用户会话历史聊天消息</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-4-3" title="5.4 定位某一历史聊天消息">5.4 定位某一历史聊天消息</a></li><li class="h3Offset active"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-4-4" title="5.5 获取@我的消息">5.5 获取@我的消息</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-4-5" title="5.6 下载图片或附件">5.6 下载图片或附件</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-4-6" title="5.7 消息撤回">5.7 消息撤回</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-4-7" title="5.8 消息合并转发">5.8 消息合并转发</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-4-8" title="5.9 消息轮训订阅">5.9 消息轮训订阅</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-4-9" title="5.10 发送图文消息">5.10 发送图文消息</a></li><li class="h2Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-4-10" title="6.消息标记重点">6.消息标记重点</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-5-0" title="6.1 添加重点">6.1 添加重点</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-5-1" title="7.2 删除重点">7.2 删除重点</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-5-2" title="7.3 消息重点列表">7.3 消息重点列表</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-5-3" title="7.4 批量添加重点">7.4 批量添加重点</a></li><li class="h2Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-5-4" title="8 普通消息订阅类型">8 普通消息订阅类型</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-6-0" title="8.1 接收个人文本">8.1 接收个人文本</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-6-1" title="7.2 接收个人语音">7.2 接收个人语音</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-6-2" title="7.3 接收个人图片client">7.3 接收个人图片client</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-6-3" title="7.4 系统提醒消息">7.4 系统提醒消息</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-6-4" title="7.5 接收视频消息">7.5 接收视频消息</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-6-5" title="7.6 接收图文消息">7.6 接收图文消息</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-6-6" title="7.7 接收附件消息">7.7 接收附件消息</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-6-7" title="7.8 消息撤回重发">7.8 消息撤回重发</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-6-8" title="7.9 接收实时音频视频消息">7.9 接收实时音频视频消息</a></li><li class="h2Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-6-9" title="8 指令消息订阅类型">8 指令消息订阅类型</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-7-0" title="8.1 个人消息已读指令">8.1 个人消息已读指令</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-7-1" title="8.2 群消息已读指令(暂未实现该功能)">8.2 群消息已读指令(暂未实现该功能)</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-7-2" title="8.3 消息标记重点指令">8.3 消息标记重点指令</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-7-3" title="8.4 消息取消标记指令(客户端只收不发)client">8.4 消息取消标记指令(客户端只收不发)clien...</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-7-4" title="8.5 移除会话框指令">8.5 移除会话框指令</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-7-5" title="8.6 打开会话指令">8.6 打开会话指令</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-7-6" title="8.7 好友同步指令">8.7 好友同步指令</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-7-7" title="8.8 会话更新指令">8.8 会话更新指令</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-7-8" title="8.9 会话角标批量清零指令">8.9 会话角标批量清零指令</a></li><li class="h2Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-7-9" title="9. 好友及分组接口">9. 好友及分组接口</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-8-0" title="9.1 创建分组">9.1 创建分组</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-8-1" title="9.2 修改好友分组">9.2 修改好友分组</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-8-2" title="9.3 删除好友分组">9.3 删除好友分组</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-8-3" title="9.4 获取分组列表">9.4 获取分组列表</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-8-4" title="9.5 获取好友列表">9.5 获取好友列表</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-8-5" title="9.6 邀请好友">9.6 邀请好友</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-8-6" title="9.7 处理好友请求">9.7 处理好友请求</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-8-7" title="9.8 删除好友">9.8 删除好友</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-8-8" title="9.9 获取好友验证列表">9.9 获取好友验证列表</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-8-9" title="9.10 添加单向好友类似收藏功能">9.10 添加单向好友类似收藏功能</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-8-10" title="9.11 移动好友分组">9.11 移动好友分组</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-8-11" title="9.12 好友备注">9.12 好友备注</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-8-12" title="9.13 搜索好友列表">9.13 搜索好友列表</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-8-13" title="9.14 增量好友及分组">9.14 增量好友及分组</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-8-14" title="9.15 精确搜索用户">9.15 精确搜索用户</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-8-15" title="9.16 模糊搜索好友">9.16 模糊搜索好友</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-8-16" title="9.17 黑名单列表">9.17 黑名单列表</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-8-17" title="9.18 移入黑名单">9.18 移入黑名单</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-8-18" title="9.19 移出黑名单">9.19 移出黑名单</a></li><li class="h2Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-8-19" title="10 其他">10 其他</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-9-0" title="10.1 发起实时语音">10.1 发起实时语音</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-9-1" title="10.2 获取账号详细信息">10.2 获取账号详细信息</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-9-2" title="10.3 上传头像">10.3 上传头像</a></li><li class="h3Offset"><a href="https://www.cnblogs.com/ricolee/p/onecall-api.html#autoid-2-9-3" title="10.4 获取头像">10.4 获取头像</a></li></ul></div></div></div><a href="javascript:void(0);" title="[隐藏/显示]目录" id="sideCatalogBtn" class="sideCatalogBtnDisable"></a><div id="toTop" title="回顶部"></div><div id="toBottom" title="到底部"></div><script type="text/javascript">
	$('#cnblogs_post_body img').zoomify();
</script><script type="text/javascript">getFollowStatus('b8d9e362-b458-e111-aa3f-842b2b196315')</script></body></html>